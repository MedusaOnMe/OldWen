import{F as d,i as x}from"./chunk-46FGAK6J.js";import{L as R,M as g,pa as L}from"./chunk-HG4P4WCJ.js";import{l as b,w as v}from"./chunk-VU23O6LP.js";import"./chunk-RFTHTXRF.js";import{u as D}from"./chunk-YTFWYDJ6.js";import{a as u,i as n}from"./chunk-O2FNG2JZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as p,h as e,n as r}from"./chunk-3KENBVE7.js";e();r();e();r();var E=p(u());e();r();var T=p(u());e();r();var C=(a=>(a.PENDING="pending",a.ACCEPTED="accepted",a))(C||{}),l=(i=>(i.NOT_SUBMITTED="not_submitted",i.PENDING_REVIEW="pending",i.APPROVED="approved",i.REJECTED="rejected",i))(l||{}),U=["accepted"],I=["approved","rejected","pending"],_=["not_submitted"];e();r();e();r();var m="cash",B={account:t=>[m,"account",{user:t}],addressBook:t=>[m,"address-book",t?.userID],cashAddress:t=>[m,"cash-address",{accountIdentifier:t}],enrollment:t=>[m,"enrollment",t?.userID],transfers:(t,o)=>[m,"transfers",{user:t,params:o}],supportedSettlementOptions:t=>[m,"payment-rails",{recipient:t}]};var J=n.object({id:n.string(),balance:n.string(),addressDetails:n.object({address:n.string()}),enrollmentDetails:n.object({kycStatus:n.nativeEnum(l),kycUrl:n.string(),tosStatus:n.nativeEnum(C),tosUrl:n.string()}),bankDetails:n.object({sourceCurrency:n.string(),destinationCurrency:n.string(),destinationBlockchain:n.string(),destinationAddress:n.string(),accountNumber:n.string(),routingNumber:n.string(),bankName:n.string().optional(),bankAddress:n.string().optional(),bankBeneficiaryName:n.string().optional(),bankBeneficiaryAddress:n.string().optional()}).optional()}),S=(t,o)=>{let{accessToken:a,userID:f}=t??{};return v({...o,queryKey:B.account(t),queryFn:f?async()=>{let i=await x.api().bearer(a).get(`/cash/v1/users/${f}/cash-account`),c=J.safeParse(i.data);if(c.success)return c.data;throw new y("Failed to parse cash account data")}:b})},y=class extends Error{constructor(o){super(o),this.name="CashAccountError"}};e();r();var O=t=>{if(!t)return!1;let{kycStatus:o,tosStatus:a}=t;return I.includes(o)&&U.includes(a)},K=t=>{if(!t)return!1;let{kycStatus:o}=t;return _.includes(o)};e();r();var w=p(u());e();r();var P=D({seconds:5});var F=()=>{let{data:t}=d(),{data:o}=S(t,{refetchInterval:P});return{approved:(0,w.useMemo)(()=>o?.enrollmentDetails.kycStatus==="approved",[o?.enrollmentDetails.kycStatus]),status:o?.enrollmentDetails.kycStatus}};var V=({onSettingsPress:t,onBankDetailsPress:o,onSupportPress:a})=>{let{data:f,isLoading:i}=d(),{data:c,isLoading:A}=S(f),{status:N}=F(),q=(0,T.useMemo)(()=>i||A?"loading":c?K(c.enrollmentDetails)?"enrolling":O(c.enrollmentDetails)?"enrolled":"not-enrolled":"not-enrolled",[c,A,i]),W=(0,T.useMemo)(()=>N!=="approved"?[]:[{label:"Settings",icon:"Settings",onPress:t},{label:"Bank Details",icon:"Bank",onPress:o},{label:"Support",icon:"HelpCircle",onPress:a}],[N,t,o,a]);return{state:q,menuItems:W}};e();r();var Q=()=>{throw new Error("Not yet implemented")},M=Q;e();r();var Y=p(u());e();r();var h=p(u());e();r();var z=p(u());var G=()=>({title:"Complete enrollment",description:"To start using Cash on Phantom, just accept the terms of service and complete KYC verification."});var $="https://assets.phantom.app/assets/nux-illustration-gm.webp",H=275,X=2.59375,k=()=>{let{title:t,description:o}=G();return h.default.createElement(R,{flex:1,justifyContent:"center",alignItems:"center",marginBottom:96,gap:4},h.default.createElement(L,{src:$,width:H,height:H/X}),h.default.createElement(g,{font:"heading4Bold",align:"center",marginTop:16},t),h.default.createElement(g,{font:"caption",color:"textSecondary",align:"center"},o))};e();r();var Z=()=>{throw new Error("Not yet implemented")},j=Z;var tt=()=>{let{state:t}=V({onSettingsPress:()=>{},onBankDetailsPress:()=>{},onSupportPress:()=>{}});switch(t){case"loading":return E.default.createElement(g,null,"Loading...");case"not-enrolled":return E.default.createElement(j,null);case"enrolling":return E.default.createElement(k,null);case"enrolled":return E.default.createElement(M,null)}};export{tt as CashTabPage};
//# sourceMappingURL=ui-6Z5ILXX5.js.map
