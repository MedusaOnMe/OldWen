import{a as Qn}from"./chunk-DHUODSUL.js";import{a as Xn}from"./chunk-GZQRDHP4.js";import{a as Yn,b as qn,d as Jn,e as eo,f as to}from"./chunk-L3N7XTZJ.js";import{N as zn,O as jn}from"./chunk-Q7EFTJLZ.js";import{a as Eo}from"./chunk-QQL7KG33.js";import{a as xt}from"./chunk-P4ZL5KWS.js";import{a as kt}from"./chunk-CEZMY2VY.js";import{d as Zn}from"./chunk-TRAXC57E.js";import{f as $n}from"./chunk-KXXMDE73.js";import{a as _n,c as Kn}from"./chunk-K5HHPSTF.js";import{B as Gn,U as Wn,ib as Ye,p as oe}from"./chunk-6C52MCLT.js";import{$a as On,s as it,sa as Vn}from"./chunk-OERJXOXU.js";import{f as ct,g as f,i as Fn,j as vn,k as In,n as En,p as Un,s as Mn,t as Ln}from"./chunk-IKQYPAXW.js";import{o as rn}from"./chunk-PFNJNBM2.js";import{a as on}from"./chunk-55Q6ZFSF.js";import{b as Hn}from"./chunk-XEI5RGHZ.js";import{C as Pn,L as Dn}from"./chunk-TMK4CY5E.js";import{Ba as cn,D as dn,Dd as Nn,Fd as Bn,Gc as dt,Ic as bn,Id as $e,Mc as yn,Pc as An,Qb as Qe,Rb as un,Rc as hn,Uc as Tn,Xc as lt,Zc as kn,ed as xn,jd as Cn,kb as ln,lb as mn,ld as mt,mc as at,nd as wn,oc as pn,od as _e,pc as We,qd as Ke,rc as fn,rd as Rn,wc as gn,yc as Sn,za as Me,zc as Ft}from"./chunk-U6X5ZLHM.js";import{$ as Ie,T as sn,fa as an,na as Tt}from"./chunk-7X5IGQSF.js";import{$a as Xe,Ad as ve,Db as Yt,L as ot,Ob as qt,Rd as en,Za as E,ac as Ce,fb as Zt,oe as rt,pc as Ge,tb as Xt,vc as Jt,x as zt}from"./chunk-M4V43KDP.js";import{H as ne,Ja as nn,L as Q,M as H,ba as tn,d,fa as st,x as we}from"./chunk-HG4P4WCJ.js";import{N as He}from"./chunk-Q24656HF.js";import{w as Qt,z as Ue}from"./chunk-VU23O6LP.js";import{P as Gt,R as Wt,S as At,U as _t,V as Te,Z as Kt,_ as $t,ba as ht,c as Ot,ca as De,u as Ht}from"./chunk-YTFWYDJ6.js";import{a as R,ca as jt}from"./chunk-O2FNG2JZ.js";import{f as I,h as i,m as Buffer,n as a}from"./chunk-3KENBVE7.js";i();a();var Le=I(R());i();a();var Re=I(R());i();a();var Ee=I(R()),no=({goHome:e})=>Ee.default.createElement(Q,{height:"100%",paddingY:36,paddingX:"screen",justifyContent:"center",alignItems:"center"},Ee.default.createElement(Q,{flex:1,justifyContent:"center",alignItems:"center"},Ee.default.createElement(Q,{marginBottom:24},Ee.default.createElement(st,{icon:"X",size:64,shape:"circle",backgroundColor:"accentAlert"})),Ee.default.createElement(H,{color:"textPrimary",align:"center",font:"title1Semibold",marginBottom:8},d.t("sendErrorTitle")),Ee.default.createElement(H,{color:"textSecondary",align:"center",font:"body"},d.t("sendErrorFallback"))),Ee.default.createElement(tn,{theme:"secondary",onPress:e},d.t("homeTab")));var Ct=(0,Re.createContext)(!1),Er=({goHome:e,children:t})=>{let n=(0,Re.useCallback)(()=>{f.getState().resetSendSlice(),e()},[e]);return Re.default.createElement(on,{fallback:o=>{if(o instanceof ct)return Re.default.createElement(no,{goHome:n});throw o}},Re.default.createElement(Ct.Provider,{value:!0},t))};i();a();var ro=I(R());i();a();var wt=(e,t)=>{let n=Ce(e,4);return t?`${t} (${n})`:n};i();a();i();a();var oo=(e,t)=>{let{getExistingAccount:n,getKnownAddressLabel:o}=Ie();if(!e)return null;let r=n(e),s=o(e,t),c=r?r.name:s;return c||null};var vt=({recipient:e,recipientHandle:t,networkID:n})=>{let o=oo(e,n),{data:r}=yn(e,n),s=r?.address&&e;return{recipient:r?.address?r.address:e,recipientHandle:t||o||s||""}};var ut=()=>{let e=f(s=>s.sendFormValues.recipient),t=f(s=>s.sendFormValues.recipientHandle),n=f(s=>s.fungibleKey),o=f(s=>s.splTokenAccount),{fungible:r}=_e({key:n,splTokenAccount:o});return vt({recipient:e,recipientHandle:t,networkID:r?.data.chain.id??Xe.Solana.Mainnet})},It=()=>{let{recipient:e,recipientHandle:t}=ut();return(0,ro.useMemo)(()=>wt(e,t),[e,t])};var me=()=>{if(!(0,Le.useContext)(Ct))throw new Error("useSendFungibleFlow must be used within a SendFungibleFlowErrorBoundary");let t=f(Z=>Z.fungibleKey),n=f(Z=>Z.encodedCaip19),o=f(Z=>Z.splTokenAccount),{fungible:r}=_e({key:t,splTokenAccount:o}),{data:s}=Pn({legacyKey:t??"",encodedCaip19:n??"",isSplCompressed:!1,queryOptions:{enabled:!!t&&!!n}}),c=(0,Le.useMemo)(()=>s?jn(s,{splTokenAccount:o}):r,[s,o,r]),[p]=(0,Le.useState)(c),{data:l}=rt({address:p?.data.walletAddress,networkID:p?.data.chain.id});if(!l||!p)throw new ct("senderAddress or fungible is undefined, send flow is broken");let{data:m,type:u}=p,{chain:w,decimals:T,logoUri:U,symbol:M,tokenAddress:B,balance:O,key:S}=m,C=w.id,F=M??(B?Ce(B,4):d.t("tokenRowUnknownToken")),G=B??"",W=u==="SPL"?p.data.programId:null,L=It(),P=f(Z=>Z.sendFormValues),{amountAsset:X}=P,k=De(X,T),v=`${$e(k,T)} ${F}`,x=(0,Le.useMemo)(()=>mt(p),[p]),{data:z}=fn({query:x?{data:x}:void 0}),{fromUsd:_,formatLocalizedPrice:y}=dt(),Y=z?.usd??0,D=Qe(k.toNumber(),Y),Se=_(D),N=y(Se),J=Y?`~${N}`:"-",j=xn(p);return{senderAddress:l,networkID:C,tokenAddress:G,symbol:F,balance:O,decimals:T,programId:W,formattedRecipient:L,uiAmount:k,usdPriceOfToken:Y,formattedUiAmount:v,formattedCurrencyAmount:J,tokenPrice:N,logoUri:U,type:u,key:S,transferFeePercent:j}};i();a();var pt=I(R());i();a();i();a();var Ro=[ln.toString(),mn.toString()],io=async(e,t)=>{let n=cn(t);try{let o=await n.getParsedAccountInfo(new ot.PublicKey(e));if(o&&Ro.includes(o.value?.owner.toString()??"")&&"mintAuthority"in(o.value?.data).parsed.info)return!0}catch{}return!1};var No=1*24*60*1e3,Bo=1*60*1e3,ao=({address:e,networkID:t})=>Qt({queryKey:["is-mint-account",e],queryFn:async()=>{if(!E.isSolanaNetworkID(t))throw new Error("Attempting to get mint account for non-Solana network");return io(e,t)},enabled:!!e&&E.isSolanaNetworkID(t),gcTime:No,staleTime:Bo});i();a();var lo=I(R());i();a();var co=890880,qe=()=>{let{senderAddress:e,type:t}=me(),n=f(c=>c.sendFormValues),o=t==="SolanaNative",{data:r}=En({...e,address:n.recipient},o);return o&&typeof r<"u"&&r<co?co:0};var mo=(e,t,n)=>{let{fungibleKey:o,splTokenAccount:r}=f(U=>({fungibleKey:U.fungibleKey,splTokenAccount:U.splTokenAccount})),{data:[s]}=He(["kill-send-simulation"]),c=qe(),p=(0,lo.useMemo)(()=>{if(!(!e||s))return{sendSessionId:"simulate-send",shouldShowFiatValues:!1,fungibleKey:o,splTokenAccount:r,confirmedFungibleAndSender:null,sendFormValues:{recipient:t,recipientHandle:"",amountAsset:new Te(c===0?1:c),solana:{references:[]}},gasEstimation:void 0}},[s,c,e,o,t,r]),{data:l,isLoading:m}=Ke(p),u={type:"transaction",userAccount:e,params:void 0,url:"https://phantom.com",networkID:n};l&&(E.isEVMNetworkID(l.networkID)&&(u.params={transactions:[l.unsignedTransaction]}),E.isSolanaNetworkID(l.networkID)&&(u.params={transactions:l.transaction.map(U=>zt(U)),method:"signAndSendTransaction"}));let{data:w,isLoading:T}=On(u,{disabled:!l||s,disableRefetch:!0});return{data:w,isLoading:!s&&(m||T)}};var Po=(e,t)=>({address:e,addressType:Xt(t,e),networkID:t}),Do=({senderAddress:e,senderAccounts:t,networkID:n})=>(0,pt.useMemo)(()=>e?t.reduce((o,r)=>{let s=r.addresses.filter(c=>c.networkID===n&&c.address!==e);if(n)for(let c of s)o.push({label:r.name,address:c.address,chainID:n});return o},[]):[],[e,t,n]);function Uo(e){if(!e)return"";let{warnings:t=[],error:n=""}=e;return n==="UNKNOWN_ERROR"?t[0]?.message:n==="INSUFFICIENT_FUNDS"?d.t(`sendWarning_${n}`):""}var Mo=({senderAddress:e,recipient:t,networkID:n})=>{let{data:o,isLoading:r}=mo(e??"",t,n);return{simulationWarning:Uo(o),isSimulationLoading:r}},Lo=({recipient:e,networkID:t})=>{let{currentRecipient:n,isStaleRecipient:o,recipientError:r}=hn(e,t);return!o&&!r&&n.length>0?n:""},Vo=({recipient:e,networkID:t})=>{let{data:n=[],isLoading:o}=Cn({chainAddresses:e?[Po(e,t)]:[]});return{recipientHasZeroBalance:(0,pt.useMemo)(()=>n.length===1&&n[0].data.amount==="0",[n]),recipientTokensIsLoading:o}},Je=({senderAddress:e,senderAccounts:t,networkID:n,recipient:o})=>{let{recentAddresses:r,savedAddresses:s}=Ie(),c=Do({senderAddress:e,senderAccounts:t,networkID:n}),p=Lo({recipient:o,networkID:n}),{recipientHasZeroBalance:l,recipientTokensIsLoading:m}=Vo({recipient:p,networkID:n}),{data:u,isLoading:w}=ao({address:p,networkID:n}),{simulationWarning:T,isSimulationLoading:U}=Mo({senderAddress:e??"",recipient:p,networkID:n}),M=!p||m||w&&E.isSolanaNetworkID(n)||U;return{sendAddressWarning:(0,pt.useMemo)(()=>M||!e?null:u?d.t("sendMintAccountWarning"):c.find(S=>S.address===p)?null:T||(r.addresses.find(S=>S.address===o)||s.addresses.find(S=>S.address===o)?null:e===p?d.t("sendSameAddressWarning"):l?d.t("sendRecipientZeroBalanceWarning"):d.t("sendUnknownAddressWarning")),[r,s,o,p,c,e,l,u,T,M]),sendAddressVariant:u?"danger":"warning"}};i();a();var V=I(R());i();a();function uo(e,t){return e.isZero()?new Te(Me.get(t).amountForGasEstimation??0):e}var Oo=Ht({seconds:10}),Ho=({onClose:e,onNext:t})=>{let{senderAddress:n,networkID:o,decimals:r,programId:s,type:c,balance:p,usdPriceOfToken:l,symbol:m,logoUri:u,formattedUiAmount:w,formattedCurrencyAmount:T}=me(),U=qe(),M=De(U,r).toNumber(),[B,O]=(0,V.useState)(""),S=(0,V.useMemo)(()=>{try{let b=new Te(B);if(!b.isNaN())return b}catch{}return new Te(0)},[B]),C=f(b=>b),F=f(b=>b.sendFormValues),G=f(b=>b.resetSendSlice),{amountAsset:W,amountUsd:L,recipient:P}=F,X=f(b=>b.setSendFormValues),k=f(b=>b.shouldShowFiatValues),v=f(b=>b.setShouldShowFiatValues),x=s===Yt,z=F.solana.memo,_=(0,V.useMemo)(()=>{let b=C.sendFormValues.recipient;return{...C,sendFormValues:{...F,recipient:b||n.address,amountAsset:uo(F.amountAsset,o)}}},[F,C,n,o]),{data:y}=Ke(_),{data:Y}=We({networkID:o,multichainTransaction:y,transactionSpeed:"fastest",queryOptions:{refetchInterval:Oo}}),{currencySymbol:D,currencyCode:Se,toUsd:N,fromUsd:J,formatLocalizedPrice:j}=dt(),Z=In({chainAddress:n,type:c,balance:p,decimals:r,recipient:P,gasEstimation:Y,clampToZero:!0}),ae=De(Z??0,r),be=Qe(ae.toNumber(),l),de=J(be,2),ee=k?D:void 0,Fe=k?void 0:` ${m}`,ce=k?Se:m,le=(0,V.useMemo)(()=>{if(S.isZero())return;let b=lt.get(o),K=k?b.minimumSendableCurrencyAmount:M,pe=k?de:ae,bt=S.lt(K),yt=S.gt(pe);return bt?d.t("sendFormErrorMinRequiredInterpolated",{minAmount:K,tokenName:ce}):yt?d.t("sendFormErrorInsufficientBalance"):void 0},[S,k,o,de,ae,M,ce]),q=(0,V.useCallback)(b=>{let K=Kt(b),pe=$t(K,r);O(pe)},[r]),ye=(0,V.useCallback)(()=>{let b=De(W,r).toString(10),K=J(L??0).toString(10);q(k?b:K),v(!k)},[k,v,W,L,r,q,J]),je=(0,V.useCallback)(()=>{q(k?de.toString(10):ae.toString(10))},[q,k,ae,de]);(0,V.useEffect)(()=>{let b,K,pe;k?(pe=S.toNumber(),K=N(pe),b=ht(un(K,l,r),r)):(b=ht(S,r),K=Qe(S.toNumber(),l)),X({...f.getState().sendFormValues,amountAsset:b,amountUsd:K})},[X,S,k,l,r,N]),(0,V.useEffect)(()=>{if(B)return;let b=k?L:De(W,r).toNumber();b&&O(b.toString())},[]);let Ne=(0,V.useMemo)(()=>k?l?`${w}`:`??? ${m}`:`${T}`,[k,l,m,w,T]),Be=(0,V.useMemo)(()=>{let b=ee??"",K=Fe??"";return k?`${j(de)}`:`${b}${$e(ae)}${K}`},[k,de,ae,ee,Fe,j]),Pe=(0,V.useCallback)(b=>{let K=F.solana;K.memo=b,X({...F,solana:K})},[F,X]),ke=(0,V.useMemo)(()=>!le&&W.gt(0),[le,W]),nt=(0,V.useCallback)(()=>{ke&&t()},[ke,t]),Ze=(0,V.useCallback)(()=>{e(),G()},[e,G]),xe=(0,V.useMemo)(()=>({edit:d.t("commandEdit"),next:d.t("commandNext"),send:d.t("commandSend"),cancel:d.t("commandCancel"),maxInput:d.t("maxInputMax"),inputAmountPlaceholder:d.t("maxInputAmount"),recipientAddress:d.t("sendRecipientAddress"),memoPlaceholder:d.t("sendMemoOptional"),availableToSend:d.t("availableToSend"),available:d.t("available"),pageTitle:`${d.t("commandSend")} ${m}`}),[m]),Ve=E.isMainnetNetworkID(o);return{networkID:o,handleClose:Ze,handleInputChange:q,handleMemoChange:Pe,handleNext:nt,primaryTextPrefix:ee,primaryText:B,primaryTextSuffix:Fe,toggleDenomination:ye,errorText:le,secondaryText:Ne,formattedMaxAmount:Be,primarySymbol:ce,symbol:m,decimals:r,logoUri:u,canGoNext:ke,i18nStrings:xe,handleSetMax:je,showSecondaryText:Ve,canSendCurrencyAmount:Ve&&!!l,isMemoEnabled:x,memo:z}};i();a();var re=I(R());var Go=({onClose:e,onRecipientNavigation:t,onAmountNavigation:n,networkID:o})=>{let{data:[r]}=He(["enable-unlimited-fungibles"]),{recipientHandle:s}=f(y=>y.sendFormValues),{data:c,isLoading:p}=Vn({usernameOrUserProfileId:s}),l=(0,re.useMemo)(()=>{if(c?.addresses)return Object.keys(c.addresses)},[c]),{isLoading:m,hasNextPage:u,fungibleTokens:w,visibilityOverrides:T}=Dn(),U=(0,re.useMemo)(()=>{let y=o?w.filter(D=>D.decodedCaip19.chainId===o):w;return(l?y.filter(D=>l.includes(D.decodedCaip19.chainId)):y).filter(D=>!D.extraMetadata?.compression?.compressed)},[o,w,l]),[M,B]=(0,re.useState)(""),O=Wt(M)??"",S=At(U,O,Qn),{fungibles:C,isLoadingTokens:F,visibilityOverrides:G}=wn(),W=(0,re.useMemo)(()=>{let y=o?C.filter(D=>D.data.chain.id===o):C;return(l?y.filter(D=>l.includes(D.data.chain.id)):y).filter(D=>D.type!=="CompressedSPL")},[o,C,l]),L=At(W,O,Rn),P=f(y=>y.resetSendSlice),X=(0,re.useMemo)(()=>({close:d.t("commandClose"),search:d.t("assetListSearch"),unknownToken:d.t("assetDetailUnknownToken"),noTokens:d.t("sendNoTokens")}),[]),k=(0,re.useCallback)(y=>B(y),[B]),v=(0,re.useCallback)(()=>{e(),P()},[e,P]),x=(0,re.useCallback)(y=>{let{key:Y,splTokenAccountPubkey:D,networkId:Se,encodedCaip19:N}="data"in y?{key:y.data.key,splTokenAccountPubkey:y.type==="SPL"?y.data.splTokenAccountPubkey:void 0,networkId:y.data.chain.id,encodedCaip19:Zt(mt(y))}:{key:y.legacyKey??y.encodedCaip19,splTokenAccountPubkey:zn(y,{find:"highestQuantity"})?.account,networkId:y.decodedCaip19.chainId,encodedCaip19:y.encodedCaip19},J=f.getState().fungibleKey;J&&J!==Y&&f.getState().resetSendSlice(),f.setState({fungibleKey:Y,splTokenAccount:y.type==="SPL"?D:void 0,encodedCaip19:N});let j=f.getState().sendFormValues;if(j.recipientHandle&&!j.recipient){let Z=c?.addresses[Se];if(Z){f.setState({sendFormValues:{...j,recipient:Z}}),n();return}}t()},[t,n,c?.addresses]),z=(r?m:F)||p,_=(0,re.useMemo)(()=>u?[...S,"loading"]:S,[u,S]);return{fungibles:r?_:L,isLoading:z,visibilityOverrides:r?G:T,searchQuery:M,handleSearch:k,handleClose:v,handleSelect:x,i18nStrings:X}};i();a();i();a();var Et=I(R());var Rt=()=>{let e=f(m=>m.analyticsRecipient),t=f(m=>m.fungibleKey),n=f(m=>m.splTokenAccount),{fungible:o}=_e({key:t,splTokenAccount:n}),{data:r=[]}=ve(),{data:s}=Jt(),c=(0,Et.useMemo)(()=>r.some(m=>m.addresses.some(u=>u.address===e?.address)),[r,e]),p=o?.data.chain.id??Xe.Solana.Mainnet,{data:l}=rt({address:o?.data.walletAddress,networkID:p});return(0,Et.useMemo)(()=>({assetType:"token",networkId:p,recipient:e,senderAddress:l?.address??"",senderUsername:s?.username??"",tokenAddress:o?.data.tokenAddress??"",tokenSymbol:o?.data.symbol??"",tokenType:o?.type,selfSend:c}),[p,e,l?.address,s?.username,o,c])};i();a();var Wo=I(R());i();a();var _o=I(R());i();a();var ie=I(R());i();a();var go=I(R(),1),So=I(R(),1),Ko=e=>typeof e=="function",po=(e,t)=>Ko(e)?e(t):e,$o=(()=>{let e=0;return()=>(++e).toString()})();var zo=20,ft=new Map,jo=1e3,fo=e=>{if(ft.has(e))return;let t=setTimeout(()=>{ft.delete(e),gt({type:4,toastId:e})},jo);ft.set(e,t)},Zo=e=>{let t=ft.get(e);t&&clearTimeout(t)},Bt=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,zo)};case 1:return t.toast.id&&Zo(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:n}=t;return e.toasts.find(s=>s.id===n.id)?Bt(e,{type:1,toast:n}):Bt(e,{type:0,toast:n});case 3:let{toastId:o}=t;return o?fo(o):e.toasts.forEach(s=>{fo(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===o||o===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+r}))}}},Xo=[],Nt={toasts:[],pausedAt:void 0},gt=e=>{Nt=Bt(Nt,e),Xo.forEach(t=>{t(Nt)})};var Qo=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||$o()}),et=e=>(t,n)=>{let o=Qo(t,e,n);return gt({type:2,toast:o}),o.id},se=(e,t)=>et("blank")(e,t);se.error=et("error");se.success=et("success");se.loading=et("loading");se.custom=et("custom");se.dismiss=e=>{gt({type:3,toastId:e})};se.remove=e=>gt({type:4,toastId:e});se.promise=(e,t,n)=>{let o=se.loading(t.loading,{...n,...n?.loading});return e.then(r=>(se.success(po(t.success,r),{id:o,...n,...n?.success}),r)).catch(r=>{se.error(po(t.error,r),{id:o,...n,...n?.error})}),e};i();a();var bo=I(R()),yo=({networkID:e,transactionUnitAmount:t,onTransactionSpeedChange:n})=>{let{status:o,data:r}=at({networkID:e}),{transactionSpeed:s}=f(p=>p.sendFormValues),c=(0,bo.useMemo)(()=>{if(o!=="error"&&r&&s)return()=>n({transactionSpeed:s,transactionUnitAmount:t})},[n,s,t,r,o]);return{transactionSpeed:s,openTransactionSettings:c}};var Jo=({networkID:e,formattedRecipient:t,networkName:n,networkFee:o,networkFeeErrorMsg:r,networkFeeRow:s,displayFeeTooltip:c,transferFeePercent:p,solanaMetadata:l,ValueLoader:m,openTransactionSettings:u,onNetworkFeeDescriptionPress:w,onTransferFeePress:T})=>(0,ie.useMemo)(()=>[E.isSolanaNetworkID(e)&&l.label?{label:d.t("sendConfirmationLabel"),value:l.label}:void 0,E.isSolanaNetworkID(e)&&l.message?{label:d.t("sendConfirmationMessage"),value:l.message}:void 0,{label:d.t("transactionsTo"),value:t},{label:d.t("sendFungibleSummaryNetwork"),value:n},{label:d.t("sendFungibleSummaryNetworkFee"),value:o.length>0?o:r?null:m,color:r?ne.colors.legacy.accentAlert:ne.colors.legacy.textPrimary,leftSubtext:r||void 0,leftSubtextColor:ne.colors.legacy.accentAlert,rightSubtext:s?.rightSubtext,tooltipContent:c?d.t("networkFeesTooltipDescription",{chainName:n})||"":void 0,onClick:c?u:void 0,onPress:c?u:void 0,handleTooltip:c?w:void 0},p?{label:d.t("sendFungibleTransferFee"),value:`${p}%`,tooltipContent:d.t("sendFungibleTransferFeeToolTip")||"",handleTooltip:T}:void 0,l.memo?{label:d.t("sendMemo"),value:l.memo.replace(/(\r\n|\n|\r)/gm," ")}:void 0].filter(Ot),[c,o,r,s?.rightSubtext,e,n,w,T,u,t,l.label,l.memo,l.message,p,m]),er=({hasSufficientFunds:e,isTransactionUnitError:t,isTransactionCreationError:n,hasGasEstimationFailed:o,nativeTokenSymbol:r})=>t?d.t("transactionGasLimitError"):o?d.t("transactionGasEstimationError"):e==="insufficient"?d.t("transactionNotEnoughNative",{nativeTokenSymbol:r}):n?d.t("transactionCreationError"):"",tr=({onNext:e,onClose:t,ValueLoader:n,onTransactionSpeedChange:o,onNetworkFeeDescriptionPress:r,onTransferFeePress:s,onSubmissionCheckFail:c,copyToClipboard:p})=>{let l=Ge(),{senderAddress:m,networkID:u,symbol:w,formattedRecipient:T,uiAmount:U,key:M,type:B,transferFeePercent:O}=me(),S=f(),C=f(te=>te.sendFormValues),F=f(te=>te.setSendFormValues),{amountAsset:G,solana:W}=C,L=E.getNetworkName(u);Hn(m,"SEND_FUNGIBLE");let{data:P,isError:X}=Ke(S),{data:k,isError:v}=pn(P),x=(0,ie.useCallback)(({transactionSpeed:te,transactionUnitAmount:ue})=>{o({transactionSpeed:te,transactionUnitAmount:ue,sendFormValues:C,setSendFormValues:F,networkID:u})},[F,C,u,o]),{transactionSpeed:z,openTransactionSettings:_}=yo({networkID:u,transactionUnitAmount:k,onTransactionSpeedChange:x}),{data:y,isFetched:Y,isSuccess:D}=We({networkID:u,multichainTransaction:P,transactionSpeed:z,queryOptions:{refetchInterval:!1}}),{data:Se}=gn(u,y),N=bn(m),J=kn(B)?G:new Te(0),{hasSufficientFunds:j,isLoading:Z,nativeTokenSymbol:ae}=Un({networkID:u,addressType:m?.addressType,gasEstimation:y,transactionValue:J,recipient:C.recipient}),be=An({networkID:u,gasEstimation:y,gasEstimationPrice:Se}),de=Ln(y,d.t),{data:ee}=at({networkID:u}),Fe=(0,ie.useMemo)(()=>Me.get(u).supportsNetworkSettings&&Object.keys(ee??{}).length>1,[ee,u]);(0,ie.useEffect)(()=>{l.capture("sendAssetSummary",{data:{type:"fungible",symbol:w,networkId:u,chainId:E.getChainID(u)}})},[u,w,l]);let{data:ce=[]}=ve(),{sendAddressVariant:le}=Je({senderAddress:m?.address,senderAccounts:ce,networkID:u,recipient:C.recipient}),q=Y&&!D,ye=!!y&&!Z&&j!=="insufficient"&&!!be&&le!=="danger",je=er({hasSufficientFunds:j,isTransactionUnitError:v,isTransactionCreationError:X,hasGasEstimationFailed:q,nativeTokenSymbol:ae}),Ne=(0,ie.useCallback)(()=>P?N?(l.capture("showFungibleTxSubmissionFailureModal"),c(N),!1):(F({...C,multichainTransaction:P}),!0):!1,[P,N,F,C,l,c]),Be=Gt((0,ie.useCallback)(()=>{if(!Ne())return;let ue={chainID:u,amount:U.toString(),symbol:w,address:M};Ue.addBreadcrumb("fungibles","approved","info",ue),e()},[Ne,w,U,u,e,M]),1e3),Pe=Jo({networkID:u,formattedRecipient:T,networkName:L,networkFee:be,networkFeeErrorMsg:je,networkFeeRow:de,transferFeePercent:O,solanaMetadata:W,displayFeeTooltip:Fe,ValueLoader:n,openTransactionSettings:_,onNetworkFeeDescriptionPress:r,onTransferFeePress:s}),{data:ke}=an(),nt=(0,ie.useMemo)(()=>{let te=P&&dn(P)?P.transaction.map(ue=>{let b=Buffer.from(ue.serialize({verifySignatures:!1,requireAllSignatures:!1})).toString("base64");return{label:d.t("notificationCopyTransactionText"),value:b.slice(0,8),onClick:()=>{p(b),se.success(d.t("notificationTransactionCopied"))}}}):[];return[...Pe,...te]},[Pe,P,p]),Ze=(0,ie.useCallback)(()=>{t(),S.resetSendSlice()},[t,S]),xe=Xn(d.language,E.isSolanaNetworkID(u)),Ve=(0,ie.useMemo)(()=>({title:d.t("sendConfirmationPrimaryText"),send:d.t("commandSend"),cancel:d.t("commandCancel")}),[]);return{senderAddress:m?.address,networkID:u,handleNext:Be,handleClose:Ze,canSend:ye,txSubmissionCheckFailureModal:N,summaryRows:ke&&jt?nt:Pe,i18nStrings:Ve,networkHealth:xe}};i();a();var g=I(R()),ho=I(Eo());i();a();var Ao=_t(Ge,e=>new Pt(e)),Pt=class{#e;constructor(t){this.#e=t}onSendFlowStart({assetType:t,context:n}){this.#e.capture("sendFlowStart",{data:{assetType:t,context:n}})}onSendAssetAttempt(t){this.#e.capture("sendAssetAttempt",{data:{chainId:E.getChainID(t.networkId),...t}})}onSendAssetSuccess(t){this.#e.capture("sendAssetSuccess",{data:{chainId:E.getChainID(t.networkId),...t}})}onSendAssetFailure(t){this.#e.capture("sendAssetFailure",{data:{chainId:E.getChainID(t.networkId),...t}})}};i();a();i();a();var tt=I(R()),nr=[/Unknown instruction error/i,/Unknown error/i];function Dt({programId:e,customErrorCode:t,customErrorReason:n,errorReason:o}){let{t:r}=we(),s=Ge(),c=n||o,p=r(c);return(0,tt.useEffect)(()=>{s.capture("transactionErrorDetails",{data:{programId:e,customErrorCode:t,customErrorReason:n,errorReason:o,hasTranslatedErrorMessage:c!==p}})},[]),tt.default.createElement(Q,null,tt.default.createElement(H,{align:"center",color:"textSecondary"},p,t&&nr.some(l=>l.test(c))?` (${r("transactionsError")}: ${t})`:""))}var or=({sendSequenceAnalytics:e,onTransactionLinkPress:t,onClose:n,onCancel:o,onBack:r,mobileSignWithLedger:s,ledgerSupported:c})=>{let{data:[p]}=He(["kill-base-history"]),{senderAddress:l,networkID:m,symbol:u,formattedRecipient:w,uiAmount:T,logoUri:U,tokenPrice:M,key:B}=me(),{data:O,status:S}=en(),C=(0,g.useMemo)(()=>O?.addresses??[],[O]),F=Ao(),G=Rt(),W=f(),L=(0,g.useMemo)(()=>Tt(m),[m]),{transactionSpeed:P,recipient:X}=W.sendFormValues,k=Nn(m,P,l,u,U??"",w,T.toNumber(),M,d.t),[v,x]=(0,g.useState)(!1),[z,_]=(0,g.useState)(null),[y,Y]=(0,g.useState)(null),{addRecentAddress:D}=Ie(),Se=O?.type==="ledger",[N,J]=(0,g.useState)(void 0),j=Sn("send:fungible",m,!!s);vn(B,T,N?N.id:"");let Z=Mn(C),ae=(0,g.useCallback)($=>{j($.id,"confirmed"),F.onSendAssetSuccess({...G,txId:$.id}),Z()},[F,j,Z,G]),{isSuccess:be,isError:de,error:ee}=Tn(ae,N??void 0),Fe=!!N,ce=lt.get(m).sendSuccessCondition,le=(0,g.useMemo)(()=>{switch(ce){case"SUBMISSION":return v?"ERROR":Fe?"SUCCESS":"LOADING";case"CONFIRMATION":return v||de?"ERROR":be?"SUCCESS":"LOADING"}},[de,be,v,Fe,ce]),{isError:q,isSuccess:ye}=(0,g.useMemo)(()=>({isError:le==="ERROR",isSuccess:le==="SUCCESS"}),[le]),je=(0,g.useMemo)(()=>{let $=Me.get(m).transactionSpeedDescription(P??"standard");return $?d.t($):""},[m,P]),Ne=ce==="CONFIRMATION"?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",Be=(0,g.useMemo)(()=>{switch(le){case"LOADING":return d.t("sendStatusLoadingTitle");case"ERROR":return d.t("sendStatusErrorTitle");case"SUCCESS":return d.t(Ne)}},[le,Ne]),Pe=(0,g.useMemo)(()=>({titleText:Be,retryText:d.t("commandRetry"),cancelText:d.t("commandCancel"),closeText:d.t("commandClose"),viewTransactionText:d.t("sendStatusViewTransaction")}),[Be]);(0,g.useEffect)(()=>{be?(Ue.addBreadcrumb("fungibles","transactionStatus","info",{...L,status:"confirmed"}),N?.id&&e&&e.transactionStatus(N.id,{...L,status:{type:"confirmed"}})):q&&(Ue.addBreadcrumb("fungibles","transactionStatus","error",{...L,status:"error"}),N?.id&&e&&e.transactionStatus(N.id,{...L,status:{type:"error"}}))},[be,q,N,L,e]);let{mutateAsync:ke}=Fn(),Ze=q?g.default.createElement(g.default.Fragment,null,($=>{switch($){case"InsufficientFunds":return g.default.createElement(H,{color:"textSecondary",align:"center"},d.t("sendStatusErrorMessageInsufficientBalance"));case"UnknownError":default:return g.default.createElement(g.default.Fragment,null,g.default.createElement(H,{font:"bodySemibold",color:"textSecondary",align:"center"},g.default.createElement(it,{i18nKey:"sendFungibleErrorMessageInterpolated",values:{uiAmount:T.toString(),assetSymbol:u,uiRecipient:w},components:{2:g.default.createElement(H,{font:"bodySemibold",color:"textPrimary"})}})),z?g.default.createElement(Q,{marginTop:16,justifyContent:"center"},g.default.createElement(H,{font:"body",color:"textSecondary"},d.t("sendFungibleSolanaErrorCode",{code:z}))):null)}})(y??"InsufficientFunds"),ee&&"data"in ee?g.default.createElement(Q,{marginY:16,justifyContent:"center",color:"textSecondary"},g.default.createElement(Dt,{errorReason:ee.data.errorReason,programId:ee.data.programId,customErrorReason:ee.data.customErrorReason,customErrorCode:ee.data.customErrorCode})):null):ye&&ce==="CONFIRMATION"?g.default.createElement(H,{font:"bodySemibold",color:"textSecondary",align:"center"},g.default.createElement(it,{i18nKey:"sendFungibleConfirmedSuccessMessageInterpolated",values:{uiAmount:T.toString(),assetSymbol:u,uiRecipient:w},components:{2:g.default.createElement(H,{font:"bodySemibold",color:"textPrimary"})}})):ye&&ce==="SUBMISSION"?g.default.createElement(H,{font:"bodySemibold",align:"center"},d.t("sendStatusEstimatedTransactionTime",{time:je})):g.default.createElement(H,{font:"bodySemibold",color:"textSecondary",align:"center"},g.default.createElement(it,{i18nKey:"sendFungibleLoadingMessageInterpolated",values:{uiAmount:T.toString(),assetSymbol:u,uiRecipient:w},components:{2:g.default.createElement(H,{font:"bodySemibold",color:"textPrimary"})}})),xe=W.sendFormValues.multichainTransaction,{data:Ve}=We({networkID:m,multichainTransaction:xe,transactionSpeed:P,queryOptions:{refetchInterval:!1}}),te=Ve,ue=(0,g.useCallback)(async()=>{try{if(!xe)throw new Error("multichainTransaction is undefined on send status");if(!te)throw new Error("gasEstimation is undefined on send status");D({address:X,chainID:m,timestamp:Date.now()});let $=Date.now();F.onSendAssetAttempt(G);let fe=await ke({multichainTransaction:xe,pendingTransactionInput:k,senderAddress:l,gasEstimation:te}),Oe=fe.id;j(Oe,"initiated",$),j(Oe,"received");let Ae=Tt(m),he;Ae.chainType==="solana"&&e?(he="signAndSendTransaction",e.submittedTransaction(fe.id,{...Ae,method:he})):Ae.chainType==="eip155"&&e?(he="eth_sendRawTransaction",e.submittedTransaction(fe.id,{...Ae,method:he})):Ae.chainType==="sui"&&e?(he="signAndExecuteTransaction",e.submittedTransaction(fe.id,{...Ae,method:he})):Ae.chainName==="bitcoin"&&e&&(he="sendrawtransaction",e.submittedTransaction(fe.id,{...Ae,method:he})),Ue.addBreadcrumb("fungibles","submittedTransaction","info",{...Ae,txReceipt:fe.id,method:he??"UNKNOWN"}),J(fe)}catch($){let fe=Bn($,L.chainType==="solana"?"solana":void 0);if(Y(fe),fe==="UnknownError"&&$ instanceof Error&&L.chainType==="solana"){let[Oe]=$.message.match(/0x\d+/)||[];typeof Oe=="string"&&Oe&&_(Oe)}x(!0),F.onSendAssetFailure(G),Ue.captureError($,"fungibles")}},[xe,X,te,D,L,ke,k,j,m,F,e,l,G,x]),b=f($=>$.retryArgs),K=(0,g.useCallback)(()=>{b?(J(void 0),x(!1),ue()):r()},[ue,r,b]),{data:pe}=sn(N),bt=(0,g.useCallback)(()=>{pe&&t(pe)},[t,pe]),yt=(0,g.useCallback)(()=>{o()},[o]),Vt=(0,g.useCallback)(()=>{let{sendSuccessRedirect:$}=Me.get(m);n($(p))},[n,p,m]),wo=rn(m),vo=S==="pending",Io=(0,g.useCallback)(()=>{c&&!ye&&!q&&W.resetSendSlice()},[ye,q,W,c]);return(0,ho.default)(Io),{handleClose:Vt,handleCancel:yt,handleRetry:K,handleTransactionLinkPress:bt,isSuccess:ye,isError:q,MessageElement:Ze,title:Be,txReceipt:N,handleTokenTransfer:ue,i18nStrings:Pe,isLoadingSelectedAccountStatus:vo,isLedger:Se,ledgerApp:wo}};i();a();var A=I(R());i();a();var ge=I(R());var rr=oe(qn)`
  width: 100%;
  border-style: none;
  padding: 0;
`,To=oe(Kn).attrs({width:"28px",borderRadius:"50px",theme:"primary"})`
  height: 28px;
`,Fo=ge.default.memo(({isExpanded:e,addressBookRecipient:t,clearRecipient:n})=>{let{t:o}=we(),[r,s]=(0,ge.useState)(!1),c={onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},p=r&&!t&&!e;return ge.default.createElement(Zn,{color:ne.colors.legacy.bgWallet,label:o("sendAddressBookButtonLabel"),ariaLabel:o("sendAddressBookButtonLabel"),alignment:"bottomRight",isVisible:p,triggerParams:c},t?ge.default.createElement(To,{paddingY:9,onClick:n},ge.default.createElement(Gn,{fill:ne.colors.legacy.bgWallet,width:10})):ge.default.createElement(rr,null,ge.default.createElement(To,{paddingY:6},ge.default.createElement(Wn,{fill:ne.colors.legacy.bgWallet}))))});i();a();var Ut=I(R());var ko=Ut.default.memo(({symbol:e,chainName:t,recipient:n,recipientError:o,handleRecipientChange:r,onBlur:s})=>{let{t:c}=we();return Ut.default.createElement($n,{type:"text",name:"recipient",value:n,autoComplete:"off",spellCheck:"false",placeholder:c("sendRecipientTextAreaPlaceholder2",{symbol:t||e}),warning:!!o,onChange:r,onBlur:s,paddingRight:"80px"})});var xo=oe(Ye).attrs({size:16,weight:500,color:ne.colors.legacy.textSecondary})`
  font-style: italic;
`,sr=oe(Yn)`
  width: 100%;
  position: relative;
`,ir=oe(kt).attrs({align:"center"})`
  position: relative;
  border-radius: 6px;
  border: 1px solid ${ne.colors.legacy.borderSecondary};
  padding: 14px;
  background: ${ne.colors.legacy.bgArea};
  height: 50px;
  margin-bottom: 2px;
`,ar=oe(Jn)`
  z-index: 2;
  width: 100%;
`,Mt=oe(to)`
  padding: 8px 12px;
  min-height: 41px;
`,dr=oe(kt).attrs({justify:"center"})`
  height: 85px;
`,Co=oe(Ye).attrs({size:16,color:ne.colors.legacy.textSecondary})``,cr=oe.div`
  position: absolute;
  right: 12px;
  top: calc(50% - 28px / 2);
  width: auto;
  display: flex;
  gap: 12px;
  align-items: center;
`,lr="__none",mr=50,St=10,ur=e=>{let{addressBookRecipient:t,networkID:n,senderAddress:o,symbol:r,sendFormValues:s,sendFormErrors:c,recipientError:p,handleAddressSelection:l,setSendFormValues:m,setSendFormErrors:u,isLoading:w}=e,{t:T}=we(),U=(0,A.useMemo)(()=>({sendAddressBookRecentlyUsed:T("sendAddressBookRecentlyUsed"),sendAddressBookNoAddressesSaved:T("sendAddressBookNoAddressesSaved")}),[T]),{data:M=[]}=ve(),B=(0,A.useMemo)(()=>o?M.reduce((v,x)=>{let z=x.addresses.filter(_=>_.networkID===n&&_.address!==o);if(n)for(let _ of z)v.push({label:x.name,address:_.address,chainID:n});return v},[]):[],[o,M,n]),{recentAddresses:O,savedAddresses:S}=Ie(),C=(0,A.useMemo)(()=>S.addresses.reduce((v,x)=>(n&&Ft(E.getAddressTypes(x.chainID),E.getAddressTypes(n))&&v.push({...x}),v),[]),[S,n]),F=(0,A.useMemo)(()=>O.addresses.reduce((v,x)=>(n&&Ft(E.getAddressTypes(x.chainID),E.getAddressTypes(n))&&v.push(x.address),v),[]),[O,n]),G=B.length===0&&C.length===0&&F.length===0,W=(0,A.useMemo)(()=>{for(let{address:v,label:x}of B)if(v===t)return x;for(let{address:v,label:x}of C)if(v===t)return x},[t,B,C]),{recipient:L}=s,P=(0,A.useCallback)(v=>{let x=v.currentTarget,z=self.getComputedStyle(x),_=parseInt(z.getPropertyValue("border-top-width"),St)+parseInt(z.getPropertyValue("padding-top"),St)+x.scrollHeight+parseInt(z.getPropertyValue("padding-bottom"),St)+parseInt(z.getPropertyValue("border-bottom-width"),St);_=x.value?Math.min(68,_-28):mr,x.style.height=`${_}px`,m({...s,recipient:x.value}),u({...c,recipientError:void 0})},[s,c,u,m]),X=(0,A.useCallback)(()=>{m({...s,recipient:"",addressBookRecipient:void 0})},[s,m]),k=(0,A.useMemo)(()=>{if(n)return E.getNetworkName(n)},[n]);return{i18nStrings:U,recipient:L,addressBookRecipient:t,addresses:B,savedAddresses:C,recentAddresses:F,isEmpty:G,selectedName:W,recipientError:p,symbol:r,chainName:k,handleAddressSelection:l,handleRecipientChange:P,clearRecipient:X,isLoading:w}},kc=A.default.memo(e=>{let t=ur(e);return A.default.createElement(pr,{...t})}),pr=A.default.memo(e=>{let{i18nStrings:t,recipient:n,addressBookRecipient:o,addresses:r,savedAddresses:s,recentAddresses:c,isEmpty:p,selectedName:l,recipientError:m,symbol:u,chainName:w,handleAddressSelection:T,handleRecipientChange:U,clearRecipient:M,isLoading:B=!1}=e;return A.default.createElement(sr,{onChange:T,value:o??lr},({isExpanded:O})=>A.default.createElement(A.default.Fragment,null,o?A.default.createElement(ir,null,l?A.default.createElement(Ye,{size:16,weight:500},l):A.default.createElement(xo,null,t.sendAddressBookRecentlyUsed),A.default.createElement(Ye,{opacity:.5,size:16,weight:400,margin:"0 0 0 6px"},"(",o.includes(".")?o:Ce(o,4),")")):A.default.createElement(ko,{symbol:u??"",chainName:w,recipient:n,recipientError:m,handleRecipientChange:U}),A.default.createElement(cr,null,B?A.default.createElement(_n,{diameter:20}):null,A.default.createElement(Fo,{isExpanded:O,addressBookRecipient:o,clearRecipient:M})),A.default.createElement(ar,{portal:!1},A.default.createElement(eo,{maxHeight:"150px"},r.map(({address:S,label:C,chainID:F},G)=>A.default.createElement(Mt,{key:`${S}-${G}`,value:S},A.default.createElement(xt,{name:C,publicKey:S,publicKeyLabel:qt(F,S)}))),s.map(({address:S,label:C},F)=>A.default.createElement(Mt,{key:`${S}-${F}`,value:S},A.default.createElement(xt,{name:C,publicKey:S}))),c.map((S,C)=>A.default.createElement(Mt,{key:`${S}-${C}`,value:S},A.default.createElement(xo,null,t.sendAddressBookRecentlyUsed),A.default.createElement(Co,{opacity:.5},Ce(S,4)))),p&&A.default.createElement(dr,null,A.default.createElement(Co,null,t.sendAddressBookNoAddressesSaved))))))});i();a();var ze=I(R());var fr=()=>{let{uiAmount:e,symbol:t,formattedCurrencyAmount:n}=me(),o=$e(e);return ze.default.createElement(Q,{direction:"column",alignItems:"center",marginTop:8,marginBottom:32},ze.default.createElement(Q,{marginBottom:16},ze.default.createElement(st,{icon:"Send2",size:64,color:"accentPrimary",backgroundColor:"bgTabBar",shape:"circle"})),ze.default.createElement(H,{font:"heading1Semibold",align:"center"},o," ",t),n?ze.default.createElement(H,{color:"textSecondary",font:"title2",align:"center"},n):null)};i();a();var Lt=I(R());var gr=({networkId:e,senderAddress:t})=>{let{data:n=[]}=ve(),{recipient:o}=ut(),{sendAddressWarning:r,sendAddressVariant:s}=Je({senderAddress:t,senderAccounts:n,networkID:e,recipient:o});return r?Lt.default.createElement(Q,{marginBottom:12},Lt.default.createElement(nn,{level:s==="danger"?"1-critical-alert":"2-alert"},r)):null};i();a();i();a();var yr=I(R());i();a();var Sr=I(R());i();a();var Ar=I(R());i();a();export{Er as a,me as b,Je as c,tr as d,Ho as e,Go as f,Dt as g,or as h,kc as i,fr as j,gr as k};
//# sourceMappingURL=chunk-IAMXTER6.js.map
