import{g as H}from"./chunk-6R5SHFYO.js";import{b as S}from"./chunk-RP4HT6XN.js";import{a as A}from"./chunk-JJOKJNIW.js";import{Zb as G,a as N,d as U}from"./chunk-OERJXOXU.js";import{a as h,b as v}from"./chunk-UCBZOSRF.js";import{a as Y,g as z}from"./chunk-BR4JE5OD.js";import{a as m,c as g}from"./chunk-BRFTXGI6.js";import{a as y}from"./chunk-HYOCMEEG.js";import{P as K,aa as B,n as $}from"./chunk-7X5IGQSF.js";import{Lc as W,Vb as P,Zd as V,gc as b,hc as C,ie as q}from"./chunk-M4V43KDP.js";import{A as x,B as I,C as M,G as F}from"./chunk-46FGAK6J.js";import{d as O}from"./chunk-HG4P4WCJ.js";import{r as E,u as D}from"./chunk-Q24656HF.js";import{x as _}from"./chunk-VU23O6LP.js";import{V as T,a as ne}from"./chunk-O2FNG2JZ.js";import{f as c,h as s,n}from"./chunk-3KENBVE7.js";s();n();var Q=c(y());s();n();var w=c(y());var ae=async()=>{let r=A("serviceWorkerMutexAcquire",void 0),e=v(await w.default.runtime.sendMessage(h(r)));if("error"in e)throw new Error(e.error.message);return()=>{let t=A("serviceWorkerMutexRelease",void 0);w.default.runtime.sendMessage(h(t))}},J=async r=>{let e=await ae();try{return await r()}finally{e()}};s();n();var X=c(y()),j=async(r,e,t)=>{let o=await X.default.identity.launchWebAuthFlow({interactive:t,url:e});if(!M(r,o))return I(r,o);throw new Error("Error fetching auth code")};var L=H(),ie={getClientID:F,redirectURL:Q.default.identity.getRedirectURL(),fetchAuthorizationCode:(r,e,t)=>j(r,e,t)},ce={storage:new m,signer:{sign:(r,e)=>b(L,r,e),getAuthenticationPublicKey:r=>L.getAuthenticationPublicKey(r),getAllSecretIdentifiers:()=>C(L)},authConfig:ie,queryClient:G,runExclusive:J,isLocalTokenValidityCheckEnabled:()=>!E.isFeatureEnabled("kill-frontend-local-check"),isServerTimeEnabled:()=>!E.isFeatureEnabled("kill-frontend-server-time")},me=x(ce);me.subscribe("userID",r=>{g.addUserProperties({authUserId:r})});s();n();var i=c(ne());s();n();var p=class{async get(e){let t=null;try{if(t=self.localStorage.getItem(e),typeof t!="string")return null;try{return JSON.parse(t)}catch{return console.warn(`[DeprecatedLocalStorage.get] Error parsing JSON for key "${e}"`),t}}catch(o){let a=`[DeprecatedLocalStorage.get] Error getting key (${e}): ${o}`;throw new Error(a)}}async getAll(e){try{let t={};e=e||Object.keys(self.localStorage);for(let o of e)t[o]=await this.get(o);return t}catch(t){let o=`[DeprecatedLocalStorage.getAll] Error getting key(s) (${e}): ${t}`;throw new Error(o)}}async remove(e){let t=`[DeprecatedLocalStorage.remove] Error removing key(s) (${e}): Method not implemented`;throw new Error(t)}async set(e,t){let o=`[DeprecatedLocalStorage.set] Error setting key (${e}): Method not implemented`;throw new Error(o)}async setAll(e){let o=`[DeprecatedLocalStorage.setAll] Error setting key (${Object.keys(e)}): Method not implemented`;throw new Error(o)}subscribe(e){return console.warn("[DeprecatedLocalStorage.subscribe] Method not implemented"),()=>{}}async update(e){let t=`[DeprecatedLocalStorage.update] Error updating key(s) (${e}): Method not implemented`;throw new Error(t)}};var ge=new m,le=new p,pe=[...P,...N,U,W,"i18nextLng"],rt=()=>{let{data:r,isFetching:e}=V(),{data:t,isFetching:o}=B(),{data:a,isFetching:Z}=D([{key:"Local Storage",storage:ge},{key:"Deprecated Local Storage",storage:le}],pe),{data:R}=K(),k=q(),u=(0,i.useCallback)(async()=>{let{version:d}=chrome.runtime.getManifest(),f=await g.getDeviceId(),se=await k();return{"App Version":d,"Platform Information":Y,"Display Language":$(O.language),"Phantom Auth":se,"Device Id":f,"Auto Lock Timer(ms)":R,...r,...t,...a}},[r,t,a,k,R]),ee=e||o||Z,te=(0,i.useCallback)(async d=>{d?.preventDefault();let f=await u();await _.downloadLog(f)},[u]),re=(0,i.useCallback)(()=>{S({url:z})},[]),oe=(0,i.useCallback)(()=>{S({url:T})},[]);return{appState:u,isFetching:ee,goCreateTicket:re,goSupportDesk:oe,downloadLogs:te}};export{me as a,rt as b};
//# sourceMappingURL=chunk-GSCCCNRG.js.map
