import{N as w,O as h}from"./chunk-TMK4CY5E.js";import{Za as c,pc as E}from"./chunk-M4V43KDP.js";import{i as u,l as m}from"./chunk-46FGAK6J.js";import{r as A,w as f}from"./chunk-VU23O6LP.js";import{u as p}from"./chunk-YTFWYDJ6.js";import{a as N}from"./chunk-O2FNG2JZ.js";import{f as F,h as t,n as r}from"./chunk-3KENBVE7.js";t();r();var O=F(N());t();r();t();r();var I="@phantom/wallet-screening",d=`${I}:wallet-screen-action`,L=`${I}:wallet-screen-geo`,y={walletScreenAction(e){return[d,e]},walletGeo(){return[L]}};t();r();var R=new Error("Failed to fetch wallet screen action.");async function W(e){try{let n=await u.api().post("/wallet_screen/v1",e);if(!m(n))throw R;let o=n.data;return w.parse(o)}catch{throw R}}var C=p({days:7}),T=e=>{let n=e!==void 0&&c.isMainnetNetworkID(e.networkID),o=[];if(e!==void 0){let _=c.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;o=[{chainId:e.networkID,address:_,resourceType:"address"}]}let s={addresses:o},S=A(),l=y.walletScreenAction(s),i=[l[0]];return f({enabled:n,queryKey:l,gcTime:C,staleTime:C,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(q(S,i))return"FAIL_SEVERE";let Q=await W(s);return K(Q)}})},q=(e,n)=>{let o=e.getQueriesData({queryKey:n,exact:!1}),s=!1;for(let[S,l]of o){let i=l;if(i&&i==="FAIL_SEVERE"){s=!0;break}}return s},K=e=>{let n=e.addressScreenResults;return n.some(o=>o.action==="FAIL_SEVERE")?"FAIL_SEVERE":n.some(o=>o.action==="FAIL_HIGH")?"FAIL_HIGH":n.some(o=>o.action==="NO_ACTION")?"NO_ACTION":"DATA_NOT_FOUND"};var k=(e,n)=>{let o=E(),{data:s}=T(e);switch((0,O.useEffect)(()=>{s&&e&&o.capture("walletScreened",{data:{walletScreen:{action:s.toString(),surface:n},chainId:c.getChainID(e.networkID),networkId:e.networkID}})},[s,e,n,o]),s){case"FAIL_SEVERE":case"FAIL_HIGH":throw new h(`Transaction disabled: ${n}`);case"NO_ACTION":case"DATA_NOT_FOUND":return}};t();r();t();r();t();r();var pe=new Error("Failed to fetch wallet geo.");var we=p({hours:1});t();r();export{d as a,k as b};
//# sourceMappingURL=chunk-XEI5RGHZ.js.map
