import{D as Va,j as Ca}from"./chunk-TMK4CY5E.js";import{$a as yo,$b as at,A as Zs,Aa as Ur,Ab as ga,Ad as Nn,B as co,Ba as st,Bd as Da,Ca as ta,Da as ra,Db as sr,Dc as To,Ed as Na,F as ea,G as uo,Ib as ba,Jc as xo,Ka as oa,Kb as bo,Kc as Mr,Lb as ho,Lc as Pa,Mb as ha,Nb as Sa,Oc as ka,Qa as na,Sa as ir,Ta as fo,Tb as So,Ua as ia,Ub as kn,Va as sa,Wb as Co,Xb as ve,Xc as Oa,Yb as Rt,Zc as ar,_b as wa,ac as On,bc as kr,da as er,ea as Z,ec as Mn,fa as po,fc as Ta,fd as Ma,ga as Ir,gb as pd,gc as Or,gd as Ra,ha as I,hb as aa,ia as Pn,ib as la,id as Ba,ja as tr,jc as Rn,ka as rr,kb as Pr,kc as wo,l as Er,la as P,lc as xa,ma as F,mb as ca,mc as Aa,na as wt,nb as ua,nc as va,nd as Bn,oa as Y,od as Dn,p as Ks,pa as w,pb as da,qa as pe,r as Ws,ra as or,rb as pa,rc as Ea,s as Qs,sa as k,sc as Ia,ta as mo,u as so,ua as ce,v as Xs,va as it,vb as go,w as Ys,wa as q,wb as ma,wc as Ua,x as ao,xa as G,xb as fa,y as lo,yb as ya,z as Js,za as nr}from"./chunk-U6X5ZLHM.js";import{U as qs,a as xr,c as Ar,j as vr,x as zs}from"./chunk-7X5IGQSF.js";import{$a as ot,H as Ms,Ic as dd,K as Ve,L as U,La as Bs,Na as oo,Qd as Gs,Rd as Re,Ua as Ds,Wa as no,Xa as Ns,Za as B,_a as Vs,c as cd,fd as $s,ib as nt,md as Ae,ob as _s,oe as io,pc as oe,r as ud,se as Je,tb as Zt,ub as Ls,y as Un,yb as Fs,zb as js}from"./chunk-M4V43KDP.js";import{p as St}from"./chunk-7LN3AER5.js";import{i as ye,l as Rs,m as Ct}from"./chunk-46FGAK6J.js";import{H as Hs,d as Pe,x as _}from"./chunk-HG4P4WCJ.js";import{B as z}from"./chunk-Q24656HF.js";import{r as H,t as se,w as Q,z as $}from"./chunk-VU23O6LP.js";import{R as ks,V as re,W as fe,X as En,aa as Jt,c as As,ca as In,ea as to,h as vs,ha as Os,i as Zr,l as Es,o as eo,p as Is,u as te,x as Us,z as Ps}from"./chunk-YTFWYDJ6.js";import{N as ro,a as E,i as g}from"./chunk-O2FNG2JZ.js";import{f as x,h as s,l as ld,m as Buffer,n as a}from"./chunk-3KENBVE7.js";s();a();s();a();s();a();s();a();var Wg="userExplorerPreferenceV2";s();a();s();a();var lb="isAnalyticsOptedOut";s();a();s();a();s();a();s();a();var _a=t=>{let{accountIdentifier:e,autoConfirmEnabled:r=!1,trustedAppsByAccount:o}=t;if(!e||!o)return;let n=Object.values(o),i=[],l=[];r?(n.forEach(d=>{d.autoConfirm&&zs(d.autoConfirm)?i.push(d):l.push(d)}),i.sort((d,p)=>(p.autoConfirm?.sessionStartTime??0)-(d.autoConfirm?.sessionStartTime??0))):l=n;let c=Us(l.map(d=>{let p=d.lastConnectedTimestamp??0;return{timestamp:p,data:{...d,lastConnectedTimestamp:p}}}));return{autoConfirmEnabledApps:i,timeBucketedApps:c}};s();a();var La=(t,e)=>{if(!e||t.autoConfirm?.sessionStartTime===void 0||t.autoConfirm?.maxSessionDuration===void 0)return;let r=new Date(t.autoConfirm?.sessionStartTime+t.autoConfirm?.maxSessionDuration*1e3);return Ps(r).format("h:mm A")};s();a();var Sd=g.object({data:g.string(),from:g.string(),to:g.string()}),Cd=g.object({transaction:Sd});async function wd({caip19:t,amount:e,owner:r}){let o=await ye.api().post("/tokens/v1/unwrap",{owner:r,caip19:t,amount:e.toNumber()}),n=Cd.safeParse(o.data);if(!n.success){let{error:i}=n;throw $.captureError(i,"fungibles"),new Co(`Failed to get unwrap transaction: ${i.message}`)}return n.data.transaction}var Td=({caip19:t,amount:e,owner:r})=>Q({gcTime:ha.Medium,staleTime:1/0,enabled:r!==""&&e.isGreaterThan(0),queryKey:ve.unwrapTransaction({caip19:t,amount:e,owner:r}),async queryFn(){return await wd({caip19:t,amount:e,owner:r})}});s();a();function xd(){let t=$s(),e=oe(),r=H();return se({async mutationFn({accountId:o,mutations:n}){await wa(t,e,{accountId:o,mutations:n})},async onSuccess(o,n){await Promise.all([r.invalidateQueries({queryKey:ve.hiddenMints(n.accountId)}),r.invalidateQueries({queryKey:Ca.visibilityOverrides({accountId:n.accountId})})])}})}s();a();var zn=x(dd());s();a();s();a();var ge=[];for(let t=0;t<256;++t)ge.push((t+256).toString(16).slice(1));function Fa(t,e=0){return(ge[t[e+0]]+ge[t[e+1]]+ge[t[e+2]]+ge[t[e+3]]+"-"+ge[t[e+4]]+ge[t[e+5]]+"-"+ge[t[e+6]]+ge[t[e+7]]+"-"+ge[t[e+8]]+ge[t[e+9]]+"-"+ge[t[e+10]]+ge[t[e+11]]+ge[t[e+12]]+ge[t[e+13]]+ge[t[e+14]]+ge[t[e+15]]).toLowerCase()}s();a();var Fn,Ad=new Uint8Array(16);function jn(){if(!Fn){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Fn=self.crypto.getRandomValues.bind(self.crypto)}return Fn(Ad)}s();a();s();a();var vd=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),$n={randomUUID:vd};function Ed(t,e,r){if($n.randomUUID&&!e&&!t)return $n.randomUUID();t=t||{};let o=t.random??t.rng?.()??jn();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let n=0;n<16;++n)e[r+n]=o[n];return e}return Fa(o)}var Gn=Ed;s();a();var Eo={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new re(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},ja=class extends Error{constructor(e){super(e),this.name="SendFungibleFlowError"}};var $a={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:Eo,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},Hn=Je((t,e)=>({...(0,zn.default)($a),resetSendSlice:()=>{let r=(0,zn.default)($a);r.sendSessionId=Gn(),t(r)},setAnalyticsRecipient:r=>{t({analyticsRecipient:r})},setSendFungibleKey:(r,o,n)=>{t({fungibleKey:r,splTokenAccount:o,encodedCaip19:n})},setSendFormValues:r=>{t({sendFormValues:r})},setInputAmount:r=>{let o=e();t({sendFormValues:{...o.sendFormValues,inputAmount:r}})},setShouldShowFiatValues:r=>{t({shouldShowFiatValues:r})},setRetryArgs:r=>{t({retryArgs:r})},setGasEstimation:r=>{t({gasEstimation:r})}}));s();a();var Ga={collectible:void 0,sendFormValues:Eo,shouldRequireAmount:!1},qn=Je(t=>({...Ga,resetSendSlice:()=>{t({...Ga})},setSendCollectible:e=>{t({collectible:e})},setSendFormValues:e=>{t({sendFormValues:e})},setShouldRequireAmount:e=>{t({shouldRequireAmount:e})}}));s();a();s();a();var Id={query:""},Ud=Je(t=>({...Id,setQuery:e=>{t({query:e})}}));s();a();s();a();s();a();var Io=x(cd(),1),Ha=x(ud(),1);var za=(0,Io.struct)([(0,Io.u8)("instruction")]);function qa(t,e,r,o=[],n=Pr){let i=pa([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],r,o),l=Buffer.alloc(za.span);return za.encode({instruction:da.CloseAccount},l),new Ha.TransactionInstruction({keys:i,programId:n,data:l})}var Wa=x(E());s();a();function Ka(t,e,r){return U.PublicKey.findProgramAddressSync([t.toBuffer(),r.toBuffer(),e.toBuffer()],ca)[0]}var Pd=new Co("Unable to unwrap SOL. Wrapped SOL Token account does not exist.");function kd(){let{connection:t}=To(),{data:e}=Re(),{solanaChainAddress:r,accountIdentifier:o}=(0,Wa.useMemo)(()=>({solanaChainAddress:e?.addresses.find(nt),accountIdentifier:e?.identifier??""}),[e]),n=z(),i=Ae(),{t:l}=_();return se({mutationFn:async()=>{if(!r)return Promise.reject("solanaChainAddress not loaded");let{networkID:c,address:d}=r,p=new U.PublicKey(d),m=Ka(p,ua,Pr);if(!await t.getAccountInfo(m))throw Pd;let b=qa(m,p,p,[],Pr),h=new Ve.Transaction().add(b),S={ownerAddress:d,networkID:c,data:{signature:""},type:"unwrapSOL",display:{summary:{topLeft:{text:l("assetDetailUnwrappingSOL")}}}},C=await sr({accountIdentifier:o,accountSigner:i,connection:t,feePayer:new U.PublicKey(d),pendingTransactionInput:S,storage:n,transaction:h,useSubmissionService:!1});return{networkID:c,id:C}}})}s();a();var Qa=x(E());var Od=()=>{let{connection:t}=To(),{data:e}=Re(),{solanaChainAddress:r,accountIdentifier:o}=(0,Qa.useMemo)(()=>({solanaChainAddress:e?.addresses.find(nt),accountIdentifier:e?.identifier??""}),[e]),n=z(),i=Ae(),{t:l}=_();return se({mutationFn:async c=>{if(!r)throw new Error("solanaChainAddress not loaded");if(c.type!=="CompressedSPL")throw new Error("SPL is not compressed");let d=await ba({owner:c.data.walletAddress,mint:c.data.mintAddress,amount:c.data.amount,programId:c.data.programId,connection:t}),{networkID:p,address:m}=r,y={ownerAddress:m,networkID:p,data:{signature:""},type:"decompress",display:{summary:{topLeft:{text:l("assetDetailClaiming")}}}};await sr({accountIdentifier:o,accountSigner:i,connection:t,feePayer:new U.PublicKey(m),pendingTransactionInput:y,storage:n,transaction:d,useSubmissionService:!1})}})};s();a();var Xn=x(E());s();a();var Wn=new re(0),Qn=({chainAddress:t,type:e,balance:r,decimals:o,recipient:n,gasEstimation:i,clampToZero:l=!0})=>{let{data:c,isPending:d}=Mr(t);if(!e||!r)return Wn;let p=new re(r).multipliedBy(Jt(o));if(!ar(e))return p;if(!i)return;let m=new re(0);if(lo(i))m=p.minus(new re(i.value));else if(Zs(i)){let{gasLimit:y,maxFeePerGas:b,l1Fee:h=new re(0)}=i,S=y.times(b).plus(h);m=p.minus(S)}else if(co(i)){if(!t||d)return;let y=t.addressType,b=c?.safeToSendUtxos??[],h=ao(i.btcPerKilobyte),S=n&&Ds.safeParse(n).success?n:"bc1p",A=[{value:b.reduce((V,v)=>V.plus(new re(v.value)),new re(0)).toNumber(),address:S}],O=ir(y,b,A,h.toNumber(),[]);if(O.type==="error")m=new re(O.maxAmount).integerValue(re.ROUND_DOWN);else{let{inputs:V,fee:v}=O;m=V.reduce((J,Ye)=>J.plus(new re(Ye.value)),new re(0)).minus(v).integerValue(re.ROUND_DOWN)}}else if(Js(i))m=p.minus(i.gasBudget);else return Zr(i);return m.isGreaterThan(Wn)?m:l?Wn:m};var Md=({networkID:t,addressType:e,gasEstimation:r,transactionValue:o=new re(0),recipient:n})=>{let{data:i,isLoading:l,isError:c}=Va({networkID:t,addressType:e}),d=Oa.get(t).nativeFungibleTokenType,p="unknown",m="",y=(0,Xn.useMemo)(()=>{let h=i?.queriedWalletBalances[0]?.address;if(!h)return;let S=Zt(t,h);return{networkID:t,address:h,addressType:S}},[i?.queriedWalletBalances,t]),b=Qn({chainAddress:y,type:d,balance:i?.totalQuantityString?new re(i?.totalQuantityString):void 0,decimals:i?.decimals??0,recipient:n,gasEstimation:r,clampToZero:!1});return!c&&i&&b&&(b.gte(o)?p="sufficient":p="insufficient",m=i?.symbol||""),(0,Xn.useMemo)(()=>({hasSufficientFunds:p,nativeTokenSymbol:m,isLoading:l,isError:c}),[p,m,l,c])};s();a();var el=x(E());s();a();var Yn=x(E());s();a();var Xa=({chainAddresses:t=[]})=>{let e=ve.tokensErrorCount(t);return Q({queryKey:e,initialData:0})};s();a();var Rd=({errors:t})=>t;function Ya({chainAddresses:t,queryOptions:e}){return Ba({select:Rd,chainAddresses:t,queryOptions:e})}var Ja=3,Bd=1,Za=({networkID:t,chainAddresses:e=[]})=>{let{data:r=[]}=Ya({chainAddresses:e}),{data:o=0}=Xa({chainAddresses:e}),n=o>=Ja,{data:i=0}=Ia(),l=i>=Ja,c=r.length===Bd&&r.some(m=>m.code==="TokensTrimmed"),{t:d}=_(),p=(0,Yn.useMemo)(()=>{if(n)return d("partialErrorGeneric");let m=r.filter(b=>t?b.details.chainId===t:!0),y=m.length+(l?1:0);return y?y>1?d("partialErrorGeneric"):l?d("partialErrorTokenPrices"):c?d("partialErrorTokensTrimmed"):t?d("partialErrorTokenDetail"):d("partialErrorBalanceChainName",{chainName:B.getChainName(m[0].details.chainId)}):""},[n,r,l,t,c,d]);return(0,Yn.useMemo)(()=>({partialErrorMessage:p,shouldShowPartialError:p!==""}),[p])};function Dd(t){let{onTappingBuy:e,onTappingReceive:r,onTappingSend:o,onTappingSwap:n,account:i}=t,{shouldShowPartialError:l,partialErrorMessage:c}=Za({chainAddresses:i?.addresses});return{ctaActions:Nd({onTappingBuy:e,onTappingReceive:r,onTappingSend:o,onTappingSwap:n}),shouldShowPartialError:l,partialErrorMessage:c}}function Nd(t){let{t:e}=_();return(0,el.useMemo)(()=>{let o=[];return o.push({text:e("commandSend"),type:"send",onClick:t.onTappingSend}),o.push({text:e("commandSwap"),type:"swap",onClick:t.onTappingSwap}),o.push({text:e("commandReceive"),type:"receive",onClick:t.onTappingReceive}),o.push({text:e("commandBuy"),type:"buy",onClick:t.onTappingBuy}),o.sort((n,i)=>(Nn.get(n.type)??100)-(Nn.get(i.type)??100)),{primary:o,more:[]}},[e,t.onTappingSend,t.onTappingSwap,t.onTappingReceive,t.onTappingBuy])}s();a();var tl=x(E());var Vd=({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:o,accountSigner:n,storage:i,includeCallPayload:l})=>({accountSigner:n,accountIdentifier:o,networkID:t,unsignedTransaction:e,...l&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:"swap",display:{summary:r}},storage:i}),_d=async({t,fungible:e,unsignedUnwrapTx:r,gasEstimation:o,storage:n,accountMetadata:i,accountSigner:l})=>{if(!r)throw new Error("Unsigned unwrap transaction is required");if(!o)throw new Error("Gas estimation is required");let{chain:c,balance:d}=e.data;if(!B.isEthereumNetworkID(c.id))throw new Error(`Chain is not supported: ${c.id}`);let p=c.id,m={topRight:{text:`+${d} ${c.symbol}`},topLeft:{text:t("transactionsPendingSwapping")},bottomRight:{text:`-${d} ${e.data.symbol}`},bottomLeft:{text:`${e.data.name}`}},y=St.parse({type:"0x2",chainId:B.getEVMNetworkIDValue(p),gas:`0x${o.gasLimit.toString(16)}`,maxFeePerGas:`0x${o.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${o.maxPriorityFeePerGas.toString(16)}`,...r}),b=Vd({storage:n,accountSigner:l,pendingActivityRows:m,includeCallPayload:!1,networkID:p,unsignedTransaction:y,accountIdentifier:i.accountIdentifier});return yo(b)},Ld=()=>{let{data:t}=Re();return(0,tl.useMemo)(()=>{let r=t?.type,o=t?.name??"",n=t?.identifier??"";return{accountName:o,accountType:r,accountIdentifier:n}},[t])},Fd=t=>{let e=z(),r=H(),{t:o}=_(),n=Ld(),i=Ae();return se({async mutationFn({fungible:l,unsignedUnwrapTx:c,gasEstimation:d}){return await _d({t:o,fungible:l,unsignedUnwrapTx:c,gasEstimation:d,accountMetadata:n,storage:e,accountSigner:i})},async onSuccess(){await r.invalidateQueries({queryKey:ve.tokens(t)})}})};s();a();s();a();s();a();var rl=()=>{let{setRetryArgs:t}=Hn();return e=>{if(e instanceof sa){let{successfulTxIds:r}=e,[o,n]=r;t({type:"BRC20",commitTxId:o,revealTxId:n})}}};function jd(){let t=z(),{data:e}=Re({select:l=>l.identifier}),r=rl(),o=xo(),n=Ae();return se({mutationFn:async({multichainTransaction:l,pendingTransactionInput:c,senderAddress:d,gasEstimation:p})=>{if(!e)throw new Error("No account identifier found");let{networkID:m}=l,y=await nr.get(m).onBeforeSend({multichainTransaction:l,gasEstimation:p}),b=await ho({accountIdentifier:e,accountSigner:n,multichainTransaction:y,networkID:m,pendingTransactionInput:c,senderAddress:d,storage:t,utxoManager:o});return bo(m,b)},onError(l){l instanceof Error&&($.captureError(l,"fungibles"),l instanceof ia&&r(l))}})}s();a();var ol=x(E());var $d=(t,e,r)=>{let o=H(),{fungibles:n}=Bn({keys:[t]}),i=n.length===1?n[0]:void 0;(0,ol.useEffect)(()=>{if(!i)return;let{type:l,data:c}=i,{balance:d,decimals:p,chain:m}=c,{id:y}=m,b=ar(l)===!0;if(!r||!d||b||d.isEqualTo(e))return;let h=ve.transferFungibleLoggingContext(t),S={transactionId:r,decimals:p,chainId:y,isNativeToken:b,previousBalance:d,fungibleKey:t};o.setQueryData(h,S)},[r])};s();a();var nl=te({minutes:1}),Gd=(t,e=!0)=>{let r=ve.solanaBalance(t);return Q({enabled:!!t&&e&&nt(t),gcTime:nl,staleTime:nl,queryKey:r,async queryFn(){if(!t)throw new Error("No chain address provided");if(nt(t))return st(t.networkID).getBalance(new U.PublicKey(t.address));throw new Error(`SOL balance not implemented for ${t.networkID}`)}})};s();a();s();a();var il=x(E());var zd=t=>{let{data:e}=qs();return(0,il.useMemo)(()=>{if(!t||!e)return;let r=t.data.chain.id,o=e.explorers[r]??xr.get(r).defaultExplorer,n,i;if(ar(t.type))i="address",n=t.data.walletAddress;else switch(t.type){case"SuiCoin":{i="token",n=t.data.contractAddress;break}case"ERC20":{i="address",n=t.data.contractAddress;break}case"SPL":case"CompressedSPL":{i="address",n=t.data.mintAddress;break}case"BRC20":return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${t.data.walletAddress}`}}let l=vr({networkID:r,endpoint:i,explorerType:o,param:n});return{explorerName:Ar[o],explorerUrl:l}},[t,e])};s();a();var sl=x(E());var Hd=t=>{let e=H();return(0,sl.useCallback)(()=>e.invalidateQueries({queryKey:ve.tokens(t)}),[e,t])};s();a();var al=x(E()),qd=(t,e)=>(0,al.useMemo)(()=>{if(t)if(co(t)){let r=Ys(t).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:e("satsAmount",{sats:r.toString()})}}else return lo(t)&&t.highFees?{leftSubtext:e("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:Hs.colors.legacy.accentWarning,rightSubtext:""}:void 0},[t,e]);s();a();var Kd=x(E());s();a();s();a();var ke=t=>{if(t!=null&&!(t.constructor===Object&&Object.keys(t).length===0))return t},Wd=t=>t??[],Be=class extends Error{constructor(e){super(e),this.name="CollectiblesError"}},j=g.string().nullish().transform(ke),Bt=g.number().nullish().transform(ke),Zn=g.union([j,Bt]).transform(t=>typeof t=="number"?t.toString():t),Qd=g.object({name:j,symbol:j,decimals:Bt,address:j}),ei=(h=>(h[h.Uninitialized=0]="Uninitialized",h[h.EditionV1=1]="EditionV1",h[h.MasterEditionV1=2]="MasterEditionV1",h[h.ReservationListV1=3]="ReservationListV1",h[h.MetadataV1=4]="MetadataV1",h[h.ReservationListV2=5]="ReservationListV2",h[h.MasterEditionV2=6]="MasterEditionV2",h[h.EditionMarker=7]="EditionMarker",h[h.UseAuthorityRecord=8]="UseAuthorityRecord",h[h.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",h[h.TokenOwnedEscrow=10]="TokenOwnedEscrow",h[h.TokenRecord=11]="TokenRecord",h[h.MetadataDelegate=12]="MetadataDelegate",h))(ei||{}),Po=g.nativeEnum(ei),ll=g.object({price:g.number(),token:Qd.nullish().transform(ke)}),Xd=ll.nullish().transform(ke),Yd=g.object({name:j,url:j,isVerified:g.coerce.boolean()}),cl=g.object({id:g.string(),isValidCollectionId:g.coerce.boolean(),name:j,description:j,externalUrl:j,imageUrl:j,isSpam:g.coerce.boolean(),spamStatus:g.nativeEnum(Rt).optional().default("NOT_VERIFIED"),floorPrice:ll.nullish().transform(ke),ownerCount:Bt,totalCount:Bt,tokenCount:Bt,marketplaces:g.array(Yd)}),Jd=g.object({small:j,medium:j,large:j,blurhash:j}),Zd=Jd.nullish().transform(ke),ep=g.enum(["image","video","audio","model","other"]),tp=g.object({url:j}),Rr=tp.nullish().transform(ke),rp=g.object({type:ep,image:Rr,video:Rr,audio:Rr,model:Rr,other:Rr,previews:Zd}),op=rp.nullish().transform(ke),np=g.object({trait_type:j,value:j.or(Bt),display_type:j}),ip=g.object({id:g.string(),contract:g.string(),standard:g.nativeEnum(kn)}),ul=g.object({compressed:g.boolean(),merkleTree:g.string(),leafIndex:g.number()}),sp=g.object({mint:g.string(),tokenAccount:g.string(),standard:g.nativeEnum(So),compression:ul.nullish().transform(ke),programId:g.string(),mintExtensions:vs(Sa).optional()}),ap=g.object({id:g.string(),url:g.string(),displayName:g.string(),description:g.string(),count:g.number()}),lp=g.object({hash:g.string(),index:g.number(),distinctRareSats:g.number(),satributes:g.array(ap),blockNumber:g.number(),value:g.number(),backgroundImageUrl:g.string()}),cp=g.object({firstCreatedTransactionHash:g.string(),firstCreatedInscriptionId:g.string(),inscriptionId:j,inscriptionNumber:Zn,outputValue:Zn,satNumber:Zn,satName:j,satRarity:j,protocolName:j,utxoHash:j,utxoIndex:Bt,createdAt:g.string().nullish().transform(ke),utxoDetails:lp.nullish().transform(ke)}),up=g.object({objectId:g.string().optional(),kioskId:g.string().optional()}),dp=g.object({listingPrice:g.string(),listingPriceUiAmount:g.string(),isNative:g.boolean(),url:g.string()}),pp=g.union([sp,ip,cp,up]),ti=g.object({id:Vs,chain:_s,name:j,symbol:j,description:j,externalUrl:j,collection:cl,media:op,uri:j,attributes:g.array(np).nullish().transform(Wd),lastSalePrice:Xd,balance:j,decimals:j,owner:j,chainData:pp.optional(),listings:g.record(dp).nullish().transform(ke)}),mp=cl.extend({items:g.array(ti)}),lx=g.object({items:g.array(mp),isTrimmed:g.boolean()});var cx=g.object({compression:ul.nullish().transform(ke).refine(t=>t?.compressed),mint:g.string()}),ux=g.object({root:g.string(),proof:g.array(g.string()),merkleTree:g.string(),dataHash:g.string(),creatorHash:g.string(),leafIndex:g.number(),owner:g.string(),delegate:g.string().optional()});s();a();s();a();var ri=x(ld());s();a();var fp=new U.PublicKey("NTYeYJ1wr4bpM5xo6zx5En44SvJFAd35zTxxNoERYqd"),yx=new U.PublicKey("M2mx93ekt1fmXSVkTrUL9xVFHkmME8HTUi5Cyc5aF7K");function ko(t){let e=[2,6],r=Po.safeParse(t);return r.success&&e.includes(r.data)}var oi=ri.Buffer.from("metadata"),yp=ri.Buffer.from("edition"),ni=Er.toBuffer();function Ax(t){let[e]=U.PublicKey.findProgramAddressSync([oi,ni,t],Er);return e}function dl(t){let[e]=U.PublicKey.findProgramAddressSync([oi,ni,t,yp],Er);return e}function vx(t){let[e]=U.PublicKey.findProgramAddressSync([oi,ni,t],Er);return e}var gp="CollectibleEdition";function bp(t,e){return Q({queryKey:[gp,{mintAddress:t}],async queryFn(){if(!e)return{};let r=Buffer.from(new U.PublicKey(t).toBytes()),o=dl(r),{Edition:n}=await Ws();try{let i=await n.fromAccountAddress(e,o),l=Po.safeParse(i.key);if(!l.success)throw new Error(`Invalid MetaplexTokenEdition: ${i.key}`);return{key:l.data,isMasterEdition:ko(i.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}s();a();function ue(t){return t?.tokenAccount!==void 0}function _e(t){return t?.contract!==void 0}function Ze(t){return t!==void 0&&"firstCreatedTransactionHash"in t}function pl(t){return t!==void 0&&"objectId"in t}function ml(t){return t!==void 0&&"outputValue"in t&&"utxoHash"in t&&"utxoIndex"in t}function lr(t){return t!==void 0&&"utxoDetails"in t}s();a();var si=x(E());s();a();s();a();var Tt=(t,e,r,o)=>{(!e||e>=400&&e<500)&&($.addBreadcrumb(r,t.message,"info",o),$.captureError(t,"collectibles"))};s();a();var fl=t=>{let e=!1;return{collectibles:t.reduce((o,n)=>{let i=ti.safeParse(n);return i.success?o.push(i.data):e=!0,o},[]),containsParseFailure:e}};var hp="collectibles",Sp=new Error("Failed to fetch collectibles for addresses");async function yl(t){let e="/collectibles/v1";try{let o=(await ye.api().post(e,{addresses:t})).data,n=!!o.isTrimmed;if(!o.collectibles)throw Sp;let{collectibles:i,containsParseFailure:l}=fl(o.collectibles);return l&&$.captureError(new Error("collectibles failed to parse some items"),"collectibles"),{allCollectibles:i,isTrimmed:n}}catch(r){if(Ct(r)){let o=r.response?.status;Tt(r,o,hp)}throw r}}s();a();s();a();var bl=t=>{let e=[];for(let[r,o]of t){o.sort((i,l)=>{let c=i.name??"",d=l.name??"",p=c.localeCompare(d);if(c.localeCompare(d))return p;let m=gl(i),y=gl(l);return m.localeCompare(y)});let[n]=o;n&&e.push({..."externalUrl"in n?{externalUrl:n.externalUrl}:void 0,...n.collection,items:o})}return e.sort((r,o)=>{if(r.items.length>o.items.length)return-1;if(o.items.length>r.items.length)return 1;let n=r.name??r.id??"",i=o.name??o.id??"";return n.localeCompare(i)})};function gl(t){let e=t.chainData;return ue(e)?e.tokenAccount:_e(e)?e.id:(Ze(e),t.id)}function hl(t){let e=new Map;for(let r of t){let o=r.collection.id,n=e.get(o)??[];n.push(r),e.set(o,n)}return bl(e)}s();a();s();a();var Le="collectibles",ii=[Le,"collectibleBids"],M={collections:t=>[Le,"collections",{addresses:t.map(na)}],hiddenCollections:t=>[Le,"hiddenCollections",t],unhiddenCollections:t=>[Le,"unhiddenCollections",t],visibilityOverrides:t=>[Le,"visibilityOverrides",t],pinnedCollections:t=>[Le,"pinnedCollections",t],optimisticUpdates:()=>[Le,"optimisticUpdates"],collectibleBids:t=>[...ii,t],collectibleMintGasEstimation:t=>[Le,"mintNFTGasEstimation",t],collectibleSellSteps:t=>[Le,"collectibleSellSteps",t],createMintTransaction:t=>[Le,"createMintTransaction",t],transferTransaction:t=>[Le,"transferTransaction",t]};var Cp=20;function cr(t,e){let r=M.optimisticUpdates(),o=t.getQueryData(r)??[];t.setQueryData(r,[...o,e])}async function Sl(t,e){let r=M.optimisticUpdates(),o=await t.getQueryState(r);if(o){let n=e??Date.now(),i=o.dataUpdatedAt,l=te({seconds:Cp});return n-i>l?(t.removeQueries({queryKey:r}),[]):o?.data??[]}else return[]}function Cl(t,e){let r=e.reduce((o,n)=>{let{id:i,amount:l}=n,c=new fe(l);return o[i]=(o[i]??new fe(0)).plus(c),o},{});for(let o of t)o.items=o.items.reduce((n,i)=>{let l=i.id,c=r[l];if(c){let d=new fe(i.balance??0);return d.minus(c).isGreaterThan(0)?n.concat({...i,balance:d.minus(c).toString()}):n}else return n.concat(i)},[]);return t=t.filter(o=>o.items.length>0),t}s();a();var Fe=(n=>(n[n.Always=1/0]="Always",n[n.Short=te({days:1})]="Short",n[n.Medium=te({days:3})]="Medium",n[n.Long=te({days:7})]="Long",n))(Fe||{}),et=(i=>(i[i.Immediate=0]="Immediate",i[i.Short=te({minutes:1})]="Short",i[i.Medium=te({minutes:2.5})]="Medium",i[i.Long=te({minutes:5})]="Long",i[i.Never=1/0]="Never",i))(et||{}),Br=(c=>(c[c.Shortest=te({seconds:10})]="Shortest",c[c.Shorter=te({seconds:30})]="Shorter",c[c.Short=te({minutes:1})]="Short",c[c.Medium=te({minutes:2.5})]="Medium",c[c.Long=te({minutes:5})]="Long",c[c.Longer=te({minutes:7.5})]="Longer",c[c.Longest=te({minutes:10})]="Longest",c))(Br||{});var wl=({addresses:t,queryOptions:e={staleTime:et.Short,refetchInterval:Br.Long,enabled:!0},select:r})=>{let o=H(),n=M.collections(t),i=t.length!==0&&t.every(l=>!B.isLocalNetworkID(l.networkID));return Q({enabled:i&&e.enabled,queryKey:n,gcTime:Fe.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:l}]}){let[c]=await Promise.allSettled([yl(l)]);if(c.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:d,isTrimmed:p}=c.status==="fulfilled"?c.value:{allCollectibles:[],isTrimmed:!1},m=hl(d),y=await Sl(o),b=Cl(m,y);return{items:b,nrOfItems:b.reduce((h,S)=>h+S.items.length,0),isTrimmed:p}},select:r})},Dt=t=>wl({...t,select:(0,si.useCallback)(e=>e.items,[])}),wp=t=>wl({...t,select:(0,si.useCallback)(r=>r.isTrimmed,[])}).data??!1;s();a();s();a();var ai=class extends Be{constructor(e){super(e),this.name="GetPinnedCollectionsError"}};async function Oo(t){try{return await t.get("pinnedCollections")}catch{throw new ai("")}}var li=class extends Be{constructor(e){super(e),this.name="SetPinnedCollectionsError"}};async function ci(t,e){try{return await t.set("pinnedCollections",e)}catch{throw new li("")}}var Mo=t=>{let e=z();return Q({enabled:t.length!==0,queryKey:M.pinnedCollections(t),gcTime:Fe.Long,staleTime:1/0,refetchInterval:!1,refetchOnMount:!0,async queryFn(){try{return(await Oo(e)??{})[t]||[]}catch(r){return r instanceof Error&&$.captureError(r,"collectibles"),[]}}})};s();a();var Tl=x(E());var Tp=({id:t,addresses:e})=>{let{data:r,isSuccess:o}=Dt({addresses:e});return(0,Tl.useMemo)(()=>{let i={isSuccess:o,data:void 0};for(let l of r??[])for(let c of l.items)if(c.id===t)return{...i,data:c};return i},[t,r,o])};s();a();var be=x(E());s();a();function Ee(t){let e=z();return Q({gcTime:Fe.Long,staleTime:1/0,enabled:!!t,queryKey:M.visibilityOverrides(t??""),async queryFn(){return t?await at(e,t):new Map}})}s();a();var Vt=x(E());s();a();function Nt(){let t=z(),e=H(),r=oe();return se({async mutationFn({accountId:o,mutations:n}){await kr(t,r,{accountId:o,mutations:n})},async onSuccess(o,{accountId:n}){await e.invalidateQueries({queryKey:M.visibilityOverrides(n)}),await Promise.allSettled([e.invalidateQueries({queryKey:M.hiddenCollections(n)}),e.invalidateQueries({queryKey:M.unhiddenCollections(n)})])}})}async function Bo({collectible:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:o,desiredVisibility:n,onSuccess:i,onError:l}){if(!e)return;let c=t.collection.id||t.id,d=e.get(c)?.status;try{let p=Al(n,t.collection);await r({accountId:o,mutations:[{id:c,visibility:p}]}),await i({collectible:t,desiredVisibility:n,previousVisibility:d,updatedVisibility:p})}catch(p){await l(p,{collectible:t,desiredVisibility:n})}}async function xl({collection:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:o,desiredVisibility:n,onSuccess:i,onError:l}){if(!e)return;let c=t.id,d=e.get(c)?.status;try{let p=Al(n,t);await r({accountId:o,mutations:[{id:c,visibility:p}]}),i&&await i({collection:t,desiredVisibility:n,previousVisibility:d,updatedVisibility:p})}catch(p){l&&await l(p,{collection:t,desiredVisibility:n})}}function Al(t,e){let{spamStatus:r}=e;switch(t){case"hidden:reported_spam":if(r==="NOT_VERIFIED"||r==="VERIFIED")return"hidden:reported_spam";if(r==="POSSIBLE_SPAM"||r==="SPAM")return null;throw new Error(`Unexpected spam status: ${r} found while marking spam.`);case"visible:reported_notSpam":if(r==="NOT_VERIFIED"||r==="VERIFIED")return null;if(r==="POSSIBLE_SPAM"||r==="SPAM")return"visible:reported_notSpam";throw new Error(`Unexpected spam status: ${r} found while marking not spam.`);case"hidden":if(r==="NOT_VERIFIED"||r==="VERIFIED")return"hidden";if(r==="POSSIBLE_SPAM"||r==="SPAM")return null;throw new Error(`Unexpected spam status: ${r} found while marking hidden.`);case"visible":if(r==="NOT_VERIFIED"||r==="VERIFIED")return null;if(r==="POSSIBLE_SPAM"||r==="SPAM")return"visible";throw new Error(`Unexpected spam status: ${r} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}function xt(t){return{networkId:t.chain.id,chainId:B.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}function vl({accountId:t,onError:e,onSuccess:r}){let{data:o}=Ee(t),{mutateAsync:n}=Nt();return(0,Vt.useCallback)(async i=>{await Bo({collectible:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden:reported_spam",onSuccess:r,onError:e})},[o,n,t,e,r])}function El({accountId:t,onError:e,onSuccess:r}){let{data:o}=Ee(t),{mutateAsync:n}=Nt();return(0,Vt.useCallback)(async i=>{await Bo({collectible:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible:reported_notSpam",onSuccess:r,onError:e})},[o,n,t,e,r])}function Il({accountId:t,onError:e,onSuccess:r}){let{data:o}=Ee(t),{mutateAsync:n}=Nt();return(0,Vt.useCallback)(async i=>{await Bo({collectible:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden",onSuccess:r,onError:e})},[o,n,t,e,r])}function Ul({accountId:t,onError:e,onSuccess:r}){let{data:o}=Ee(t),{mutateAsync:n}=Nt();return(0,Vt.useCallback)(async i=>{await Bo({collectible:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible",onSuccess:r,onError:e})},[o,n,t,e,r])}function Pl({accountId:t,onError:e,onSuccess:r}){let{data:o}=Ee(t),{mutateAsync:n}=Nt();return(0,Vt.useCallback)(async i=>{await xl({collection:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"hidden",onSuccess:r,onError:e})},[o,n,t,e,r])}function kl({accountId:t,onError:e,onSuccess:r}){let{data:o}=Ee(t),{mutateAsync:n}=Nt();return(0,Vt.useCallback)(async i=>{await xl({collection:i,visibilityOverrides:o,setVisibilityOverrides:n,accountId:t,desiredVisibility:"visible",onSuccess:r,onError:e})},[o,n,t,e,r])}s();a();var ui=x(E());var Ol=({toast:t,accountId:e})=>{let{t:r}=_(),o=oe(),n=(0,ui.useCallback)(({collectible:l,updatedVisibility:c})=>{c!==null&&o.capture("collectionHidden",{data:xt(l)}),t&&t.success(r("collectionHideSuccess"))},[r,t,o]),i=(0,ui.useCallback)((l,c)=>{t&&t.error(r("collectionHideFail"))},[r,t]);return Il({accountId:e,onSuccess:n,onError:i})};s();a();var di=x(E());var Ml=({toast:t,accountId:e})=>{let{t:r}=_(),o=oe(),n=(0,di.useCallback)(({collectible:l,updatedVisibility:c})=>{c!==null&&o.capture("collectionUnhidden",{data:xt(l)}),t&&t.success(r("collectionUnhideSuccess"))},[r,t,o]),i=(0,di.useCallback)((l,c)=>{t&&t.error(r("collectionUnhideFail"))},[r,t]);return Ul({accountId:e,onSuccess:n,onError:i})};function xp({accountId:t,collectible:e,toast:r}){let o=Ol({accountId:t,toast:r}),n=(0,be.useCallback)(()=>{if(e)return o(e)},[o,e]),i=Ml({accountId:t,toast:r}),l=(0,be.useCallback)(()=>{if(e)return i(e)},[i,e]),{data:c}=Ee(t??""),d=(0,be.useMemo)(()=>c?.get(e?.collection.id??e?.id??""),[c,e]),p=(0,be.useMemo)(()=>e?wo(d,{spamStatus:e.collection.spamStatus}):!1,[e,d]),m=(0,be.useCallback)(()=>p?l():n(),[p,n,l]);return(0,be.useMemo)(()=>({isHidden:p,onHideCollectible:n,onUnhideCollectible:l,onToggleHide:m}),[n,m,l,p])}function Ap(t){let{data:e,isPending:r}=Ee(t),o=(0,be.useCallback)(l=>{if(!l)return!1;let c=l.collection.id||l.id;return Rn(e,{spamStatus:l.collection.spamStatus,key:c})},[e]),n=(0,be.useCallback)(l=>{if(!l)return"NOT_VERIFIED";let c=l.collection.id||l.id;return Mn(e,{spamStatus:l.collection.spamStatus,key:c})},[e]),i=(0,be.useCallback)(l=>Or(n(l)),[n]);return(0,be.useMemo)(()=>({getIsHidden:o,getSpamStatus:n,getIsSpam:i,isLoading:r}),[o,n,i,r])}function Rl(t){let{data:e,isPending:r}=Ee(t),o=(0,be.useCallback)(l=>{if(!l)return!1;let c=l.id;return Rn(e,{spamStatus:l.spamStatus,key:c})},[e]),n=(0,be.useCallback)(l=>{if(!l)return"NOT_VERIFIED";let c=l.id;return Mn(e,{spamStatus:l.spamStatus,key:c})},[e]),i=(0,be.useCallback)(l=>Or(n(l)),[n]);return(0,be.useMemo)(()=>({getIsHidden:o,getSpamStatus:n,getIsSpam:i,isLoading:r}),[o,n,i,r])}function Bl(t){let e=Rl(t),r=Pl({accountId:t}),o=kl({accountId:t});return(0,be.useMemo)(()=>({...e,hideCollection:r,unhideCollection:o}),[e,r,o])}s();a();var Dl=x(E());var vp=({id:t,addresses:e})=>{let{data:r}=Dt({addresses:e});return(0,Dl.useMemo)(()=>(r??[]).find(o=>o.id===t),[t,r])};s();a();var Nl=x(E()),Do=(t,e)=>(0,Nl.useMemo)(()=>e?t.includes(e):!1,[e,t]);s();a();var qv=t=>`${t/100}%`,Vl=(t,e)=>t*e/100/100;s();a();var $l=x(En()),dr=x(E());s();a();var Ep=g.object({caip19:g.string(),name:g.string(),symbol:g.string()}),Ll=g.object({bps:g.number(),kind:g.union([g.literal("marketplace"),g.literal("royalty")]),recipient:g.string().optional()}),Ip=g.object({amount:g.number(),feeBreakdown:g.array(Ll),netAmount:g.number(),token:Ep,totalFeeBps:g.number()}),Up=g.object({name:g.string(),logo:g.string(),url:g.string().optional()}),Fl=g.object({id:g.string(),expiration:g.string().optional(),price:Ip,source:Up}),Pp=g.object({bids:g.array(Fl)}),_l=new Be("Failed to fetch collectible bids."),kp="collectible-instant-sell-bids",Op=async t=>{if(!t.address)throw _l;try{let e=await ye.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:r}=Pp.parse(e.data);return r}catch(e){if(Ct(e)){let r=e.response?.status;Tt(e,r,kp)}throw _l}},pi=({bidAsset:t,isEnabled:e})=>{let r=e&&t.address!==null&&t.chainId!==null;return Q({enabled:r,staleTime:et.Short,refetchInterval:Br.Shortest,queryKey:M.collectibleBids(t),async queryFn(){return Op(t)}})},No=t=>{let e=t?.chainData,r=t?.chain.id??null,o=_e(e),n=ue(e),i=o?{tokenId:e.id}:{},l=n?{contractType:e.standard}:{},c=o?e.contract.toLowerCase():n?e.mint:null;return{chainId:r,address:c,resourceType:"address",...i,...l}};s();a();var Mp=x(E());var le=g.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),Rp=g.enum(["/execute/auth-signature/v1","/order/v3"]),tt=g.enum(["transaction","signature","post","refetch"]),Bp=g.enum(["eip712","eip191"]),Dp=g.object({domain:g.any(),types:g.any(),value:g.any()}),Np=g.object({message:g.string()}),Vp=g.object({from:g.string(),to:g.string(),data:g.string()}),_p=g.object({endpoint:Rp,body:g.object({id:g.string(),kind:g.string()})}),Lp=g.object({action:le,chainId:no,type:g.literal(tt.enum.signature),data:g.object({signatureKind:Bp,signatureData:g.union([Np,Dp]),postData:_p})}),Fp=g.object({chainId:no,action:le,data:Vp,type:g.literal(tt.enum.transaction)}),jp=g.object({chainId:no,action:le,type:g.literal(tt.enum.refetch),data:g.object({resource:g.string()})}),$p=g.union([Lp,Fp,jp]),Gp=g.object({action:le,chainId:Ns,type:g.literal(tt.enum.transaction),data:g.object({transaction:g.string()})}),zp=g.union([$p,Gp]),Hp=g.object({steps:g.array(zp),orderId:g.string().optional()}),qp=new Be("Failed to fetch collectible sell steps."),Kp="collectible-instant-sell-steps",Wp=async t=>{try{let e=await ye.api().validateStatus(!0).post("/collectibles/v1/sell",t);return Hp.parse(e.data)}catch(e){if(Ct(e)){let r=e.response?.status;if(Tt(e,r,Kp),e.response?.data?.code){let{code:o}=e.response.data;throw{code:o}}if(r)throw e}throw qp}},mi=({sellAsset:t})=>{let e=t.details.orderId!==void 0;return Q({enabled:e,queryKey:M.collectibleSellSteps(t),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:(r,o)=>o.code?!1:r<3,async queryFn(){return Wp(t)}})};var jl=(t,e,r)=>{let o=r?.chainData,n=_e(o),i=ue(o),l=r?.owner,c=n?l?.toLowerCase():l,d=e?.id,p=e?.source?.name,m=i?{minPrice:e?.price?.netAmount,tokenAccount:o.tokenAccount}:{};return{details:{asset:t,owner:c,orderId:d,marketplace:p,...m}}};s();a();re.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var ur=(t,e)=>new re(t).div(Jt(e)).toNumber();var Qp={steps:[],orderId:""},Xp=({collectible:t})=>{let{t:e}=_(),r=(0,dr.useMemo)(()=>No(t),[t]),{data:o=[],isPending:n,isError:i}=pi({bidAsset:r,isEnabled:!0}),l=(0,dr.useMemo)(()=>o.length>0?o[0]:void 0,[o]),c=(0,dr.useMemo)(()=>jl(r,l,t),[r,l,t]),{data:d=Qp,isPending:p,isError:m,refetch:y,error:b}=mi({sellAsset:c}),h=(0,dr.useMemo)(()=>l&&t?Gl({t:e,bid:l,collectible:t}):void 0,[e,l,t]),S=(0,dr.useMemo)(()=>m?Number.isInteger(b.code):!1,[m,b]);return{bid:l,bidSummary:h,isLoadingBids:n,isErrorBids:i,sellSteps:d,isLoadingSellSteps:p,isErrorSellSteps:m,refetchSellSteps:y,sellStepsError:b,isSellErrorCode:S}},Yp=({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,Jp=({offerAmount:t,collectionFloor:e})=>t-e,Zp=t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",r=(0,$l.default)(t).format(e);return`${t>0?"+":""}${r}`},em=t=>{if(t){let{price:e,token:r}=t,o=r?.decimals;if(o)return ur(e,o)}},tm=t=>{if(t){let{price:e,token:r}=t,o=r?.decimals;if(o)return ur(e,o)}},rm=t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large};var Gl=({bid:t,collectible:e,t:r})=>{let{lastSalePrice:o,media:n,name:i,collection:l}=e,{name:c,logo:d}=t.source,{amount:p,netAmount:m,feeBreakdown:y,token:b,totalFeeBps:h}=t.price,{symbol:S,caip19:C}=b,A=0,O=m,V=l.id,v=e.id,W=tm(o),J=S.slice(0,6),Ye=e.chain.symbol,ie=em(l.floorPrice),xe=ie?Jp({offerAmount:p,collectionFloor:ie}):void 0,ae=xe?Zp(xe):void 0;return{bidTokenSymbol:J,caip19:C,collectionId:V,collectibleId:v,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:Ye,collectionFloor:ie,collectibleImage:rm(n),collectibleName:i??r("collectiblesUnknownCollectible"),collectionName:l.name??r("collectiblesUnknownCollection"),currencySymbol:t.source.name==="Blur"?Ye:J,fees:y,floorDifference:xe,floorDifferencePercent:ae,lastSale:W,marketplace:c,marketplaceLogoURL:d,offerAmount:p,offerAmountFormatted:to(p),phantomFeePercentage:A,pnl:Yp({lastSale:W,receiveAmount:O}),receiveAmount:O,receiveAmountFormatted:to(O),totalFeeBps:h}},om=({gasFee:t,totalFeeBps:e,offerAmount:r})=>{let o=Vl(e,r)+t.toNumber();return{raw:o,formatted:to(o)}};s();a();var zl=new Map([[le.enum["nft-approval"],8e4],[le.enum["blur-swap"],42e3],[le.enum.sale,39e4],["default",42e4]]),im=(t,e,r,o)=>{let n=t==="Blur",i=r.filter(C=>C.type==="transaction").map(({action:C})=>({action:C}));if(i.some(({action:C})=>C===le.enum["nft-approval"])||(i=[...i,{action:le.enum["nft-approval"]}]),n){let C=i.some(({action:O})=>O===le.enum.sale),A=i.some(({action:O})=>O===le.enum["blur-swap"]);C||(i=[...i,{action:le.enum.sale}]),A||(i=[...i,{action:le.enum["blur-swap"]}])}let c=i?.reduce((C,{action:A})=>{let O=zl.get(A)??zl.get("default");return C+(O??0)},0),d=new fe(c),{status:p,data:m}=va({gasLimit:d,networkID:e,transactionSpeed:"standard"}),{data:y}=Ua(e,m),b=ea(m),h=Number(b?.replace(/[^\d.]/g,"")??0),S=o?o.isGreaterThan(h):!1;return{gasEvm:h,gasEstimation:m,gasEstimationStatus:p,ethFeeUI:b,gasEstimationPrice:y,hasEnoughGas:S}};s();a();var lt=x(E());s();a();var Vo=(t,e)=>{t.invalidateQueries({queryKey:ii}),t.invalidateQueries({predicate:({queryKey:r})=>r.includes("collectibleSellSteps")&&r[2].details.orderId===e?.orderId})};var lm=()=>{let{data:t}=Re();return(0,lt.useMemo)(()=>{let r=t?.type,o=t?.name??"",n=t?.addresses??[],i=t?.identifier??"";return{isLedger:t?.type==="ledger",accountName:o,accountType:r,chainAddresses:n,accountIdentifier:i}},[t])},cm=({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:o,accountSigner:n,storage:i,includeCallPayload:l})=>({accountSigner:n,accountIdentifier:o,networkID:t,unsignedTransaction:e,...l&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:"sell",display:{summary:r}},storage:i}),um=async(t,e,r,o,n,i,l)=>{try{if(!r)throw new Error("Gas estimation is required");if(!l)throw new Error("Bid summary is required");let{data:c,chainId:d,action:p}=e,{collectionName:m,marketplace:y,receiveAmount:b,currencySymbol:h,collectibleChainSymbol:S,bidTokenSymbol:C}=l,A=eo(y),O={};p==="nft-approval"&&(O={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:m})},bottomLeft:{text:A}}),p==="sale"&&(O={topRight:{text:`+${b} ${h}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${m}`},bottomLeft:{text:A}}),p==="blur-swap"&&(O={topRight:{text:`+${b} ${S}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${b} ${C}`},bottomLeft:{text:A}});let V=St.parse({type:"0x2",to:c.to,from:c.from,data:c.data,chainId:B.getEVMNetworkIDValue(d),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`}),v=cm({storage:o,accountSigner:n,pendingActivityRows:O,includeCallPayload:!1,networkID:d,unsignedTransaction:V,accountIdentifier:i.accountIdentifier}),W=await yo(v);return{type:e.type,data:W}}catch(c){return{type:e.type,error:c}}},dm=async(t,e,r)=>{try{let{chainId:o,data:n}=t,{signatureData:i,signatureKind:l,postData:c}=n;if(l==="eip191"&&"message"in i){let d=await e.sign(r.accountIdentifier,{signingType:"message",chainType:"eip155",message:i.message});if(d.status==="success")return await ye.api().post("/collectibles/v1/submit-signature",{chainId:o,signature:d.signature,postData:c}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(o){return{type:t.type,error:o}}},pm=async(t,e)=>{try{let{resource:r}=t.data;if(r==="/sell"){let{data:o}=await e();return{type:t.type,data:o?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(r){return{type:t.type,error:r}}},mm=[le.enum.auth,le.enum["nft-approval"],le.enum.sale],fm="Steps are required",ym="These steps are not from the same bid",_o=class extends Error{message=fm},Lo=class extends Error{message=ym},gm=(t,e,r,o,n,i,l)=>{let c=z(),d=oe(),p=H(),m=Ae(),[y,b]=(0,lt.useState)("idle"),[h,S]=(0,lt.useState)(null),[C,A]=(0,lt.useState)(null),{t:O}=_(),V=lm(),{chainAddresses:v,isLedger:W}=V;(0,lt.useEffect)(function(){y==="loading"&&Vo(p,n)},[y,p,n]),(0,lt.useEffect)(function(){y==="success"&&n&&cr(p,{id:n.collectibleId,amount:1})},[y,p,v,n]);let J=()=>{b("idle"),S(null),A(null)},Ye=l&&n?.receiveAmount?n.receiveAmount*l:void 0,ie=async(xe,ae=new Map)=>{let gt=xe??e;try{if(t&&t!==""&&t!==n?.orderId)throw new Lo;if(!Array.isArray(gt)||gt.length===0)throw new _o;b("loading");for await(let bt of gt){let{action:ht}=bt,nd=ae.get(ht)==="success",id=ht===le.enum.sale,ws=ht===le.enum.refetch,sd=mm.some(Yt=>Yt===ht);if(nd)continue;ws||ae.set(ht,"loading");let ad=async Yt=>{switch(Yt.type){case tt.enum.transaction:return await um(O,Yt,r,c,m,V,n);case tt.enum.signature:return await dm(Yt,m,V);case tt.enum.refetch:return await pm(Yt,o)}},{type:Ts,data:vn,error:xs}=await ad(bt);if(sd&&xs)throw xs;if(vn&&(ws||ae.set(ht,"success"),Ts===tt.enum.transaction&&id&&A(vn),Ts===tt.enum.refetch))return await Es(500),await ie(vn,ae)}b("success"),d.capture("collectibleSellSuccess",{data:{bidSummary:n,usdSaleValue:Ye}})}catch(bt){let ht=bt?.message??"";(!(bt instanceof _o)||!(bt instanceof Lo))&&($.captureError(bt,"collectibles"),d.capture("collectibleSellFailure",{data:{bidSummary:n,usdSaleValue:Ye,errorMessage:ht}})),b("error"),S(bt)}};return{executeSellEvmSteps:ie,reset:J,error:h,result:C,status:y,isLedger:W}};s();a();var je=x(E());var bm=()=>{let{data:t}=Re();return(0,je.useMemo)(()=>{let r=t?.identifier??"",o=t?.type==="ledger",n=t?.addresses??[],i=n.find(nt),l=i?.networkID,c=i?.address??"",d=ra(l),p=ta(d);return{accountIdentifier:r,chainAddresses:n,chainId:l,solanaPublicKey:c,isLedger:o,cluster:d,connection:p}},[t])},hm=(t,e)=>{let[r,o]=(0,je.useState)(void 0);return(0,je.useEffect)(()=>{(async()=>{if(!t)return;let l=t.find(m=>m.type==="transaction")?.data?.transaction;if(!l)return;let c=Un(l,"base64"),d=await ya(e,[c.message]),p=Ms(d.value);o(p)})()},[t,e]),r},Sm=async(t,e,r,o,n,i)=>{if(!i)throw new Error("Bid summary is required");let{collectionName:l,marketplace:c,receiveAmount:d,currencySymbol:p}=i,m={topRight:{text:`+${d} ${p}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${l}`},bottomLeft:{text:eo(c)}},{data:y,chainId:b,type:h}=e,{transaction:S}=y,C=Un(S,"base64"),A={ownerAddress:r.solanaPublicKey,networkID:b,data:{signature:""},type:"sell",display:{summary:m}},{accountIdentifier:O,solanaPublicKey:V,connection:v}=r,W=new U.PublicKey(V),J=await sr({accountIdentifier:O,feePayer:W,transaction:C,pendingTransactionInput:A,connection:v,accountSigner:o,storage:n,opts:{skipPreflight:!0}});return{type:h,data:J}},Cm="Steps are required",wm="These steps are not from the same bid",Fo=class extends Error{message=Cm},jo=class extends Error{message=wm},Tm=(t,e,r,o)=>{let n=z(),i=oe(),l=H(),c=Ae(),[d,p]=(0,je.useState)("idle"),[m,y]=(0,je.useState)(null),[b,h]=(0,je.useState)(null),{t:S}=_(),C=bm(),{chainId:A,connection:O,chainAddresses:V,isLedger:v}=C,W=A&&B.isSolanaNetworkID(A)?A:ot.Solana.Mainnet,J=hm(e,W);(0,je.useEffect)(function(){d==="loading"&&Vo(l,r)},[d,l,r]),(0,je.useEffect)(function(){d==="success"&&r&&cr(l,{id:r.collectibleId,amount:1})},[d,l,V,r]);let Ye=()=>{p("idle"),y(null),h(null)},ie=o&&r?.receiveAmount?r.receiveAmount*o:void 0;return{executeSellSolanaSteps:async()=>{try{if(t&&t!==r?.orderId)throw new jo;if(!Array.isArray(e)||e.length===0)throw new Fo;p("loading");for await(let ae of e){let gt=await Sm(S,ae,C,c,n,r);h(gt.data),await ga({connection:O,signature:gt.data})}p("success"),i.capture("collectibleSellSuccess",{data:{bidSummary:r,usdSaleValue:ie}})}catch(ae){let gt=ae?.message??"";(!(ae instanceof Fo)||!(ae instanceof jo))&&($.captureError(ae,"collectibles"),i.capture("collectibleSellFailure",{data:{bidSummary:r,usdSaleValue:ie,errorMessage:gt}})),p("error"),y(ae)}},reset:Ye,gas:J,error:m,result:b,status:d,isLedger:v}};s();a();var xm=.01,Am=t=>{let{fungible:e}=Dn({key:Na(t.collectibleChainId,void 0)}),r=e?.data.balance;return{hasEnoughGas:r?r.isGreaterThan(xm):!1}};s();a();var ql=x(E()),vm=t=>t.reduce((e,r)=>({...e,[r]:1}),{});function fi({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:o}){let n=[],i=[],l=[],c=[],d=vm(e),p={};for(let y of t)o(y)&&r(y)?c.push(y):r(y)?i.push(y):d[y.id]?p[y.id]=y:o(y)?l.push(y):n.push(y);let m=[];for(let y of e)p[y]&&m.push(p[y]);return{collections:[...m,...n,...l],hiddenCollections:i,spamCollections:c}}var Em=({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:o})=>(0,ql.useMemo)(()=>fi({allCollections:t,pinnedCollectionIds:e,getIsHidden:r,getIsSpam:o}),[t,r,o,e]);s();a();var $o=x(E()),yi={location:0,distance:50,threshold:.3},NI={...yi,keys:["name"]},VI={...yi,keys:["name"]},_I={...yi,keys:["name"]},Dr=(t,e)=>{if(e===void 0)return!1;let r=t.toLowerCase();return e.toLowerCase().split(" ").map(o=>o.startsWith(r)||r.startsWith(o)&&e.toLowerCase().includes(r)).includes(!0)};var Kl=(t,e)=>(0,$o.useMemo)(()=>({collections:t.filter(o=>Dr(e,o.name||o.items[0].name))}),[e,t]),Im=(t,e,r,o)=>{let n=(0,$o.useMemo)(()=>t.flatMap(i=>i.items),[t]);return(0,$o.useMemo)(()=>{let i=t.filter(p=>Dr(o,p.name)),l=n.filter(p=>Dr(o,p.name)),c=e.filter(p=>Dr(o,p.name)),d=r.filter(p=>Dr(o,p.name));return{collections:i,collectibles:l,hiddenCollections:c,spamCollections:d}},[o,n,t,e,r])};s();a();var At=x(E());var Um=te({seconds:10}),Pm=te({seconds:5});function km({account:t}){let e=t?.identifier??"",r=t?.addresses??[],{data:o=[],isLoading:n}=Dt({addresses:r,queryOptions:{staleTime:Pm,refetchInterval:Um}}),[i,l]=(0,At.useState)(""),c=ks(i)??"",d=(0,At.useCallback)(v=>l(typeof v=="string"?v:v.currentTarget.value),[l]),{getIsHidden:p,getIsSpam:m,getSpamStatus:y,hideCollection:b,unhideCollection:h,isLoading:S}=Bl(e),C=(0,At.useMemo)(()=>{let{collections:v,hiddenCollections:W,spamCollections:J}=fi({allCollections:o,getIsHidden:p,getIsSpam:m});return[...v,...W,...J]},[o]),A=Kl(C,c),O=(0,At.useCallback)(({item:v,status:W})=>W==="show"?h(v):b(v),[h,b]);return{viewState:(0,At.useMemo)(()=>({accountId:e,listItems:c?A.collections:C,searchQuery:i,debouncedSearchQuery:c,handleSearch:d,getIsHidden:p,getIsSpam:m,getSpamStatus:y,onToggleHidden:O}),[e,A.collections,i,d,C,O,p,m,y,c]),viewStateLoading:S||n}}s();a();var me=x(pd());var Om="token-account-min-balances",Wl=me.struct([me.blob(32,"mint"),me.blob(32,"owner"),me.nu64("amount"),me.blob(93)]),ZI=me.struct([me.blob(44),me.u8("decimals"),me.blob(37)]),Mm=me.struct([me.blob(679)]),Rm=me.struct([me.u8("edition"),me.blob(281)]),Bm=async t=>t.getMinimumBalanceForRentExemption(Wl.span).then(fe),Dm=async t=>fe(await t.getMinimumBalanceForRentExemption(Mm.span)+await t.getMinimumBalanceForRentExemption(Rm.span)+await t.getMinimumBalanceForRentExemption(Wl.span));function Nm({tokenEdition:t,connection:e}){return Q({queryKey:[Om,{tokenEdition:t}],queryFn:async()=>e?t===null||!ko(t)?Bm(e):Dm(e):fe(0)})}s();a();var Ql=x(E()),Vm=(t,e,r=!1,o)=>(0,Ql.useMemo)(()=>{if(t)return Go({collectibleMedia:t,isImageAnimationEnabled:r,previewSize:o??"medium",mediaTypeOverride:e})},[t,e,r,o]),Go=({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:r,mediaTypeOverride:o})=>{let n=o??t.type;if((n==="image"||n==="other")&&t.previews?.[r]){let l=e?"":`${r==="medium"?"=":"-"}k`;return`${t.previews[r]}${l}`}return t[n]?.url};s();a();var Xl=x(E());var _m=!1,Lm="small",Fm="image",jm=t=>(0,Xl.useMemo)(()=>Yl(t),[t]),Yl=(t,e=Lm)=>{if(!t)return;let{media:r,collection:o}=t,n=_m,i=Fm;return r?Go({collectibleMedia:r,isImageAnimationEnabled:n,previewSize:e,mediaTypeOverride:i}):o.imageUrl};s();a();var Jl=x(E()),Zl=t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:r})=>r?.type==="image")},$m=t=>(0,Jl.useMemo)(()=>{if(t)return Zl(t)??t.items[0]},[t]);s();a();var ec=x(E());var Gm=t=>(0,ec.useMemo)(()=>{if(!(!t||t.items.length===0))return tc(t)},[t]),tc=t=>{let{items:e}=t,{length:r}=e;if(r===1){let[{balance:o="",chainData:n}]=e;if(ue(n)&&n.standard==="SemiFungible"){let i=parseInt(o,10);return isNaN(i)?1:i}}return r};s();a();s();a();var rc={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},oc=t=>({...rc,resetBurnCollectible:()=>t({...rc}),setBurnCollectibleTx:e=>t({burnCollectibleTx:e}),setBurnCollectibleTxFee:e=>t({burnCollectibleTxFee:e})});s();a();var nc={multichainSellCollectible:void 0},ic=t=>({...nc,resetMultichainSellCollectible:()=>t({...nc}),setMultichainSellCollectible:e=>t({multichainSellCollectible:e})});s();a();var sc={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},ac=t=>({...sc,reset:()=>t({...sc}),setListCollectible:e=>t({listCollectible:e}),setListPrice:e=>t({listCollectiblePrice:e}),setEditListPrice:e=>t({editListCollectiblePrice:e}),setUnlistCollectible:e=>t({unlistCollectible:e}),setTransactionURL:e=>t({transactionURL:e})});s();a();var lc={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},cc=t=>({...lc,reset:()=>t({...lc}),setMultichainListCollectible:e=>t({multichainListCollectible:e}),setMultichainListPrice:e=>t({multichainListCollectiblePrice:e}),setEditMultichainListPrice:e=>t({editMultichainListCollectiblePrice:e}),setUnlistMultichainCollectible:e=>t({unlistMultichainCollectible:e}),setMultichainTransactionURL:e=>t({multichainTransactionURL:e})});var zm=Je((t,e)=>({...ac(t,e),...oc(t,e),...cc(t,e),...ic(t,e)}));s();a();s();a();var Hm=500,uc=M.collections([])[1],qm=[uc,M.hiddenCollections("")[1],M.unhiddenCollections("")[1],M.pinnedCollections("")[1]],Km=t=>{let e=String(t.queryKey[1]);return e===uc?t.state.data?.nrOfItems<=Hm:qm.includes(e)};s();a();var hc=x(E());s();a();s();a();s();a();var dc="#F7931A",Wm=5e4,Qm="https://help.magiceden.io/en/articles/8450002-mastering-utxo-management-extracting-splitting-sats-on-magic-eden-bitcoin",pc={sendSuccessCondition:"SUBMISSION",collectibleDetailPrecision:7,collectibleDetailCtaBanner:(t,e)=>{let r=t.chainData;if(lr(r)&&e){let o=new fe(r.utxoDetails.value??0);if(o.lte(Wm))return;let n=Object.values(r.utxoDetails.satributes).reduce((d,{count:p})=>d+p,0),i=In(n,B.bitcoin.tokenDecimals),l=In(o,B.bitcoin.tokenDecimals),c=Os(l.minus(i).times(e));return{title:Pe.t("collectibleDetailUtxoSplitterCtaTitle"),subtitle:Pe.t("collectibleDetailUtxoSplitterCtaSubtitle",{value:c}),iconFill:dc,modal:{title:Pe.t("collectibleDetailUtxoSplitterModalCtaTitle"),subtitle:Pe.t("collectibleDetailUtxoSplitterModalCtaSubtitle",{value:c}),buttonText:Pe.t("collectibleDetailUtxoSplitterModalCtaButton"),uri:Qm,iconFill:dc}}}}};s();a();var _t={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};s();a();var mc={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};s();a();var fc={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var Xm=new js({solana:mc,ethereum:_t,polygon:_t,base:_t,monad:_t,arbitrum:_t,bitcoin:pc,sui:fc,hypercore:_t}),Lt=Fs(Xm);s();a();var bc=x(E());s();a();var yc=x(En()),gc=({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,yc.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}};var gi=t=>(0,bc.useMemo)(()=>{if(!t)return[];let e=t.chainData;return Ze(e)&&e.utxoDetails?e.utxoDetails.satributes.map(({count:r,displayName:o,description:n,url:i})=>({type:o.toUpperCase(),value:Pe.t(Ym(r,"collectibleDetailSatsCount_one","collectibleDetailSatsCount_other"),{count:r})??"",modal:{name:o,description:n,iconUrl:i}})):t.attributes.map(({trait_type:r,value:o,display_type:n})=>({type:r,value:gc({value:o,type:n})}))},[t]),Ym=(t,e,r)=>t===1?e:r;function Jm(t){let{chain:e,owner:r}=t||{},o=e?.id,{data:n}=io({address:r,networkID:o});Pa(n);let i=gi(t),l=o?B.getChainID(o):void 0,c=l?Ls(l):void 0,{data:d}=Ea({query:c?{data:c}:void 0});return{ctaBanner:(0,hc.useMemo)(()=>{if(!(!t||!d||!l))return Lt.get(l).collectibleDetailCtaBanner?.(t,d.price)},[l,t,d]),traits:i}}s();a();s();a();s();a();s();a();var Sc=x(oo()),Cc=x(oo()),wc=x(Bs()),Tc=({value:t,senderAddress:e,recipient:r,utxoState:{safeToSendUtxos:o},feerate:n,utxoHash:i,utxoIndex:l})=>{let c={transactionHash:i,index:l,value:t,isSafeToSend:!1,owner:e},d=[c],p=[{address:r,value:parseFloat(c.value),script:(0,wc.toOutputScript)(r)}],m=ir(Zt(ot.Bitcoin.Mainnet,e),o,p,n,d),y=new Cc.Psbt({network:Sc.networks.bitcoin});if(m.type==="success"){let{inputs:b,outputs:h}=m;y.addInputs(b.map(S=>fo(S,e,!0))),y.addOutputs(h)}return[y,y.data.inputs.map((b,h)=>({address:e,signingIndexes:[h]})),m.vb]};s();a();var xc=x(oo()),Ac=x(oo()),vc=x(Bs()),Ec=({hash:t,index:e,value:r,senderAddress:o,recipient:n,utxoState:{safeToSendUtxos:i},feerate:l})=>{let c={index:e,transactionHash:t,value:r,isSafeToSend:!1,owner:o},d=[c],p=[{address:n,value:parseFloat(c.value),script:(0,vc.toOutputScript)(n)}],m=ir(Zt(ot.Bitcoin.Mainnet,o),i,p,l,d),y=new Ac.Psbt({network:xc.networks.bitcoin});if(m.type==="success"){let{inputs:h,outputs:S}=m;y.addInputs(h.map(C=>fo(C,o,!0))),y.addOutputs(S)}let b=y.data.inputs.map((h,S)=>({address:o,signingIndexes:[S]}));return[y,b,m.vb]};function Ic({chain:t,owner:e,chainData:r},{recipient:o,transactionSpeed:n="standard"},{utxoState:i,transactionSpeedsToUnitCost:l}){let c,d,p;if(!e)throw new Error("Owner is required");let m=t.id,y=l[n],b=r,h=y,S=Math.round(h?ao(h.btcPerKilobyte).toNumber():Xs);if(ml(b)){let{outputValue:C,utxoHash:A,utxoIndex:O}=b;[c,d,p]=Tc({value:C,senderAddress:e,recipient:o,utxoState:i,feerate:S,utxoHash:A,utxoIndex:O})}else if(lr(b)){let{utxoDetails:C}=b;[c,d,p]=Ec({feerate:S,senderAddress:e,recipient:o,utxoState:i,hash:C.hash,index:C.index,value:C.value.toString()})}else throw new Error("Unsupported bitcoin transfer transaction");return{networkID:m,psbt:c,vb:p,psbtChain:void 0,inputsToSign:d}}s();a();s();a();var Zm=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],Uc=new Error("Error populating ERC721 transaction data."),Pc=async t=>{let{sender:e,networkID:r,destination:o,contractAddress:n,tokenID:i}=t,l=uo(r,n,Zm,e),c;try{let p=await l.populateTransaction.safeTransferFrom(e,o,new fe(i).toString(10));if(p.data)c=p.data;else throw Uc}catch{throw Uc}return St.parse({type:"0x2",from:e,to:n,chainId:B.getEVMNetworkIDValue(r),data:c})};s();a();var ef=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],kc=new Error("Error populating ERC1155 transaction data."),Oc=async t=>{let{sender:e,networkID:r,destination:o,contractAddress:n,tokenID:i,value:l}=t,c=uo(r,n,ef,e),d;try{let m=await c.populateTransaction.safeTransferFrom(e,o,new fe(i).toString(10),l.toString(10),[]);if(m.data)d=m.data;else throw kc}catch{throw kc}return St.parse({type:"0x2",from:e,to:n,chainId:B.getEVMNetworkIDValue(r),data:d})};async function Mc({chain:t,chainData:e,owner:r},{recipient:o,amountAsset:n}){let i=e,l=t.id,c;if(tf(i)){let{contract:d,id:p}=i;c=await Pc({networkID:l,sender:r??"",destination:o,contractAddress:d,tokenID:p})}else if(rf(i)){let{contract:d,id:p}=i;c=await Oc({networkID:l,sender:r??"",destination:o,contractAddress:d,tokenID:p,value:n??"1"})}else throw new Error(`Unsupported EVM collectible type: ${i.standard}`);return{networkID:l,unsignedTransaction:c}}function tf(t){return t.standard==="ERC721"}function rf(t){return t.standard==="ERC1155"}s();a();s();a();s();a();var Ho=class extends Error{constructor(e){super(e),this.name="ProofError"}};async function Rc({networkID:t,mintAddress:e}){let r="/collectibles/v1/proof",o;try{o=await ye.api().post(r,{chainId:t,address:e})}catch{let i=new Ho(`Failed to fetch proof for ${e} on network ${t}.`);throw $.captureError(i,"collectibles"),i}if(o.status!==200){let i=new Ho(`Failed to fetch proof for ${e} on network ${t}.`);throw $.captureError(i,"collectibles"),i}return await o.data}async function Bc({networkID:t,mint:e,recipient:r}){let o=new Ve.Transaction,n=await Rc({networkID:t,mintAddress:e});return o.add(await Ks({...n,destination:r})),o}s();a();async function Dc({networkID:t,destination:e,mint:r,senderAddress:o}){let{createComputeBudgetIx:n,createOCPTransferIX:i,getOCPMintState:l}=await so(),c=st(t),d=new U.PublicKey(r),p=await l(d,c);if(!p)throw new Error("Mint state not found for OCP transfer");ro()&&console.log("This is a Magic Eden Open Creator Protocol Token");let m=new Ve.Transaction;m.add(n());let{destinationAddress:y}=await go({solanaConnection:c,destination:new U.PublicKey(e),mint:d,programId:Ur}),b=new U.PublicKey(o.address),{initAccountIX:h,transferIX:S}=await i({senderAddress:b,destinationAddress:y,mintAddress:d,mintState:p,connection:c});return h&&m.add(h),m.add(S),m}s();a();async function Nc({networkID:t,senderAddress:e,senderAccount:r,destination:o,mint:n}){let i=st(t),l=new U.PublicKey(n),{destinationAddress:c,destinationAccount:d}=await go({solanaConnection:i,destination:new U.PublicKey(o),mint:l,programId:Ur}),{createPNFTTransferIX:p}=await so(),m=new Ve.Transaction,y=new U.PublicKey(e.address),b=new U.PublicKey(r),h=d;if(!h){let[S,C]=await la(y,c,l,Ur);m.add(aa({account:c,owner:U.SystemProgram.programId})),m.add(S),h=C}return m.add(await p({senderAddress:y,tokenAccount:b,destinationAddress:c,destinationAccount:h,mintAddress:l,connection:i})),m}async function Vc(t,e){let{chain:r,owner:o,decimals:n="0"}=t,i=parseFloat(n),{solana:l}=e,{memo:c,references:d}=l,p=r.id,m=st(p),y={networkID:t.chain.id,addressType:"solana",address:t.owner??""};if(!ue(t.chainData))throw new Error("Chain data is not a SolanaCollectibleChainData");let b;if(of(t))b=await Bc({networkID:p,mint:t.chainData.mint,recipient:e.recipient});else if(nf(t))b=await Nc({networkID:p,senderAddress:y,senderAccount:t.chainData.tokenAccount,destination:e.recipient,mint:t.chainData.mint});else if(await sf(t))b=await Dc({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:y});else if(af(t)){let h=Ra(t),S=e.amountAsset.isZero()?"1":e.amountAsset.toFixed();b=await fa({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:y,senderAccount:t.chainData.tokenAccount,decimals:i,programId:t.chainData.programId,amount:S,references:d?.map(C=>C.toString())??[],memo:c??"",transferHookProgramId:h,connection:m})}else throw new Error("Unsupported transferSPLSolana args");return c&&b.add(ma({memoText:c})),b.feePayer=new U.PublicKey(o??""),b=await oa(b,{connection:m}),b.recentBlockhash=(await m.getLatestBlockhash("confirmed")).blockhash,{networkID:p,transaction:[b]}}function of(t){return ue(t.chainData)?"compression"in t.chainData&&!!t.chainData.compression?.compressed:!1}function nf(t){return ue(t.chainData)?"standard"in t.chainData&&(t.chainData.standard==="ProgrammableNonFungible"||t.chainData.standard==="ProgrammableNonFungibleEdition"):!1}async function sf(t){let{chainData:e}=t;if(!ue(e))return!1;let{mint:r}=e,o=st(t.chain.id);return await Qs(new U.PublicKey(r),o)!==null}function af(t){return ue(t.chainData)}s();a();s();a();s();a();s();a();var _c="1.21.2",Lc="1.43.0";s();a();var lf={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},qo=class extends Error{},pr=class extends qo{constructor(e,r){super(e),this.code=r,this.type=lf[r]??"ServerError"}},Ko=class extends qo{constructor(e,r,o){super(e),this.status=r,this.statusText=o}};s();a();var Fc=t=>{throw TypeError(t)},hi=(t,e,r)=>e.has(t)||Fc("Cannot "+r),ne=(t,e,r)=>(hi(t,e,"read from private field"),r?r.call(t):e.get(t)),Ft=(t,e,r)=>e.has(t)?Fc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),mr=(t,e,r,o)=>(hi(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),jc=(t,e,r)=>(hi(t,e,"access private method"),r),cf=(t,e,r,o)=>({set _(n){mr(t,e,n,r)},get _(){return ne(t,e,o)}}),jt,Nr,ct,$t,Vr,fr,Wo,$c,Gc;function uf(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}var df={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},Qo=class{constructor(e,r={}){if(Ft(this,Wo),Ft(this,jt,0),Ft(this,Nr,0),Ft(this,ct,null),Ft(this,$t,null),Ft(this,Vr,new Set),Ft(this,fr,new Map),this.endpoint=e,this.options={...df,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=uf(this.endpoint))}async makeRequest(e,r){let o=await jc(this,Wo,$c).call(this);return new Promise((n,i)=>{mr(this,jt,ne(this,jt)+1),ne(this,fr).set(ne(this,jt),{resolve:n,reject:i,timeout:setTimeout(()=>{ne(this,fr).delete(ne(this,jt)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),o.send(JSON.stringify({jsonrpc:"2.0",id:ne(this,jt),method:e,params:r}))}).then(({error:n,result:i})=>{if(n)throw new pr(n.message,n.code);return i})}async subscribe(e){let r=new bi(e);return ne(this,Vr).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};jt=new WeakMap;Nr=new WeakMap;ct=new WeakMap;$t=new WeakMap;Vr=new WeakMap;fr=new WeakMap;Wo=new WeakSet;$c=function(){return ne(this,$t)?ne(this,$t):(mr(this,$t,new Promise(t=>{ne(this,ct)?.close(),mr(this,ct,new this.options.WebSocketConstructor(this.endpoint)),ne(this,ct).addEventListener("open",()=>{mr(this,Nr,0),t(ne(this,ct))}),ne(this,ct).addEventListener("close",()=>{cf(this,Nr)._++,ne(this,Nr)<=this.options.maxReconnects&&setTimeout(()=>{jc(this,Wo,Gc).call(this)},this.options.reconnectTimeout)}),ne(this,ct).addEventListener("message",({data:e})=>{let r;try{r=JSON.parse(e)}catch(o){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:o}));return}if("id"in r&&r.id!=null&&ne(this,fr).has(r.id)){let{resolve:o,timeout:n}=ne(this,fr).get(r.id);clearTimeout(n),o(r)}else if("params"in r){let{params:o}=r;ne(this,Vr).forEach(n=>{n.subscriptionId===o.subscription&&o.subscription===n.subscriptionId&&n.onMessage(o.result)})}})})),ne(this,$t))};Gc=async function(){return ne(this,ct)?.close(),mr(this,$t,null),Promise.allSettled([...ne(this,Vr)].map(t=>t.subscribe(this)))};var bi=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var zc=t=>{throw TypeError(t)},wi=(t,e,r)=>e.has(t)||zc("Cannot "+r),De=(t,e,r)=>(wi(t,e,"read from private field"),r?r.call(t):e.get(t)),Xo=(t,e,r)=>e.has(t)?zc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Si=(t,e,r,o)=>(wi(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),pf=(t,e,r)=>(wi(t,e,"access private method"),r),_r,$e,Lr,Ci,Hc,Yo=class{constructor(e){Xo(this,Ci),Xo(this,_r,0),Xo(this,$e),Xo(this,Lr),Si(this,$e,e)}fetch(e,r){let o=De(this,$e).fetch??fetch;if(!o)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return o(e,r)}async request(e){Si(this,_r,De(this,_r)+1);let r=await this.fetch(De(this,$e).rpc?.url??De(this,$e).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":_c,"Client-Target-Api-Version":Lc,"Client-Request-Method":e.method,...De(this,$e).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:De(this,_r),method:e.method,params:e.params})});if(!r.ok)throw new Ko(`Unexpected status code: ${r.status}`,r.status,r.statusText);let o=await r.json();if("error"in o&&o.error!=null)throw new pr(o.error.message,o.error.code);return o.result}async subscribe(e){let r=await pf(this,Ci,Hc).call(this).subscribe(e);return async()=>!!await r()}};_r=new WeakMap;$e=new WeakMap;Lr=new WeakMap;Ci=new WeakSet;Hc=function(){if(!De(this,Lr)){let t=De(this,$e).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Si(this,Lr,new Qo(De(this,$e).websocket?.url??De(this,$e).url,{WebSocketConstructor:t,...De(this,$e).websocket}))}return De(this,Lr)};s();a();s();a();s();a();s();a();s();a();function mf(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<t.length;p++){let m=t.charAt(p),y=m.charCodeAt(0);if(e[y]!==255)throw new TypeError(m+" is ambiguous");e[y]=p}let r=t.length,o=t.charAt(0),n=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let m=0,y=0,b=0,h=p.length;for(;b!==h&&p[b]===0;)b++,m++;let S=(h-b)*i+1>>>0,C=new Uint8Array(S);for(;b!==h;){let V=p[b],v=0;for(let W=S-1;(V!==0||v<y)&&W!==-1;W--,v++)V+=256*C[W]>>>0,C[W]=V%r>>>0,V=V/r>>>0;if(V!==0)throw new Error("Non-zero carry");y=v,b++}let A=S-y;for(;A!==S&&C[A]===0;)A++;let O=o.repeat(m);for(;A<S;++A)O+=t.charAt(C[A]);return O}function c(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let m=0,y=0,b=0;for(;p[m]===o;)y++,m++;let h=(p.length-m)*n+1>>>0,S=new Uint8Array(h);for(;p[m];){let V=e[p.charCodeAt(m)];if(V===255)return;let v=0;for(let W=h-1;(V!==0||v<b)&&W!==-1;W--,v++)V+=r*S[W]>>>0,S[W]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");b=v,m++}let C=h-b;for(;C!==h&&S[C]===0;)C++;let A=new Uint8Array(y+(h-C)),O=y;for(;C!==h;)A[O++]=S[C++];return A}function d(p){let m=c(p);if(m)return m;throw new Error("Non-base"+r+" character")}return{encode:l,decodeUnsafe:c,decode:d}}var qc=mf;var ff="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ti=qc(ff);var ut=t=>Ti.encode(t),Ge=t=>Ti.decode(t);s();a();function Se(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}var xi=8192;function ee(t){if(t.length<xi)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=xi){let o=t.slice(r,r+xi);e+=String.fromCharCode(...o)}return btoa(e)}s();a();s();a();function yr(t){let e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,o=r.match(/[0-9a-fA-F]{2}/g)?.map(n=>parseInt(n,16))??[];if(o.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(o)}function rt(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}s();a();s();a();function Gt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function Kc(t){let e=0,r=0,o=0;for(;;){let n=t[o];if(o+=1,e|=(n&127)<<r,!(n&128))break;r+=7}return{value:e,length:o}}var Jo=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),o=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+o).toString(10)}read128(){let e=BigInt(this.read64()),o=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+o).toString(10)}read256(){let e=BigInt(this.read128()),o=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+o).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,o=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),o}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:o,length:n}=Kc(r);return this.shift(n),o}readVec(e){let r=this.readULEB(),o=[];for(let n=0;n<r;n++)o.push(e(this,n,r));return o}};s();a();s();a();function Ai(t,e){switch(e){case"base58":return ut(t);case"base64":return ee(t);case"hex":return rt(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Zo(t,e=["<",">"]){let[r,o]=e,n=[],i="",l=0;for(let c=0;c<t.length;c++){let d=t[c];if(d===r&&l++,d===o&&l--,l===0&&d===","){n.push(i.trim()),i="";continue}i+=d}return n.push(i.trim()),n}var en=class{constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:o=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=o,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let r=this.bytePosition+e;if(r>this.size){let o=Math.min(this.maxSize,this.size+this.allocateSize);if(r>o)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=o;let n=new ArrayBuffer(this.size);new Uint8Array(n).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(n)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return vi(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return vi(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return vi(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Gt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((o,n)=>r(this,o,n,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Ai(this.toBytes(),e)}};function vi(t,e){let r=new Uint8Array(e),o=0;for(;t>0;)r[o]=Number(t%BigInt(256)),t=t/BigInt(256),o+=1;return r}var Wc=t=>{throw TypeError(t)},Qc=(t,e,r)=>e.has(t)||Wc("Cannot "+r),ze=(t,e,r)=>(Qc(t,e,"read from private field"),r?r.call(t):e.get(t)),rn=(t,e,r)=>e.has(t)?Wc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),on=(t,e,r,o)=>(Qc(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),gr,Fr,tn,vt,yf=class Xc{constructor(e){rn(this,gr),rn(this,Fr),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),on(this,gr,e.write),on(this,Fr,e.serialize??((r,o)=>{let n=new en({initialSize:this.serializedSize(r)??void 0,...o});return ze(this,gr).call(this,r,n),n.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),ze(this,gr).call(this,e,r)}serialize(e,r){return this.validate(e),new nn(this,ze(this,Fr).call(this,e,r))}parse(e){let r=new Jo(e);return this.read(r)}fromHex(e){return this.parse(yr(e))}fromBase58(e){return this.parse(Ge(e))}fromBase64(e){return this.parse(Se(e))}transform({name:e,input:r,output:o,validate:n}){return new Xc({name:e??this.name,read:i=>o?o(this.read(i)):this.read(i),write:(i,l)=>ze(this,gr).call(this,r?r(i):i,l),serializedSize:i=>this.serializedSize(r?r(i):i),serialize:(i,l)=>ze(this,Fr).call(this,r?r(i):i,l),validate:i=>{n?.(i),this.validate(r?r(i):i)}})}};gr=new WeakMap;Fr=new WeakMap;var Ne=yf,Yc=Symbol.for("@mysten/serialized-bcs");function br(t){return!!t&&typeof t=="object"&&t[Yc]===!0}var nn=class{constructor(e,r){rn(this,tn),rn(this,vt),on(this,tn,e),on(this,vt,r)}get[Yc](){return!0}toBytes(){return ze(this,vt)}toHex(){return rt(ze(this,vt))}toBase64(){return ee(ze(this,vt))}toBase58(){return ut(ze(this,vt))}parse(){return ze(this,tn).parse(ze(this,vt))}};tn=new WeakMap;vt=new WeakMap;function jr({size:t,...e}){return new Ne({...e,serializedSize:()=>t})}function sn({readMethod:t,writeMethod:e,...r}){return jr({...r,read:o=>o[t](),write:(o,n)=>n[e](o),validate:o=>{if(o<0||o>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${o}. Expected value in range 0-${r.maxValue}`);r.validate?.(o)}})}function an({readMethod:t,writeMethod:e,...r}){return jr({...r,read:o=>o[t](),write:(o,n)=>n[e](BigInt(o)),validate:o=>{let n=BigInt(o);if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);r.validate?.(n)}})}function Jc({serialize:t,...e}){let r=new Ne({...e,serialize:t,write:(o,n)=>{for(let i of r.serialize(o).toBytes())n.write8(i)}});return r}function Zc({toBytes:t,fromBytes:e,...r}){return new Ne({...r,read:o=>{let n=o.readULEB(),i=o.readBytes(n);return e(i)},write:(o,n)=>{let i=t(o);n.writeULEB(i.length);for(let l=0;l<i.length;l++)n.write8(i[l])},serialize:o=>{let n=t(o),i=Gt(n.length),l=new Uint8Array(i.length+n.length);return l.set(i,0),l.set(n,i.length),l},validate:o=>{if(typeof o!="string")throw new TypeError(`Invalid ${r.name} value: ${o}. Expected string`);r.validate?.(o)}})}function eu(t){let e=null;function r(){return e||(e=t()),e}return new Ne({name:"lazy",read:o=>r().read(o),serializedSize:o=>r().serializedSize(o),write:(o,n)=>r().write(o,n),serialize:(o,n)=>r().serialize(o,n).toBytes()})}s();a();var u={u8(t){return sn({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return sn({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return sn({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return an({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return an({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return an({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return jr({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return Jc({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Gt(e)),...t})},bytes(t,e){return jr({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,o)=>{let n=new Uint8Array(r);for(let i=0;i<t;i++)o.write8(n[i]??0)},...e,validate:r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},byteVector(t){return new Ne({name:"bytesVector",read:e=>{let r=e.readULEB();return e.readBytes(r)},write:(e,r)=>{let o=new Uint8Array(e);r.writeULEB(o.length);for(let n=0;n<o.length;n++)r.write8(o[n]??0)},...t,serializedSize:e=>{let r="length"in e?e.length:null;return r==null?null:Gt(r).length+r},validate:e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return Zc({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new Ne({name:`${e.name}[${t}]`,read:o=>{let n=new Array(t);for(let i=0;i<t;i++)n[i]=e.read(o);return n},write:(o,n)=>{for(let i of o)e.write(i,n)},...r,validate:o=>{if(r?.validate?.(o),!o||typeof o!="object"||!("length"in o))throw new TypeError(`Expected array, found ${typeof o}`);if(o.length!==t)throw new TypeError(`Expected array of length ${t}, found ${o.length}`)}})},option(t){return u.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new Ne({name:`vector<${t.name}>`,read:r=>{let o=r.readULEB(),n=new Array(o);for(let i=0;i<o;i++)n[i]=t.read(r);return n},write:(r,o)=>{o.writeULEB(r.length);for(let n of r)t.write(n,o)},...e,validate:r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new Ne({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let o=0;for(let n=0;n<t.length;n++){let i=t[n].serializedSize(r[n]);if(i==null)return null;o+=i}return o},read:r=>{let o=[];for(let n of t)o.push(n.read(r));return o},write:(r,o)=>{for(let n=0;n<t.length;n++)t[n].write(r[n],o)},...e,validate:r=>{if(e?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){let o=Object.entries(e);return new Ne({name:t,serializedSize:n=>{let i=0;for(let[l,c]of o){let d=c.serializedSize(n[l]);if(d==null)return null;i+=d}return i},read:n=>{let i={};for(let[l,c]of o)i[l]=c.read(n);return i},write:(n,i)=>{for(let[l,c]of o)c.write(n[l],i)},...r,validate:n=>{if(r?.validate?.(n),typeof n!="object"||n==null)throw new TypeError(`Expected object, found ${typeof n}`)}})},enum(t,e,r){let o=Object.entries(e);return new Ne({name:t,read:n=>{let i=n.readULEB(),l=o[i];if(!l)throw new TypeError(`Unknown value ${i} for enum ${t}`);let[c,d]=l;return{[c]:d?.read(n)??!0,$kind:c}},write:(n,i)=>{let[l,c]=Object.entries(n).filter(([d])=>Object.hasOwn(e,d))[0];for(let d=0;d<o.length;d++){let[p,m]=o[d];if(p===l){i.writeULEB(d),m?.write(c,i);return}}},...r,validate:n=>{if(r?.validate?.(n),typeof n!="object"||n==null)throw new TypeError(`Expected object, found ${typeof n}`);let i=Object.keys(n).filter(c=>n[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);let[l]=i;if(!Object.hasOwn(e,l))throw new TypeError(`Invalid enum variant ${l}`)}})},map(t,e){return u.vector(u.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{let o=new Map;for(let[n,i]of r)o.set(n,i);return o}})},lazy(t){return eu(t)}};s();a();s();a();s();a();s();a();s();a();var gf=32;function ln(t){try{return Ge(t).length===gf}catch{return!1}}var $r=32;function Oe(t){return bf(t)&&hf(t)===$r}function hr(t){return Oe(t)}function R(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart($r*2,"0")}`}function Ie(t,e=!1){return R(t,e)}function bf(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function hf(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}s();a();var Sf=/^vector<(.+)>$/,Cf=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,dt=class t{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let o=e.match(Sf);if(o)return{vector:t.parseFromStr(o[1],r)};let n=e.match(Cf);if(n)return{struct:{address:r?R(n[1]):n[1],module:n[2],name:n[3],typeParams:n[5]===void 0?[]:t.parseStructTypeArgs(n[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Zo(e).map(o=>t.parseFromStr(o,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let r=e.struct,o=r.typeParams.map(t.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${o?`<${o}>`:""}`}throw new Error("Invalid TypeTag")}};function wf(t){return u.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Tf(t){return u.enum("Option",{None:null,Some:t})}var K=u.bytes($r).transform({validate:t=>{let e=typeof t=="string"?t:rt(t);if(!e||!Oe(R(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?yr(R(t)):t,output:t=>R(rt(t))}),Me=u.vector(u.u8()).transform({name:"ObjectDigest",input:t=>Ge(t),output:t=>ut(new Uint8Array(t)),validate:t=>{if(Ge(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ue=u.struct("SuiObjectRef",{objectId:K,version:u.u64(),digest:Me}),Ei=u.struct("SharedObjectRef",{objectId:K,initialSharedVersion:u.u64(),mutable:u.bool()}),Ii=u.enum("ObjectArg",{ImmOrOwnedObject:Ue,SharedObject:Ei,Receiving:Ue}),Ui=u.enum("CallArg",{Pure:u.struct("Pure",{bytes:u.vector(u.u8()).transform({input:t=>typeof t=="string"?Se(t):t,output:t=>ee(new Uint8Array(t))})}),Object:Ii}),Pi=u.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.lazy(()=>Pi),struct:u.lazy(()=>Di),u16:null,u32:null,u256:null}),cn=Pi.transform({input:t=>typeof t=="string"?dt.parseFromStr(t,!0):t,output:t=>dt.tagToString(t)}),He=u.enum("Argument",{GasCoin:null,Input:u.u16(),Result:u.u16(),NestedResult:u.tuple([u.u16(),u.u16()])}),ki=u.struct("ProgrammableMoveCall",{package:K,module:u.string(),function:u.string(),typeArguments:u.vector(cn),arguments:u.vector(He)}),Oi=u.enum("Command",{MoveCall:ki,TransferObjects:u.struct("TransferObjects",{objects:u.vector(He),address:He}),SplitCoins:u.struct("SplitCoins",{coin:He,amounts:u.vector(He)}),MergeCoins:u.struct("MergeCoins",{destination:He,sources:u.vector(He)}),Publish:u.struct("Publish",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?Se(t):t,output:t=>ee(new Uint8Array(t))})),dependencies:u.vector(K)}),MakeMoveVec:u.struct("MakeMoveVec",{type:Tf(cn).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:u.vector(He)}),Upgrade:u.struct("Upgrade",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?Se(t):t,output:t=>ee(new Uint8Array(t))})),dependencies:u.vector(K),package:K,ticket:He})}),Mi=u.struct("ProgrammableTransaction",{inputs:u.vector(Ui),commands:u.vector(Oi)}),Ri=u.enum("TransactionKind",{ProgrammableTransaction:Mi,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Bi=u.enum("TransactionExpiration",{None:null,Epoch:wf()}),Di=u.struct("StructTag",{address:K,module:u.string(),name:u.string(),typeParams:u.vector(Pi)}),Ni=u.struct("GasData",{payment:u.vector(Ue),owner:K,price:u.u64(),budget:u.u64()}),Vi=u.struct("TransactionDataV1",{kind:Ri,sender:K,gasData:Ni,expiration:Bi}),_i=u.enum("TransactionData",{V1:Vi}),Li=u.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Fi=u.enum("IntentVersion",{V0:null}),ji=u.enum("AppId",{Sui:null}),$i=u.struct("Intent",{scope:Li,version:Fi,appId:ji});function Gi(t){return u.struct(`IntentMessage<${t.name}>`,{intent:$i,value:t})}var zi=u.enum("CompressedSignature",{ED25519:u.fixedArray(64,u.u8()),Secp256k1:u.fixedArray(64,u.u8()),Secp256r1:u.fixedArray(64,u.u8()),ZkLogin:u.vector(u.u8())}),Hi=u.enum("PublicKey",{ED25519:u.fixedArray(32,u.u8()),Secp256k1:u.fixedArray(33,u.u8()),Secp256r1:u.fixedArray(33,u.u8()),ZkLogin:u.vector(u.u8())}),qi=u.struct("MultiSigPkMap",{pubKey:Hi,weight:u.u8()}),Ki=u.struct("MultiSigPublicKey",{pk_map:u.vector(qi),threshold:u.u16()}),tu=u.struct("MultiSig",{sigs:u.vector(zi),bitmap:u.u16(),multisig_pk:Ki}),xf=u.vector(u.u8()).transform({input:t=>typeof t=="string"?Se(t):t,output:t=>ee(new Uint8Array(t))}),Wi=u.struct("SenderSignedTransaction",{intentMessage:Gi(_i),txSignatures:u.vector(xf)}),ru=u.vector(Wi,{name:"SenderSignedData"}),ou=u.struct("PasskeyAuthenticator",{authenticatorData:u.vector(u.u8()),clientDataJson:u.string(),userSignature:u.vector(u.u8())});s();a();var Af=u.enum("PackageUpgradeError",{UnableToFetchPackage:u.struct("UnableToFetchPackage",{packageId:K}),NotAPackage:u.struct("NotAPackage",{objectId:K}),IncompatibleUpgrade:null,DigestDoesNotMatch:u.struct("DigestDoesNotMatch",{digest:u.vector(u.u8())}),UnknownUpgradePolicy:u.struct("UnknownUpgradePolicy",{policy:u.u8()}),PackageIDDoesNotMatch:u.struct("PackageIDDoesNotMatch",{packageId:K,ticketId:K})}),vf=u.struct("ModuleId",{address:K,name:u.string()}),nu=u.struct("MoveLocation",{module:vf,function:u.u16(),instruction:u.u16(),functionName:u.option(u.string())}),Ef=u.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:u.struct("IndexOutOfBounds",{idx:u.u16()}),SecondaryIndexOutOfBounds:u.struct("SecondaryIndexOutOfBounds",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidResultArity:u.struct("InvalidResultArity",{resultIdx:u.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),If=u.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Uf=u.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:u.struct("MoveObjectTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),MovePackageTooBig:u.struct("MovePackageTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),CircularObjectOwnership:u.struct("CircularObjectOwnership",{object:K}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:u.option(nu),MoveAbort:u.tuple([nu,u.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:u.struct("CommandArgumentError",{argIdx:u.u16(),kind:Ef}),TypeArgumentError:u.struct("TypeArgumentError",{argumentIdx:u.u16(),kind:If}),UnusedValueWithoutDrop:u.struct("UnusedValueWithoutDrop",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidPublicFunctionReturnType:u.struct("InvalidPublicFunctionReturnType",{idx:u.u16()}),InvalidTransferObject:null,EffectsTooLarge:u.struct("EffectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:u.struct("PackageUpgradeError",{upgradeError:Af}),WrittenObjectsTooLarge:u.struct("WrittenObjectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:u.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:u.vector(K)}),AddressDeniedForCoin:u.struct("AddressDeniedForCoin",{address:K,coinType:u.string()}),CoinTypeGlobalPause:u.struct("CoinTypeGlobalPause",{coinType:u.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),iu=u.enum("ExecutionStatus",{Success:null,Failed:u.struct("ExecutionFailed",{error:Uf,command:u.option(u.u64())})}),su=u.struct("GasCostSummary",{computationCost:u.u64(),storageCost:u.u64(),storageRebate:u.u64(),nonRefundableStorageFee:u.u64()}),Sr=u.enum("Owner",{AddressOwner:K,ObjectOwner:K,Shared:u.struct("Shared",{initialSharedVersion:u.u64()}),Immutable:null}),Pf=u.struct("TransactionEffectsV1",{status:iu,executedEpoch:u.u64(),gasUsed:su,modifiedAtVersions:u.vector(u.tuple([K,u.u64()])),sharedObjects:u.vector(Ue),transactionDigest:Me,created:u.vector(u.tuple([Ue,Sr])),mutated:u.vector(u.tuple([Ue,Sr])),unwrapped:u.vector(u.tuple([Ue,Sr])),deleted:u.vector(Ue),unwrappedThenDeleted:u.vector(Ue),wrapped:u.vector(Ue),gasObject:u.tuple([Ue,Sr]),eventsDigest:u.option(Me),dependencies:u.vector(Me)}),Qi=u.tuple([u.u64(),Me]),kf=u.enum("ObjectIn",{NotExist:null,Exist:u.tuple([Qi,Sr])}),Of=u.enum("ObjectOut",{NotExist:null,ObjectWrite:u.tuple([Me,Sr]),PackageWrite:Qi}),Mf=u.enum("IDOperation",{None:null,Created:null,Deleted:null}),Rf=u.struct("EffectsObjectChange",{inputState:kf,outputState:Of,idOperation:Mf}),Bf=u.enum("UnchangedSharedKind",{ReadOnlyRoot:Qi,MutateDeleted:u.u64(),ReadDeleted:u.u64(),Cancelled:u.u64(),PerEpochConfig:null}),Df=u.struct("TransactionEffectsV2",{status:iu,executedEpoch:u.u64(),gasUsed:su,transactionDigest:Me,gasObjectIndex:u.option(u.u32()),eventsDigest:u.option(Me),dependencies:u.vector(Me),lamportVersion:u.u64(),changedObjects:u.vector(u.tuple([K,Rf])),unchangedSharedObjects:u.vector(u.tuple([K,Bf])),auxDataDigest:u.option(Me)}),au=u.enum("TransactionEffects",{V1:Pf,V2:Df});s();a();function Cr(t){switch(t){case"u8":return u.u8();case"u16":return u.u16();case"u32":return u.u32();case"u64":return u.u64();case"u128":return u.u128();case"u256":return u.u256();case"bool":return u.bool();case"string":return u.string();case"id":case"address":return K}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[r,o]=e.slice(1);return r==="vector"?u.vector(Cr(o)):u.option(Cr(o))}throw new Error(`Invalid Pure type name: ${t}`)}var D={...u,U8:u.u8(),U16:u.u16(),U32:u.u32(),U64:u.u64(),U128:u.u128(),U256:u.u256(),ULEB128:u.uleb128(),Bool:u.bool(),String:u.string(),Address:K,AppId:ji,Argument:He,CallArg:Ui,CompressedSignature:zi,GasData:Ni,Intent:$i,IntentMessage:Gi,IntentScope:Li,IntentVersion:Fi,MultiSig:tu,MultiSigPkMap:qi,MultiSigPublicKey:Ki,ObjectArg:Ii,ObjectDigest:Me,ProgrammableMoveCall:ki,ProgrammableTransaction:Mi,PublicKey:Hi,SenderSignedData:ru,SenderSignedTransaction:Wi,SharedObjectRef:Ei,StructTag:Di,SuiObjectRef:Ue,Command:Oi,TransactionData:_i,TransactionDataV1:Vi,TransactionExpiration:Bi,TransactionKind:Ri,TypeTag:cn,TransactionEffects:au,PasskeyAuthenticator:ou};s();a();s();a();var Nf=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Vf=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function lu(t,e="at"){let r=t.toLowerCase(),o;if(r.includes("@")){if(!Nf.test(r))throw new Error(`Invalid SuiNS name ${t}`);let[n,i]=r.split("@");o=[...n?n.split("."):[],i]}else{if(!Vf.test(r))throw new Error(`Invalid SuiNS name ${t}`);o=r.split(".").slice(0,-1)}return e==="dot"?`${o.join(".")}.sui`:`${o.slice(0,-1).join(".")}@${o[o.length-1]}`}s();a();var _f=BigInt(1e9),Xi="0x1",un="0x2";var Lf=Ie("0x6");var Yi=`${un}::sui::SUI`,Ff=Ie("0x5");s();a();s();a();s();a();function dn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function jf(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Ji(t,...e){if(!jf(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Zi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function cu(t,e){Ji(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}s();a();var wr=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));var Et=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,uu=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,qe=Et?t=>t:t=>uu(t);function zt(t){for(let e=0;e<t.length;e++)t[e]=uu(t[e])}function $f(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ht(t){return typeof t=="string"&&(t=$f(t)),Ji(t),t}var pn=class{clone(){return this._cloneInto()}},SR={}.toString;function du(t){let e=(o,n)=>t(n).update(Ht(o)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=o=>t(o),e}var pu=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),mn=class extends pn{constructor(e,r,o={},n,i,l){if(super(),this.blockLen=e,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,dn(e),dn(r),dn(n),r<0||r>n)throw new Error("outputLen bigger than keyLen");if(o.key!==void 0&&(o.key.length<1||o.key.length>n))throw new Error(`key must be up 1..${n} byte long or undefined`);if(o.salt!==void 0&&o.salt.length!==i)throw new Error(`salt must be ${i} byte long or undefined`);if(o.personalization!==void 0&&o.personalization.length!==l)throw new Error(`personalization must be ${l} byte long or undefined`);this.buffer32=wr(this.buffer=new Uint8Array(e))}update(e){Zi(this);let{blockLen:r,buffer:o,buffer32:n}=this;e=Ht(e);let i=e.length,l=e.byteOffset,c=e.buffer;for(let d=0;d<i;){this.pos===r&&(Et||zt(n),this.compress(n,0,!1),Et||zt(n),this.pos=0);let p=Math.min(r-this.pos,i-d),m=l+d;if(p===r&&!(m%4)&&d+p<i){let y=new Uint32Array(c,m,Math.floor((i-d)/4));Et||zt(y);for(let b=0;d+r<i;b+=n.length,d+=r)this.length+=r,this.compress(y,b,!1);Et||zt(y);continue}o.set(e.subarray(d,d+p),this.pos),this.pos+=p,this.length+=p,d+=p}return this}digestInto(e){Zi(this),cu(e,this);let{pos:r,buffer32:o}=this;this.finished=!0,this.buffer.subarray(r).fill(0),Et||zt(o),this.compress(o,0,!0),Et||zt(o);let n=wr(e);this.get().forEach((i,l)=>n[l]=qe(i))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let o=e.slice(0,r);return this.destroy(),o}_cloneInto(e){let{buffer:r,length:o,finished:n,destroyed:i,outputLen:l,pos:c}=this;return e||(e=new this.constructor({dkLen:l})),e.set(...this.get()),e.length=o,e.finished=n,e.destroyed=i,e.outputLen=l,e.buffer.set(r),e.pos=c,e}};s();a();var fn=BigInt(4294967295),es=BigInt(32);function mu(t,e=!1){return e?{h:Number(t&fn),l:Number(t>>es&fn)}:{h:Number(t>>es&fn)|0,l:Number(t&fn)|0}}function Gf(t,e=!1){let r=new Uint32Array(t.length),o=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:i,l}=mu(t[n],e);[r[n],o[n]]=[i,l]}return[r,o]}var zf=(t,e)=>BigInt(t>>>0)<<es|BigInt(e>>>0),Hf=(t,e,r)=>t>>>r,qf=(t,e,r)=>t<<32-r|e>>>r,Kf=(t,e,r)=>t>>>r|e<<32-r,Wf=(t,e,r)=>t<<32-r|e>>>r,Qf=(t,e,r)=>t<<64-r|e>>>r-32,Xf=(t,e,r)=>t>>>r-32|e<<64-r,Yf=(t,e)=>e,Jf=(t,e)=>t,Zf=(t,e,r)=>t<<r|e>>>32-r,ey=(t,e,r)=>e<<r|t>>>32-r,ty=(t,e,r)=>e<<r-32|t>>>64-r,ry=(t,e,r)=>t<<r-32|e>>>64-r;function oy(t,e,r,o){let n=(e>>>0)+(o>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}var ny=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),iy=(t,e,r,o)=>e+r+o+(t/2**32|0)|0,sy=(t,e,r,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),ay=(t,e,r,o,n)=>e+r+o+n+(t/2**32|0)|0,ly=(t,e,r,o,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0)+(n>>>0),cy=(t,e,r,o,n,i)=>e+r+o+n+i+(t/2**32|0)|0;var uy={fromBig:mu,split:Gf,toBig:zf,shrSH:Hf,shrSL:qf,rotrSH:Kf,rotrSL:Wf,rotrBH:Qf,rotrBL:Xf,rotr32H:Yf,rotr32L:Jf,rotlSH:Zf,rotlSL:ey,rotlBH:ty,rotlBL:ry,add:oy,add3L:ny,add3H:iy,add4L:sy,add4H:ay,add5H:cy,add5L:ly},Ce=uy;var de=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),T=new Uint32Array(32);function It(t,e,r,o,n,i){let l=n[i],c=n[i+1],d=T[2*t],p=T[2*t+1],m=T[2*e],y=T[2*e+1],b=T[2*r],h=T[2*r+1],S=T[2*o],C=T[2*o+1],A=Ce.add3L(d,m,l);p=Ce.add3H(A,p,y,c),d=A|0,{Dh:C,Dl:S}={Dh:C^p,Dl:S^d},{Dh:C,Dl:S}={Dh:Ce.rotr32H(C,S),Dl:Ce.rotr32L(C,S)},{h,l:b}=Ce.add(h,b,C,S),{Bh:y,Bl:m}={Bh:y^h,Bl:m^b},{Bh:y,Bl:m}={Bh:Ce.rotrSH(y,m,24),Bl:Ce.rotrSL(y,m,24)},T[2*t]=d,T[2*t+1]=p,T[2*e]=m,T[2*e+1]=y,T[2*r]=b,T[2*r+1]=h,T[2*o]=S,T[2*o+1]=C}function Ut(t,e,r,o,n,i){let l=n[i],c=n[i+1],d=T[2*t],p=T[2*t+1],m=T[2*e],y=T[2*e+1],b=T[2*r],h=T[2*r+1],S=T[2*o],C=T[2*o+1],A=Ce.add3L(d,m,l);p=Ce.add3H(A,p,y,c),d=A|0,{Dh:C,Dl:S}={Dh:C^p,Dl:S^d},{Dh:C,Dl:S}={Dh:Ce.rotrSH(C,S,16),Dl:Ce.rotrSL(C,S,16)},{h,l:b}=Ce.add(h,b,C,S),{Bh:y,Bl:m}={Bh:y^h,Bl:m^b},{Bh:y,Bl:m}={Bh:Ce.rotrBH(y,m,63),Bl:Ce.rotrBL(y,m,63)},T[2*t]=d,T[2*t+1]=p,T[2*e]=m,T[2*e+1]=y,T[2*r]=b,T[2*r+1]=h,T[2*o]=S,T[2*o+1]=C}var ts=class extends mn{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=de[0]|0,this.v0h=de[1]|0,this.v1l=de[2]|0,this.v1h=de[3]|0,this.v2l=de[4]|0,this.v2h=de[5]|0,this.v3l=de[6]|0,this.v3h=de[7]|0,this.v4l=de[8]|0,this.v4h=de[9]|0,this.v5l=de[10]|0,this.v5h=de[11]|0,this.v6l=de[12]|0,this.v6h=de[13]|0,this.v7l=de[14]|0,this.v7h=de[15]|0;let r=e.key?e.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,e.salt){let o=wr(Ht(e.salt));this.v4l^=qe(o[0]),this.v4h^=qe(o[1]),this.v5l^=qe(o[2]),this.v5h^=qe(o[3])}if(e.personalization){let o=wr(Ht(e.personalization));this.v6l^=qe(o[0]),this.v6h^=qe(o[1]),this.v7l^=qe(o[2]),this.v7h^=qe(o[3])}if(e.key){let o=new Uint8Array(this.blockLen);o.set(Ht(e.key)),this.update(o)}}get(){let{v0l:e,v0h:r,v1l:o,v1h:n,v2l:i,v2h:l,v3l:c,v3h:d,v4l:p,v4h:m,v5l:y,v5h:b,v6l:h,v6h:S,v7l:C,v7h:A}=this;return[e,r,o,n,i,l,c,d,p,m,y,b,h,S,C,A]}set(e,r,o,n,i,l,c,d,p,m,y,b,h,S,C,A){this.v0l=e|0,this.v0h=r|0,this.v1l=o|0,this.v1h=n|0,this.v2l=i|0,this.v2h=l|0,this.v3l=c|0,this.v3h=d|0,this.v4l=p|0,this.v4h=m|0,this.v5l=y|0,this.v5h=b|0,this.v6l=h|0,this.v6h=S|0,this.v7l=C|0,this.v7h=A|0}compress(e,r,o){this.get().forEach((d,p)=>T[p]=d),T.set(de,16);let{h:n,l:i}=Ce.fromBig(BigInt(this.length));T[24]=de[8]^i,T[25]=de[9]^n,o&&(T[28]=~T[28],T[29]=~T[29]);let l=0,c=pu;for(let d=0;d<12;d++)It(0,4,8,12,e,r+2*c[l++]),Ut(0,4,8,12,e,r+2*c[l++]),It(1,5,9,13,e,r+2*c[l++]),Ut(1,5,9,13,e,r+2*c[l++]),It(2,6,10,14,e,r+2*c[l++]),Ut(2,6,10,14,e,r+2*c[l++]),It(3,7,11,15,e,r+2*c[l++]),Ut(3,7,11,15,e,r+2*c[l++]),It(0,5,10,15,e,r+2*c[l++]),Ut(0,5,10,15,e,r+2*c[l++]),It(1,6,11,12,e,r+2*c[l++]),Ut(1,6,11,12,e,r+2*c[l++]),It(2,7,8,13,e,r+2*c[l++]),Ut(2,7,8,13,e,r+2*c[l++]),It(3,4,9,14,e,r+2*c[l++]),Ut(3,4,9,14,e,r+2*c[l++]);this.v0l^=T[0]^T[16],this.v0h^=T[1]^T[17],this.v1l^=T[2]^T[18],this.v1h^=T[3]^T[19],this.v2l^=T[4]^T[20],this.v2h^=T[5]^T[21],this.v3l^=T[6]^T[22],this.v3h^=T[7]^T[23],this.v4l^=T[8]^T[24],this.v4h^=T[9]^T[25],this.v5l^=T[10]^T[26],this.v5h^=T[11]^T[27],this.v6l^=T[12]^T[28],this.v6h^=T[13]^T[29],this.v7l^=T[14]^T[30],this.v7h^=T[15]^T[31],T.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},fu=du(t=>new ts(t));var dy="object",py="ID",my="ascii",fy="String",yy="string",gy="String",by="option",hy="Option";function yu(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&R(e.package)===R("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function yn(t){if(typeof t=="string")switch(t){case"address":return D.Address;case"bool":return D.Bool;case"u8":return D.U8;case"u16":return D.U16;case"u32":return D.U32;case"u64":return D.U64;case"u128":return D.U128;case"u256":return D.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return D.vector(D.U8).transform({input:r=>typeof r=="string"?new TextEncoder().encode(r):r,output:r=>r});let e=yn(t.vector);return e?D.vector(e):null}if("datatype"in t){let e=R(t.datatype.package);if(e===R(Xi)){if(t.datatype.module===my&&t.datatype.type===fy)return D.String;if(t.datatype.module===yy&&t.datatype.type===gy)return D.String;if(t.datatype.module===by&&t.datatype.type===hy){let r=yn(t.datatype.typeParameters[0]);return r?D.vector(r):null}}if(e===R(un)&&t.datatype.module===dy&&t.datatype.type===py)return D.Address}return null}function gu(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Gr(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Gr(t.MutableReference)}:{ref:null,body:Gr(t)}}function Gr(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Gr(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Gr)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}s();a();function Sy(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?ee(t):t.toBase64()}}}var Ke={Pure:Sy,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:R(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:R(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:R(t)}}}}};s();a();s();a();function kt(t){let e=Object.entries(t).map(([r,o])=>w({[r]:o}));return G(ce(e),po(r=>({...r,$kind:Object.keys(r)[0]})))}var qt=G(k(),po(t=>R(t)),er(Oe)),Te=qt,Pt=k(),we=G(ce([k(),G(Y(),Z())]),er(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),We=w({objectId:qt,version:we,digest:k()}),X=G(ce([w({GasCoin:P(!0)}),w({Input:G(Y(),Z()),type:pe(P("pure"))}),w({Input:G(Y(),Z()),type:pe(P("object"))}),w({Result:G(Y(),Z())}),w({NestedResult:mo([G(Y(),Z()),G(Y(),Z())])})]),po(t=>({...t,$kind:Object.keys(t)[0]}))),Cy=w({budget:F(we),price:F(we),owner:F(qt),payment:F(I(We))}),sB=w({address:k(),module:k(),name:k(),typeParams:I(k())}),rs=ce([P("address"),P("bool"),P("u8"),P("u16"),P("u32"),P("u64"),P("u128"),P("u256"),w({vector:rr(()=>rs)}),w({datatype:w({package:k(),module:k(),type:k(),typeParameters:I(rr(()=>rs))})}),w({typeParameter:G(Y(),Z())})]),wy=w({ref:F(ce([P("&"),P("&mut")])),body:rs}),Ty=w({package:Te,module:k(),function:k(),typeArguments:I(k()),arguments:I(X),_argumentTypes:pe(F(I(wy)))}),xy=w({name:k(),inputs:or(k(),ce([X,I(X)])),data:or(k(),it())}),Ay=kt({MoveCall:Ty,TransferObjects:w({objects:I(X),address:X}),SplitCoins:w({coin:X,amounts:I(X)}),MergeCoins:w({destination:X,sources:I(X)}),Publish:w({modules:I(Pt),dependencies:I(Te)}),MakeMoveVec:w({type:F(k()),elements:I(X)}),Upgrade:w({modules:I(Pt),dependencies:I(Te),package:Te,ticket:X}),$Intent:xy}),bu=kt({ImmOrOwnedObject:We,SharedObject:w({objectId:Te,initialSharedVersion:we,mutable:tr()}),Receiving:We}),vy=kt({Object:bu,Pure:w({bytes:Pt}),UnresolvedPure:w({value:it()}),UnresolvedObject:w({objectId:Te,version:pe(F(we)),digest:pe(F(k())),initialSharedVersion:pe(F(we))})}),os=kt({Object:bu,Pure:w({bytes:Pt})}),ns=kt({None:P(!0),Epoch:we}),Tr=w({version:P(2),sender:wt(qt),expiration:wt(ns),gasData:Cy,inputs:I(vy),commands:I(Ay)});var Ot={MoveCall(t){let[e,r="",o=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:o,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>q(X,r)),address:q(X,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:q(X,t),amounts:e.map(r=>q(X,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:q(X,t),sources:e.map(r=>q(X,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:ee(new Uint8Array(r))),dependencies:e.map(r=>Ie(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:o}){return{$kind:"Upgrade",Upgrade:{modules:t.map(n=>typeof n=="string"?n:ee(new Uint8Array(n))),dependencies:e.map(n=>Ie(n)),package:r,ticket:q(X,o)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>q(X,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([o,n])=>[o,Array.isArray(n)?n.map(i=>q(X,i)):q(X,n)])),data:r}}}};s();a();s();a();var is=w({digest:k(),objectId:k(),version:ce([G(Y(),Z()),k(),Pn()])}),Ey=kt({ImmOrOwned:is,Shared:w({objectId:Te,initialSharedVersion:we,mutable:tr()}),Receiving:is}),hu=kt({Object:Ey,Pure:I(G(Y(),Z()))}),Cu=ce([w({kind:P("Input"),index:G(Y(),Z()),value:it(),type:pe(P("object"))}),w({kind:P("Input"),index:G(Y(),Z()),value:it(),type:P("pure")})]),Iy=ce([w({Epoch:G(Y(),Z())}),w({None:F(P(!0))})]),Su=G(ce([Y(),k(),Pn()]),er(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),ss=ce([w({bool:F(P(!0))}),w({u8:F(P(!0))}),w({u64:F(P(!0))}),w({u128:F(P(!0))}),w({address:F(P(!0))}),w({signer:F(P(!0))}),w({vector:rr(()=>ss)}),w({struct:rr(()=>Uy)}),w({u16:F(P(!0))}),w({u32:F(P(!0))}),w({u256:F(P(!0))})]),Uy=w({address:k(),module:k(),name:k(),typeParams:I(ss)}),Py=w({budget:pe(Su),price:pe(Su),payment:pe(I(is)),owner:pe(k())}),ky=[Cu,w({kind:P("GasCoin")}),w({kind:P("Result"),index:G(Y(),Z())}),w({kind:P("NestedResult"),index:G(Y(),Z()),resultIndex:G(Y(),Z())})],ft=ce([...ky]),Oy=w({kind:P("MoveCall"),target:G(k(),er(t=>t.split("::").length===3)),typeArguments:I(k()),arguments:I(ft)}),My=w({kind:P("TransferObjects"),objects:I(ft),address:ft}),Ry=w({kind:P("SplitCoins"),coin:ft,amounts:I(ft)}),By=w({kind:P("MergeCoins"),destination:ft,sources:I(ft)}),Dy=w({kind:P("MakeMoveVec"),type:ce([w({Some:ss}),w({None:F(P(!0))})]),objects:I(ft)}),Ny=w({kind:P("Publish"),modules:I(I(G(Y(),Z()))),dependencies:I(k())}),Vy=w({kind:P("Upgrade"),modules:I(I(G(Y(),Z()))),dependencies:I(k()),packageId:k(),ticket:ft}),_y=[Oy,My,Ry,By,Ny,Vy,Dy],Ly=ce([..._y]),wB=w({version:P(1),sender:pe(k()),expiration:wt(Iy),gasConfig:Py,inputs:I(Cu),transactions:I(Ly)});function as(t){let e=t.inputs.map((r,o)=>{if(r.Object)return{kind:"Input",index:o,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:o,value:{Pure:Array.from(Se(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:o,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:o,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:dt.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(o=>pt(o,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:pt(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(o=>pt(o,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(o=>pt(o,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(o=>Array.from(Se(o))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:pt(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(o=>pt(o,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(o=>pt(o,e)),address:pt(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(o=>Array.from(Se(o))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:pt(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}function pt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function wu(t){return q(Tr,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(Ir(hu,e.value)){let r=q(hu,e.value);if(r.Object){if(r.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:r.Object.ImmOrOwned.objectId,version:String(r.Object.ImmOrOwned.version),digest:r.Object.ImmOrOwned.digest}}};if(r.Object.Shared)return{Object:{SharedObject:{mutable:r.Object.Shared.mutable??null,initialSharedVersion:r.Object.Shared.initialSharedVersion,objectId:r.Object.Shared.objectId}}};if(r.Object.Receiving)return{Object:{Receiving:{digest:r.Object.Receiving.digest,version:String(r.Object.Receiving.version),objectId:r.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:ee(new Uint8Array(r.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?dt.tagToString(e.type.Some):null,elements:e.objects.map(r=>mt(r))}};case"MergeCoins":return{MergeCoins:{destination:mt(e.destination),sources:e.sources.map(r=>mt(r))}};case"MoveCall":{let[r,o,n]=e.target.split("::");return{MoveCall:{package:r,module:o,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map(i=>mt(i))}}}case"Publish":return{Publish:{modules:e.modules.map(r=>ee(Uint8Array.from(r))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:mt(e.coin),amounts:e.amounts.map(r=>mt(r))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(r=>mt(r)),address:mt(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(r=>ee(Uint8Array.from(r))),dependencies:e.dependencies,package:e.packageId,ticket:mt(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}function mt(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}s();a();function zr(t){return ce(Object.entries(t).map(([e,r])=>w({[e]:r})))}var Qe=zr({GasCoin:P(!0),Input:G(Y(),Z()),Result:G(Y(),Z()),NestedResult:mo([G(Y(),Z()),G(Y(),Z())])}),Fy=w({budget:F(we),price:F(we),owner:F(qt),payment:F(I(We))}),jy=w({package:Te,module:k(),function:k(),typeArguments:I(k()),arguments:I(Qe)}),$y=w({name:k(),inputs:or(k(),ce([Qe,I(Qe)])),data:or(k(),it())}),Gy=zr({MoveCall:jy,TransferObjects:w({objects:I(Qe),address:Qe}),SplitCoins:w({coin:Qe,amounts:I(Qe)}),MergeCoins:w({destination:Qe,sources:I(Qe)}),Publish:w({modules:I(Pt),dependencies:I(Te)}),MakeMoveVec:w({type:F(k()),elements:I(Qe)}),Upgrade:w({modules:I(Pt),dependencies:I(Te),package:Te,ticket:Qe}),$Intent:$y}),zy=zr({ImmOrOwnedObject:We,SharedObject:w({objectId:Te,initialSharedVersion:we,mutable:tr()}),Receiving:We}),Hy=zr({Object:zy,Pure:w({bytes:Pt}),UnresolvedPure:w({value:it()}),UnresolvedObject:w({objectId:Te,version:pe(F(we)),digest:pe(F(k())),initialSharedVersion:pe(F(we))})}),qy=zr({None:P(!0),Epoch:we}),Tu=w({version:P(2),sender:wt(qt),expiration:wt(qy),gasData:Fy,inputs:I(Hy),commands:I(Gy)});s();a();var Ky=50,Wy=1000n,Qy=5e10;async function Au(t,e,r){return await eg(t,e),await Zy(t,e),e.onlyTransactionKind||(await Xy(t,e),await Yy(t,e),await Jy(t,e)),await tg(t),await r()}async function Xy(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Hr(e).getReferenceGasPrice()))}async function Yy(t,e){if(t.gasConfig.budget)return;let r=await Hr(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(Qy),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let o=Wy*BigInt(t.gasConfig.price||1n),n=BigInt(r.effects.gasUsed.computationCost)+o,i=n+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>n?i:n)}async function Jy(t,e){if(!t.gasConfig.payment){let o=(await Hr(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:Yi})).data.filter(n=>!t.inputs.find(l=>l.Object?.ImmOrOwnedObject?n.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1)).map(n=>({objectId:n.coinObjectId,digest:n.digest,version:n.version}));if(!o.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=o.map(n=>q(We,n))}}async function Zy(t,e){let r=t.inputs.filter(m=>m.UnresolvedObject&&!(m.UnresolvedObject.version||m.UnresolvedObject?.initialSharedVersion)),o=[...new Set(r.map(m=>Ie(m.UnresolvedObject.objectId)))],n=o.length?ig(o,Ky):[],i=(await Promise.all(n.map(m=>Hr(e).multiGetObjects({ids:m,options:{showOwner:!0}})))).flat(),l=new Map(o.map((m,y)=>[m,i[y]])),c=Array.from(l).filter(([m,y])=>y.error).map(([m,y])=>JSON.stringify(y.error));if(c.length)throw new Error(`The following input objects are invalid: ${c.join(", ")}`);let d=i.map(m=>{if(m.error||!m.data)throw new Error(`Failed to fetch object: ${m.error}`);let y=m.data.owner,b=y&&typeof y=="object"&&"Shared"in y?y.Shared.initial_shared_version:null;return{objectId:m.data.objectId,digest:m.data.digest,version:m.data.version,initialSharedVersion:b}}),p=new Map(o.map((m,y)=>[m,d[y]]));for(let[m,y]of t.inputs.entries()){if(!y.UnresolvedObject)continue;let b,h=R(y.UnresolvedObject.objectId),S=p.get(h);y.UnresolvedObject.initialSharedVersion??S?.initialSharedVersion?b=Ke.SharedObjectRef({objectId:h,initialSharedVersion:y.UnresolvedObject.initialSharedVersion||S?.initialSharedVersion,mutable:rg(t,m)}):og(t,m)&&(b=Ke.ReceivingRef({objectId:h,digest:y.UnresolvedObject.digest??S?.digest,version:y.UnresolvedObject.version??S?.version})),t.inputs[t.inputs.indexOf(y)]=b??Ke.ObjectRef({objectId:h,digest:y.UnresolvedObject.digest??S?.digest,version:y.UnresolvedObject.version??S?.version})}}async function eg(t,e){let{inputs:r,commands:o}=t,n=[],i=new Set;o.forEach(c=>{if(c.MoveCall){if(c.MoveCall._argumentTypes)return;if(c.MoveCall.arguments.map(m=>m.$kind==="Input"?t.inputs[m.Input]:null).some(m=>m?.UnresolvedPure||m?.UnresolvedObject)){let m=`${c.MoveCall.package}::${c.MoveCall.module}::${c.MoveCall.function}`;i.add(m),n.push(c.MoveCall)}}switch(c.$kind){case"SplitCoins":c.SplitCoins.amounts.forEach(d=>{xu(d,D.U64,t)});break;case"TransferObjects":xu(c.TransferObjects.address,D.Address,t);break}});let l=new Map;if(i.size>0){let c=Hr(e);await Promise.all([...i].map(async d=>{let[p,m,y]=d.split("::"),b=await c.getNormalizedMoveFunction({package:p,module:m,function:y});l.set(d,b.parameters.map(h=>gu(h)))}))}n.length&&await Promise.all(n.map(async c=>{let d=l.get(`${c.package}::${c.module}::${c.function}`);if(!d)return;let m=d.length>0&&yu(d.at(-1))?d.slice(0,d.length-1):d;c._argumentTypes=m})),o.forEach(c=>{if(!c.MoveCall)return;let d=c.MoveCall,p=`${d.package}::${d.module}::${d.function}`,m=d._argumentTypes;if(m){if(m.length!==c.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${p}`);m.forEach((y,b)=>{let h=d.arguments[b];if(h.$kind!=="Input")return;let S=r[h.Input];if(!S.UnresolvedPure&&!S.UnresolvedObject)return;let C=S.UnresolvedPure?.value??S.UnresolvedObject?.objectId,A=yn(y.body);if(A){h.type="pure",r[r.indexOf(S)]=Ke.Pure(A.serialize(C));return}if(typeof C!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(C,null,2)}`);h.type="object";let O=S.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:C}}:S;r[h.Input]=O})}})}function tg(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function xu(t,e,r){if(t.$kind!=="Input")return;let o=r.inputs[t.Input];o.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=Ke.Pure(e.serialize(o.UnresolvedPure.value)))}function rg(t,e){let r=!1;return t.getInputUses(e,(o,n)=>{if(n.MoveCall&&n.MoveCall._argumentTypes){let i=n.MoveCall.arguments.indexOf(o);r=n.MoveCall._argumentTypes[i].ref!=="&"||r}(n.$kind==="MakeMoveVec"||n.$kind==="MergeCoins"||n.$kind==="SplitCoins")&&(r=!0)}),r}function og(t,e){let r=!1;return t.getInputUses(e,(o,n)=>{if(n.MoveCall&&n.MoveCall._argumentTypes){let i=n.MoveCall.arguments.indexOf(o);r=ng(n.MoveCall._argumentTypes[i])||r}}),r}function ng(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function Hr(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function ig(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,o)=>t.slice(o*e,o*e+e))}s();a();function vu(t){function e(r){return t(r)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:o})=>n=>n.moveCall({typeArguments:[r],target:`0x1::option::${o===null?"none":"some"}`,arguments:o===null?[]:[n.object(o)]}),e}s();a();function Eu(t){function e(r,o){if(typeof r=="string")return t(Cr(r).serialize(o));if(r instanceof Uint8Array||br(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=r=>t(D.U8.serialize(r)),e.u16=r=>t(D.U16.serialize(r)),e.u32=r=>t(D.U32.serialize(r)),e.u64=r=>t(D.U64.serialize(r)),e.u128=r=>t(D.U128.serialize(r)),e.u256=r=>t(D.U256.serialize(r)),e.bool=r=>t(D.Bool.serialize(r)),e.string=r=>t(D.String.serialize(r)),e.address=r=>t(D.Address.serialize(r)),e.id=e.address,e.vector=(r,o)=>t(D.vector(Cr(r)).serialize(o)),e.option=(r,o)=>t(D.option(Cr(r)).serialize(o)),e}s();a();s();a();function Iu(t,e){let r=Array.from(`${t}::`).map(n=>n.charCodeAt(0)),o=new Uint8Array(r.length+e.length);return o.set(r),o.set(e,r.length),fu(o,{dkLen:32})}function Uu(t){return R(t).replace("0x","")}var Mt=class t{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let o=D.TransactionKind.parse(e).ProgrammableTransaction;if(!o)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:o.inputs,commands:o.commands})}static fromBytes(e){let o=D.TransactionData.parse(e)?.V1,n=o.kind.ProgrammableTransaction;if(!o||!n)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:o.sender,expiration:o.expiration,gasData:o.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return e.version===2?new t(q(Tr,e)):new t(q(Tr,wu(e)))}static getDigestFromBytes(e){let r=Iu("TransactionData",e);return ut(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:o}={}){let n=this.inputs,i=this.commands,l={ProgrammableTransaction:{inputs:n,commands:i}};if(o)return D.TransactionKind.serialize(l,{maxSize:e}).toBytes();let c=r?.expiration??this.expiration,d=r?.sender??this.sender,p={...this.gasData,...r?.gasConfig,...r?.gasData};if(!d)throw new Error("Missing transaction sender");if(!p.budget)throw new Error("Missing gas budget");if(!p.payment)throw new Error("Missing gas payment");if(!p.price)throw new Error("Missing gas price");let m={sender:Uu(d),expiration:c||{None:!0},gasData:{payment:p.payment,owner:Uu(this.gasData.owner??d),price:BigInt(p.price),budget:BigInt(p.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return D.TransactionData.serialize({V1:m},{maxSize:e}).toBytes()}addInput(e,r){let o=this.inputs.length;return this.inputs.push(r),{Input:o,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((o,n)=>(o.$kind==="Input"&&o.Input===e&&r(o,n),o))}mapArguments(e){for(let r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(n=>e(n,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(n=>e(n,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(n=>e(n,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(n=>e(n,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(n=>e(n,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":let o=r.$Intent.inputs;r.$Intent.inputs={};for(let[n,i]of Object.entries(o))r.$Intent.inputs[n]=Array.isArray(i)?i.map(l=>e(l,r)):e(i,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}let o=r.length-1;this.commands.splice(e,1,...r),o!==0&&this.mapArguments(n=>{switch(n.$kind){case"Result":n.Result>e&&(n.Result+=o);break;case"NestedResult":n.NestedResult[0]>e&&(n.NestedResult[0]+=o);break}return n})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return q(Tr,this)}};s();a();function ls(t){if(typeof t=="string")return R(t);if(t.Object)return t.Object.ImmOrOwnedObject?R(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?R(t.Object.Receiving.objectId):R(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return R(t.UnresolvedObject.objectId)}var Ou=t=>{throw TypeError(t)},ps=(t,e,r)=>e.has(t)||Ou("Cannot "+r),N=(t,e,r)=>(ps(t,e,"read from private field"),r?r.call(t):e.get(t)),qr=(t,e,r)=>e.has(t)?Ou("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Kt=(t,e,r,o)=>(ps(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r),yt=(t,e,r)=>(ps(t,e,"access private method"),r),Wr,Qr,Wt,L,Xe,gn,ms,us,fs;function Pu(t,e=1/0){let r={$kind:"Result",Result:t},o=[],n=i=>o[i]??(o[i]={$kind:"NestedResult",NestedResult:[t,i]});return new Proxy(r,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,l){if(l in i)return Reflect.get(i,l);if(l===Symbol.iterator)return function*(){let d=0;for(;d<e;)yield n(d),d++};if(typeof l=="symbol")return;let c=parseInt(l,10);if(!(Number.isNaN(c)||c<0))return n(c)}})}var Mu=Symbol.for("@mysten/transaction");function bn(t){return!!t&&typeof t=="object"&&t[Mu]===!0}var ku={buildPlugins:new Map,serializationPlugins:new Map},cs=Symbol.for("@mysten/transaction/registry");function Kr(){try{let t=globalThis;return t[cs]||(t[cs]=ku),t[cs]}catch{return ku}}var sg=class ds{constructor(){qr(this,Xe),qr(this,Wr),qr(this,Qr),qr(this,Wt,new Map),qr(this,L),this.object=vu(r=>{if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Ir(X,r))return r;let o=ls(r),n=N(this,L).inputs.find(i=>o===ls(i));return n?.Object?.SharedObject&&typeof r=="object"&&r.Object?.SharedObject&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||r.Object.SharedObject.mutable),n?{$kind:"Input",Input:N(this,L).inputs.indexOf(n),type:"object"}:N(this,L).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:R(r)}}:r)});let e=Kr();Kt(this,L,new Mt),Kt(this,Qr,[...e.buildPlugins.values()]),Kt(this,Wr,[...e.serializationPlugins.values()])}static fromKind(e){let r=new ds;return Kt(r,L,Mt.fromKindBytes(typeof e=="string"?Se(e):e)),r}static from(e){let r=new ds;return bn(e)?Kt(r,L,new Mt(e.getData())):typeof e!="string"||!e.startsWith("{")?Kt(r,L,Mt.fromBytes(typeof e=="string"?Se(e):e)):Kt(r,L,Mt.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){Kr().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){Kr().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){Kr().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){Kr().buildPlugins.delete(e)}addSerializationPlugin(e){N(this,Wr).push(e)}addBuildPlugin(e){N(this,Qr).push(e)}addIntentResolver(e,r){if(N(this,Wt).has(e)&&N(this,Wt).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);N(this,Wt).set(e,r)}setSender(e){N(this,L).sender=e}setSenderIfNotSet(e){N(this,L).sender||(N(this,L).sender=e)}setExpiration(e){N(this,L).expiration=e?q(ns,e):null}setGasPrice(e){N(this,L).gasConfig.price=String(e)}setGasBudget(e){N(this,L).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){N(this,L).gasData.budget==null&&(N(this,L).gasConfig.budget=String(e))}setGasOwner(e){N(this,L).gasConfig.owner=e}setGasPayment(e){N(this,L).gasConfig.payment=e.map(r=>q(We,r))}get blockData(){return as(N(this,L).snapshot())}getData(){return N(this,L).snapshot()}get[Mu](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Eu(e=>br(e)?N(this,L).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):N(this,L).addInput("pure",Ir(os,e)?q(os,e):e instanceof Uint8Array?Ke.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Ke.ObjectRef(...e))}receivingRef(...e){return this.object(Ke.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Ke.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let r=N(this,L).commands.push(e);return Pu(r-1)}splitCoins(e,r){let o=Ot.SplitCoins(typeof e=="string"?this.object(e):yt(this,Xe,ms).call(this,e),r.map(i=>typeof i=="number"||typeof i=="bigint"||typeof i=="string"?this.pure.u64(i):yt(this,Xe,gn).call(this,i))),n=N(this,L).commands.push(o);return Pu(n-1,r.length)}mergeCoins(e,r){return this.add(Ot.MergeCoins(this.object(e),r.map(o=>this.object(o))))}publish({modules:e,dependencies:r}){return this.add(Ot.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:o,ticket:n}){return this.add(Ot.Upgrade({modules:e,dependencies:r,package:o,ticket:this.object(n)}))}moveCall({arguments:e,...r}){return this.add(Ot.MoveCall({...r,arguments:e?.map(o=>yt(this,Xe,gn).call(this,o))}))}transferObjects(e,r){return this.add(Ot.TransferObjects(e.map(o=>this.object(o)),typeof r=="string"?this.pure.address(r):yt(this,Xe,gn).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(Ot.MakeMoveVec({type:e,elements:r.map(o=>this.object(o))}))}serialize(){return JSON.stringify(as(N(this,L).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(q(Tu,N(this,L).snapshot()),(r,o)=>typeof o=="bigint"?o.toString():o,2)}async sign(e){let{signer:r,...o}=e,n=await this.build(o);return r.signTransaction(n)}async build(e={}){return await this.prepareForSerialization(e),await yt(this,Xe,us).call(this,e),N(this,L).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await yt(this,Xe,us).call(this,e),N(this,L).getDigest()}async prepareForSerialization(e){let r=new Set;for(let n of N(this,L).commands)n.$Intent&&r.add(n.$Intent.name);let o=[...N(this,Wr)];for(let n of r)if(!e.supportedIntents?.includes(n)){if(!N(this,Wt).has(n))throw new Error(`Missing intent resolver for ${n}`);o.push(N(this,Wt).get(n))}await yt(this,Xe,fs).call(this,o,e)}};Wr=new WeakMap;Qr=new WeakMap;Wt=new WeakMap;L=new WeakMap;Xe=new WeakSet;gn=function(t){return br(t)?this.pure(t):yt(this,Xe,ms).call(this,t)};ms=function(t){return typeof t=="function"?q(X,t(this)):q(X,t)};us=async function(t){if(!t.onlyTransactionKind&&!N(this,L).sender)throw new Error("Missing transaction sender");await yt(this,Xe,fs).call(this,[...N(this,Qr),Au],t)};fs=async function(t,e){let r=o=>{if(o>=t.length)return()=>{};let n=t[o];return async()=>{let i=r(o+1),l=!1,c=!1;if(await n(N(this,L),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${o}`);l=!0,await i(),c=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${o}`);if(!c)throw new Error(`next() was not awaited in TransactionPlugin ${o}`)}};await r(0)()};var ys=sg;var ag=Symbol.for("@mysten/SuiClient");var Xr=class{get[ag](){return!0}constructor(e){this.transport=e.transport??new Yo({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!Oe(R(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!Oe(R(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!Oe(R(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!Oe(R(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!Oe(R(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!hr(Ie(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(o=>{if(!o||!hr(Ie(o)))throw new Error(`Invalid Sui Object id ${o}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!ln(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(o=>{if(!ln(o))throw new Error(`Invalid Transaction digest ${o}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:o,requestType:n}){let i=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:ee(e),Array.isArray(r)?r:[r],o]});if(n==="WaitForLocalExecution")try{await this.waitForTransaction({digest:i.digest})}catch{}return i}async signAndExecuteTransaction({transaction:e,signer:r,...o}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(r.toSuiAddress()),n=await e.build({client:this}));let{signature:i,bytes:l}=await r.signTransaction(n);return this.executeTransactionBlock({transactionBlock:l,signature:i,...o})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!Oe(R(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!hr(Ie(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let r;if(bn(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=ee(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=ee(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:ee(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!hr(Ie(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),r=Ge(e.digest);return rt(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){let{nextCursor:o,hasNextPage:n,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:n,nextCursor:o,data:i.map(l=>lu(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:o=2*1e3,...n}){let i=AbortSignal.timeout(r),l=new Promise((c,d)=>{i.addEventListener("abort",()=>d(i.reason))});for(l.catch(()=>{});!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch{await Promise.race([new Promise(d=>setTimeout(d,o)),l])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var Ru=async({chain:t,owner:e,chainData:r},{recipient:o})=>{let n=t.id,{objectId:i}=r,l=B.getRpcProxyUrl(n);if(!i)throw new Error("Unable to determine object id for collectible");if(!e)throw new Error("Unable to determine owner for collectible");if(!l)throw new Error("Failed to get Sui RPC url");let c=new Xr({url:l}),d=new ys;d.setSender(e),d.transferObjects([i],o);let p=await d.build({client:c});return{networkID:n,transaction:p}};async function Bu(t,e,r){let{chain:o}=t,n=o.id;return B.isSolanaNetworkID(n)?Vc(t,e):B.isEVMNetworkID(n)?Mc(t,e):B.isSuiNetworkID(n)?Ru(t,e):B.isBitcoinNetworkID(n)?Ic(t,e,r):Zr(n)}var lg="collectible-transfer-tx",cg=te({seconds:30});function ug(t){return t&&!t.isNaN()}function dg(t){let{collectible:e,sendFormValues:r}=t??{},{chain:o,owner:n}=e??{},{id:i}=o??{},{recipient:l,amountAsset:c}=r??{},d=ka(l,i)??"",p=c?.isNaN()?void 0:c,m=ug(p),{data:y}=io({address:n,networkID:i}),{data:b}=Mr(y),{data:h}=Aa({networkID:i,enableFallback:!0}),S=pg(i,h,b,y),C=S?.sendContextRequired?S.sendContext:void 0;return Q({staleTime:cg,enabled:m&&!!e&&!!t&&!!S,queryKey:M.transferTransaction({collectible:e,sendFormValues:r,sendContext:C}),async queryFn(){try{if(!e||!r||!S)throw new Error("Missing required data to construct fungible transfer transaction");return await Bu(e,{...r,recipient:d},C)}catch(A){if(Ct(A)){let O=A.response?.status;Tt(A,O,lg)}throw A}}})}function pg(t,e,r,o){if(t)return B.isBitcoinNetworkID(t)?!e||!r||!o?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:e,utxoState:r,chainAddress:o}}:{sendContextRequired:!1}}s();a();var hn=t=>{let e=z();return Q({enabled:t.length!==0,queryKey:M.hiddenCollections(t),gcTime:Fe.Long,staleTime:1/0,async queryFn(){try{let r=await at(e,t);return Array.from(r.values()).filter(o=>wo(o,{spamStatus:"NOT_VERIFIED"})).map(({id:o})=>o)}catch(r){return r instanceof Error&&$.captureError(r,"collectibles"),[]}}})};s();a();s();a();var Du=x(E());var mg=t=>{let e=H();return(0,Du.useCallback)(()=>e.invalidateQueries({queryKey:M.collections(t)}),[e,t])};s();a();var fg=2e3,Sn=class extends Be{constructor(e){super(e),this.name="UsePinCollectionError"}};function Cn(){let t=z(),e=H();return se({async mutationFn({collectionId:r,accountId:o,pinned:n}){let i=await Oo(t)??{},l=i[o]??[];if(n){if(Object.values(i).flat().length+1>fg)throw new Sn("Pinned limit reached");let d=[...new Set([...l,r])],p={...i,[o]:d};await ci(t,p)}else{let c=l.indexOf(r);if(c===-1)throw new Sn("Collection not previously pinned");let d=[...l];d.splice(c,1);let p={...i,[o]:d};await ci(t,p)}},async onSuccess(r,o){await e.invalidateQueries({queryKey:M.pinnedCollections(o.accountId)})}})}s();a();var Nu=x(E());var yg=t=>{let e=H();return(0,Nu.useCallback)(()=>e.refetchQueries({queryKey:M.collections(t)}),[e,t])};s();a();s();a();var gg=new Error("Failed to report event for collectible");async function Vu(t){try{let e=await ye.api().post("/collectibles/v1/events",{events:t});if(!Rs(e))throw new Error}catch{throw gg}}function _u(){return se({async mutationFn({event:t}){try{await Vu([t])}catch{}}})}s();a();function bg(){let{data:t}=Gs(),e=z(),r=H(),o=xo(),n=Ae();return se({mutationFn:async({multichainTransaction:l,pendingTransactionInput:c,senderAddress:d,optimisticUpdate:p,gasEstimation:m})=>{if(!t)throw new Error("No account identifier found");let{networkID:y}=l,b=await nr.get(y).onBeforeSend({multichainTransaction:l,gasEstimation:m}),h=await ho({accountIdentifier:t,accountSigner:n,multichainTransaction:b,networkID:y,pendingTransactionInput:c,senderAddress:d,storage:e,utxoManager:o});return p&&cr(r,p),bo(y,h)},onError(l){l instanceof Error&&$.captureError(l,"collectibles")}})}s();a();var wn=t=>{let e=z();return Q({enabled:t.length!==0,queryKey:M.unhiddenCollections(t),gcTime:Fe.Long,staleTime:1/0,async queryFn(){try{let r=await at(e,t);return Array.from(r.values()).filter(o=>xa(o,{spamStatus:"NOT_VERIFIED"})).map(({id:o})=>o)}catch(r){return r instanceof Error&&$.captureError(r,"collectibles"),[]}}})};s();a();var hg=2e3,gs=class extends Error{constructor(e){super(e),this.name="UseUnhideCollectionError"}};function Tn(){let t=z(),e=H(),r=oe();return se({async mutationFn(o){let{collectionId:n,accountId:i}=o,l=await On(t);if(!(await at(t,i)).has(n)&&l>=hg)throw new gs("Too many ids unhidden");await kr(t,r,{accountId:i,mutations:[{id:n,visibility:"visible"}]})},async onSuccess(o,n){await e.invalidateQueries({queryKey:M.unhiddenCollections(n.accountId)}),await e.invalidateQueries({queryKey:M.hiddenCollections(n.accountId)})}})}s();a();var Qt=x(E());s();a();var bs=x(E());var Lu=({toast:t,accountId:e})=>{let{t:r}=_(),o=oe(),n=(0,bs.useCallback)(({collectible:l,previousVisibility:c,updatedVisibility:d})=>{d!==null&&o.capture("collectiblesReportAsNotSpam",{data:xt(l)}),t.success(c==="visible"?r("collectiblesNotSpamSuccess"):r("collectiblesNotSpamAndUnhiddenSuccess"))},[r,t,o]),i=(0,bs.useCallback)((l,c)=>{t.error(r("collectiblesNotSpamFail"))},[r,t]);return El({accountId:e,onSuccess:n,onError:i})};s();a();var hs=x(E());var Fu=({toast:t,accountId:e})=>{let{t:r}=_(),o=oe(),n=(0,hs.useCallback)(({collectible:l,previousVisibility:c,updatedVisibility:d})=>{d!==null&&o.capture("collectiblesReportAsSpam",{data:xt(l)}),t.success(c==="hidden"?r("collectiblesSpamSuccess"):r("collectiblesSpamAndHiddenSuccess"))},[r,t,o]),i=(0,hs.useCallback)((l,c)=>{t.error(r("collectiblesSpamFail"))},[r,t]);return vl({accountId:e,onSuccess:n,onError:i})};function Sg({accountId:t,collectible:e,toast:r}){let o=Fu({collectible:e,accountId:t,toast:r}),n=(0,Qt.useCallback)(()=>{if(e)return o(e)},[o,e]),i=Lu({collectible:e,accountId:t,toast:r}),l=(0,Qt.useCallback)(()=>{if(e)return i(e)},[i,e]),{data:c}=Ee(t??""),d=(0,Qt.useMemo)(()=>c?.get(e?.collection.id??e?.id??""),[c,e]),p=(0,Qt.useMemo)(()=>e?Ta(d,{spamStatus:e.collection.spamStatus}):"NOT_VERIFIED",[e,d]),m=Or(p);return(0,Qt.useMemo)(()=>({isSpam:m,spamStatus:p,onReportSpam:m?void 0:n,onReportNotSpam:m?l:void 0}),[p,m,n,l])}s();a();var ju=x(En()),$u=x(E());s();a();var xn=(t,e)=>{let r=new re(t);if(r.isZero())return"0";let o=Jt(-e);return r.abs().lt(o)?r.isPositive()?`<${o.toFixed()}`:`-<${o.toFixed()}`:parseFloat(r.toString()).toLocaleString("en-US",{maximumFractionDigits:e})};var Cg=(t,e)=>{let{t:r}=_();return(0,$u.useMemo)(()=>{let n=[];if(!t)return n;let i=t?.chain.id,l=Lt.get(i).collectibleDetailPrecision;t.collection.name&&n.push({label:r("collectibleScreenCollectionLabel"),value:t.collection.name});let c,d;if(t.collection.floorPrice){let{price:y,token:b}=t.collection.floorPrice;if(b&&b.decimals&&b.symbol){let{decimals:h,symbol:S}=b,C=ur(y,h);n.push({label:r("collectiblesFloorPrice"),value:`${xn(C,l)} ${S}`}),c=C,d=S}}let p,m;if(t.lastSalePrice){let{price:y,token:b}=t.lastSalePrice;if(b&&b.decimals&&(b.symbol||b.name)){let{decimals:h,symbol:S,name:C}=b,A=ur(y,h);n.push({label:r("collectiblesLastSalePrice"),value:`${xn(A,l)} ${S??C}`}),p=A,m=S}}if(c&&p&&d===m){let y=c-p;n.push({label:r("collectiblesTotalReturn"),value:`${xn(y,l)} ${m}`,color:y>0?e?.positiveColor:y===0?void 0:e?.negativeColor})}return t.collection.ownerCount&&n.push({label:r("collectiblesUniqueHolders"),value:(0,ju.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&n.push({label:r("sendFungibleSummaryNetwork"),value:B.getNetworkName(t.chain.id)}),ro()&&n.push({label:"Standard",value:wg(t)}),Ma(t)&&n.push({label:r("collectiblesNonTransferable"),value:r("collectiblesNonTransferableYes")}),n},[t,e?.negativeColor,e?.positiveColor,r])};function wg(t){let e=t.chainData;if(ue(e))return e.standard;if(_e(e))return e.standard;if(Ze(e))return"Ordinals"}s();a();var zu=x(E());s();a();var Tg=x(E());s();a();var xg=x(E());s();a();var Gu=x(E()),An=(t,e,r,o)=>(0,Gu.useMemo)(()=>e.includes(r)?!1:t.includes(r)?!0:!!o,[t,e,r,o]);s();a();var Yr=x(E());s();a();var Hu=x(E()),Ss=({accountId:t,collectionId:e,isPinned:r,pinMessages:o,pinCollection:n,toast:i,sendAnalyticEvent:l,unhideCollection:c,isHidden:d})=>(0,Hu.useCallback)(()=>{(async()=>{if(!e||!t){i.error(r?o.unpinFail:o.pinFail);return}try{await n({collectionId:e,accountId:t,pinned:!r}),d&&!r&&await c({collectionId:e,accountId:t}),i.success(r?o.unpinSuccess:o.pinSuccess),l&&l(r?"collectionUnpinned":"collectionPinned")}catch{i.error(r?o.unpinFail:o.pinFail)}})()},[e,t,r,o,n,i,l,c,d]);var Ig=({collectionId:t,isSpam:e,accountId:r,networkId:o,toast:n})=>{let{t:i}=_(),l=oe(),{mutateAsync:c}=Tn(),{data:d=[]}=hn(r||""),{data:p=[]}=wn(r||""),m=An(d,p,t??"",!!e),{mutateAsync:y}=Cn(),{data:b=[]}=Mo(r||""),h=Do(b,t??""),S=(0,Yr.useMemo)(()=>({pinSuccess:i("collectionPinSuccess"),pinFail:i("collectionPinFail"),unpinSuccess:i("collectionUnpinSuccess"),unpinFail:i("collectionUnpinFail")}),[i]),C=(0,Yr.useCallback)(O=>{o&&l.capture(O,{data:{networkId:o,chainId:B.getChainID(o)}})},[l,o]),A=Ss({accountId:r,collectionId:t,isPinned:h,pinMessages:S,pinCollection:y,toast:n,sendAnalyticEvent:C,unhideCollection:c,isHidden:m});return(0,Yr.useMemo)(()=>({isPinned:h,onTogglePin:A}),[h,A])};s();a();var Jr=x(E());var Ug=({networkID:t,isTxError:e,isTxConfirmed:r,isTxSubmitted:o})=>{let n=Lt.get(t).sendSuccessCondition,i=(0,Jr.useMemo)(()=>e?"ERROR":n==="SUBMISSION"&&o||n==="CONFIRMATION"&&r?"SUCCESS":"LOADING",[r,e,o,n]),l=n==="CONFIRMATION"?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",c=(0,Jr.useMemo)(()=>{switch(i){case"LOADING":return Pe.t("sendStatusLoadingTitle");case"ERROR":return Pe.t("sendStatusErrorTitle");case"SUCCESS":return Pe.t(l)}},[i,l]),{isError:d,isSuccess:p}=(0,Jr.useMemo)(()=>({isError:i==="ERROR",isSuccess:i==="SUCCESS"}),[i]),{transactionSpeed:m="standard"}=qn(b=>b.sendFormValues),y=(0,Jr.useMemo)(()=>{let b=nr.get(t).transactionSpeedDescription(m);return b?Pe.t(b):""},[t,m]);return{title:c,isError:d,isSuccess:p,sendSuccessCondition:n,estimatedTime:y}};s();a();var Qu=x(E());s();a();var qu={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},Cs=Je(t=>({...qu,reset:()=>t({...qu}),setListCollectible:e=>t({listCollectible:e}),setListPrice:e=>t({listCollectiblePrice:e}),setEditListPrice:e=>t({editListCollectiblePrice:e}),setUnlistCollectible:e=>t({unlistCollectible:e}),setTransactionURL:e=>t({transactionURL:e})}));s();a();var Xu=x(E());s();a();var Yu=x(E());s();a();var Ju=x(E()),kg=t=>(0,Ju.useMemo)(()=>t.filter(e=>e?.media?.type==="image"),[t]);s();a();var Zu=x(E());var Og=(t,e)=>(0,Zu.useMemo)(()=>{if(!t||!e)return;let r=t.chain.id,o=e.explorers[r]??xr.get(r).defaultExplorer,n,i;if(ue(t.chainData))i="address",n=t.chainData.mint;else if(_e(t.chainData))if(t.chainData.contract)t.chainData.id?(i="nft",n=[t.chainData.contract,t.chainData.id]):(i="token",n=t.chainData.contract);else return;else if(Ze(t.chainData))if(lr(t.chainData)){let{hash:c,index:d}=t.chainData.utxoDetails;i="transaction",n=`${c}#flow=&vout=${d}`}else return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};else if(pl(t.chainData))i="nft",n=t.chainData.objectId??"";else throw new Error(`Unhandled collectible explorer for chain id: ${t.chain.id}`);if(!n)return;let l=vr({networkID:r,endpoint:i,explorerType:o,param:n});if(l)return{name:Ar[o],url:l}},[t,e]);s();a();var ed=x(E()),Mg=t=>(0,ed.useMemo)(()=>{let e=new Set;return t.filter(r=>{if(!r?.media?.image?.url)return!1;let{url:o}=r.media.image;return e.has(o)?!1:(e.add(o),!0)})},[t]);s();a();var td=x(E());var Rg=t=>{let{t:e}=_();return(0,td.useMemo)(()=>{let o=[];if(!t)return;let n=t.chainData;if(Ze(n)){let{outputValue:i,satNumber:l,satName:c,inscriptionId:d,inscriptionNumber:p,protocolName:m,createdAt:y,utxoDetails:b}=n,h=e(d?"collectibleDetailOrdinalInfo":"collectibleDetailRareSatsInfo"),S;return i?S=parseFloat(i).toLocaleString("en-US"):b&&(S=b.value.toLocaleString("en-US")),o.push(S?{label:e("collectibleDetailSatsInUtxo"),value:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:S})??void 0}:null),o.push(l?{label:e("collectibleDetailSatNumber"),value:l}:null),o.push(c?{label:e("collectibleDetailSatName"),value:c}:null),o.push(d?{label:e("collectibleDetailInscriptionId"),value:Is(d,5,3)}:null),o.push(p?{label:e("collectibleDetailInscriptionNumber"),value:p}:null),o.push(m?{label:e("collectibleDetailStandard"),value:m?.toUpperCase()}:null),o.push(y?{label:e("collectibleDetailCreated"),value:Bg(new Date(y))}:null),{label:h,items:o.filter(As)}}},[t,e])};function Bg(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),r=t.toLocaleTimeString();return`${e} ${r}`}s();a();var od=x(E()),Xt=()=>{},rd=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function Dg(t){let{amountToBurn:e=0,explorerName:r,isBurnable:o,isHidden:n,isPinned:i,isSpam:l,onBurnToken:c,onReportNotSpam:d,onReportSpam:p,onSaveToLibrary:m,onSend:y,onSetAsAvatar:b,onToggleHide:h,onTogglePin:S,onViewOnExplorer:C,shortcuts:A,shouldDisplaySend:O,shouldDisplayShortcuts:V}=t,{t:v}=_();return(0,od.useMemo)(()=>{let J=[];if(O&&J.push({text:v("commandSend"),type:"send",onClick:y??Xt}),m&&J.push({text:v("assetDetailSavePhoto"),singleWordAltText:v("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:m??Xt}),b&&!l&&J.push({text:v("collectibleDetailSetAsAvatar"),singleWordAltText:v("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:b??Xt}),S){let ie=v(i?"assetDetailUnpinCollection":"assetDetailPinCollection"),xe=v(i?"commandUnpin":"commandPin"),ae=i?"unpin":"pin";J.push({text:ie,singleWordAltText:xe,type:ae,menuOnly:!0,onClick:S??Xt})}if(h){let ie=v(n?"assetDetailUnhideCollection":"assetDetailHideCollection"),xe=v(n?"commandUnhide":"commandHide"),ae=n?"unhide":"hide";J.push({text:ie,singleWordAltText:xe,type:ae,menuOnly:!0,onClick:h??Xt})}if(d){let ie=v("collectiblesReportAsNotSpam");J.push({text:ie,type:"reportAsNotSpam",singleWordAltText:v("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:d})}if(p){let ie=v("collectiblesReportAsSpam");J.push({text:ie,type:"reportAsSpam",singleWordAltText:v("commandReport"),menuOnly:!0,isDestructive:!0,onClick:p})}if(o){let ie=v(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");J.push({text:ie,singleWordAltText:v("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:c??Xt})}return!!C&&!!r&&J.push({text:v("assetDetailViewOnExplorer",{explorer:r}),singleWordAltText:v("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:C??Xt}),J.sort((ie,xe)=>(rd.get(ie.type)??100)-(rd.get(xe.type)??100)),{actions:Da(J,4),shortcuts:V?A:[]}},[e,r,o,n,i,l,c,d,p,m,y,b,h,S,C,A,O,V,v])}s();a();export{_a as a,La as b,qa as c,Td as d,xd as e,ja as f,Hn as g,qn as h,jd as i,$d as j,Qn as k,kd as l,Od as m,Gd as n,zd as o,Md as p,Za as q,Dd as r,Hd as s,qd as t,Fd as u,ep as v,ko as w,Ax as x,dl as y,vx as z,bp as A,Km as B,ue as C,_e as D,Ze as E,pl as F,lr as G,Jm as H,Rc as I,dg as J,Dt as K,wp as L,mg as M,Mo as N,yg as O,_u as P,bg as Q,Tp as R,xp as S,Ap as T,Rl as U,Sg as V,Cg as W,vp as X,Do as Y,qv as Z,Vl as _,Xp as $,om as aa,im as ba,gm as ca,wm as da,Tm as ea,Am as fa,Em as ga,Im as ha,km as ia,Ig as ja,Ug as ka,Nm as la,Vm as ma,jm as na,$m as oa,Gm as pa,kg as qa,Og as ra,Mg as sa,Rg as ta,Dg as ua,zm as va};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-IKQYPAXW.js.map
